/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e,t,n={6664:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;function l(){}function c(){}c.resetWarningCache=l;var u,d,h=(u=function(e){e.exports=function(){function e(e,t,n,r,i,s){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:c,resetWarningCache:l};return n.PropTypes=n,n}()},u(d={exports:{}},d.exports),d.exports),f=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},p=function(e){return null!==e&&"object"===i(e)},m="[object Object]",g=function e(t,n){if(!p(t)||!p(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===m;if(i!==(Object.prototype.toString.call(n)===m))return!1;if(!i&&!r)return t===n;var s=Object.keys(t),o=Object.keys(n);if(s.length!==o.length)return!1;for(var a={},l=0;l<s.length;l+=1)a[s[l]]=!0;for(var c=0;c<o.length;c+=1)a[o[c]]=!0;var u=Object.keys(a);if(u.length!==s.length)return!1;var d=t,h=n;return u.every((function(t){return e(d[t],h[t])}))},y=function(e,t,n){return p(e)?Object.keys(e).reduce((function(i,o){var a=!p(t)||!g(e[o],t[o]);return n.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),i):a?r(r({},i||{}),{},s({},o,e[o])):i}),null):null},v=function(e){if(null===e||p(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;var t;throw new Error("Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},w=function(e){if(function(e){return p(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(v)};var t=v(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},b=t.createContext(null);b.displayName="ElementsContext";var _=t.createContext(null);_.displayName="CartElementContext";var E=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo((function(){return w(n)}),[n]),a=o(t.useState(null),2),l=a[0],c=a[1],u=o(t.useState(null),2),d=u[0],h=u[1],p=o(t.useState((function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(r):null}})),2),m=p[0],g=p[1];t.useEffect((function(){var e=!0,t=function(e){g((function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}}))};return"async"!==s.tag||m.stripe?"sync"!==s.tag||m.stripe||t(s.stripe):s.stripePromise.then((function(n){n&&e&&t(n)})),function(){e=!1}}),[s,m,r]);var v=f(n);t.useEffect((function(){null!==v&&v!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[v,n]);var E=f(r);return t.useEffect((function(){if(m.elements){var e=y(r,E,["clientSecret","fonts"]);e&&m.elements.update(e)}}),[r,E,m.elements]),t.useEffect((function(){var e=m.stripe;e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.1.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.1.1",url:"https://stripe.com/docs/stripe-js/react"}))}),[m.stripe]),t.createElement(b.Provider,{value:m},t.createElement(_.Provider,{value:{cart:l,setCart:c,cartState:d,setCartState:h}},i))};E.propTypes={stripe:h.any,options:h.object};var S=function(e){return function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e}(t.useContext(b),e)},x=function(e){return function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e}(t.useContext(_),e)},k=function(e){return(0,e.children)(S("mounts <ElementsConsumer>"))};k.propTypes={children:h.func.isRequired};var I=function(e,n,r){var i=!!r,s=t.useRef(r);t.useEffect((function(){s.current=r}),[r]),t.useEffect((function(){if(!i||!e)return function(){};var t=function(){s.current&&s.current.apply(s,arguments)};return e.on(n,t),function(){e.off(n,t)}}),[i,n,e,s])},T=function(e,n){var r,i="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),s=n?function(e){S("mounts <".concat(i,">")),x("mounts <".concat(i,">"));var n=e.id,r=e.className;return t.createElement("div",{id:n,className:r})}:function(n){var r,s=n.id,a=n.className,l=n.options,c=void 0===l?{}:l,u=n.onBlur,d=n.onFocus,h=n.onReady,p=n.onChange,m=n.onEscape,g=n.onClick,v=n.onLoadError,w=n.onLoaderStart,b=n.onNetworksChange,_=n.onCheckout,E=n.onLineItemClick,k=n.onConfirm,T=n.onCancel,C=n.onShippingAddressChange,N=n.onShippingRateChange,A=S("mounts <".concat(i,">")).elements,P=o(t.useState(null),2),O=P[0],R=P[1],L=t.useRef(null),D=t.useRef(null),M=x("mounts <".concat(i,">")),F=M.setCart,j=M.setCartState;I(O,"blur",u),I(O,"focus",d),I(O,"escape",m),I(O,"click",g),I(O,"loaderror",v),I(O,"loaderstart",w),I(O,"networkschange",b),I(O,"lineitemclick",E),I(O,"confirm",k),I(O,"cancel",T),I(O,"shippingaddresschange",C),I(O,"shippingratechange",N),"cart"===e?r=function(e){j(e),h&&h(e)}:h&&(r="expressCheckout"===e?h:function(){h(O)}),I(O,"ready",r),I(O,"change","cart"===e?function(e){j(e),p&&p(e)}:p),I(O,"checkout","cart"===e?function(e){j(e),_&&_(e)}:_),t.useLayoutEffect((function(){if(null===L.current&&A&&null!==D.current){var t=A.create(e,c);"cart"===e&&F&&F(t),L.current=t,R(t),t.mount(D.current)}}),[A,c,F]);var U=f(c);return t.useEffect((function(){if(L.current){var e=y(c,U,["paymentRequest"]);e&&L.current.update(e)}}),[c,U]),t.useLayoutEffect((function(){return function(){if(L.current&&"function"==typeof L.current.destroy)try{L.current.destroy(),L.current=null}catch(e){}}}),[]),t.createElement("div",{id:s,className:a,ref:D})};return s.propTypes={id:h.string,className:h.string,onChange:h.func,onBlur:h.func,onFocus:h.func,onReady:h.func,onEscape:h.func,onClick:h.func,onLoadError:h.func,onLoaderStart:h.func,onNetworksChange:h.func,onCheckout:h.func,onLineItemClick:h.func,onConfirm:h.func,onCancel:h.func,onShippingAddressChange:h.func,onShippingRateChange:h.func,options:h.object},s.displayName=i,s.__elementType=e,s},C="undefined"==typeof window,N=T("auBankAccount",C),A=T("card",C),P=T("cardNumber",C),O=T("cardExpiry",C),R=T("cardCvc",C),L=T("fpxBank",C),D=T("iban",C),M=T("idealBank",C),F=T("p24Bank",C),j=T("epsBank",C),U=T("payment",C),V=T("expressCheckout",C),z=T("paymentRequestButton",C),q=T("linkAuthentication",C),B=T("address",C),G=T("shippingAddress",C),$=T("cart",C),W=T("paymentMethodMessaging",C),H=T("affirmMessage",C),K=T("afterpayClearpayMessage",C);e.AddressElement=B,e.AffirmMessageElement=H,e.AfterpayClearpayMessageElement=K,e.AuBankAccountElement=N,e.CardCvcElement=R,e.CardElement=A,e.CardExpiryElement=O,e.CardNumberElement=P,e.CartElement=$,e.Elements=E,e.ElementsConsumer=k,e.EpsBankElement=j,e.ExpressCheckoutElement=V,e.FpxBankElement=L,e.IbanElement=D,e.IdealBankElement=M,e.LinkAuthenticationElement=q,e.P24BankElement=F,e.PaymentElement=U,e.PaymentMethodMessagingElement=W,e.PaymentRequestButtonElement=z,e.ShippingAddressElement=G,e.useCartElement=function(){return x("calls useCartElement()").cart},e.useCartElementState=function(){return x("calls useCartElementState()").cartState},e.useElements=function(){return S("calls useElements()").elements},e.useStripe=function(){return S("calls useStripe()").stripe},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(7294))},8035:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,":root{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:50%;width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next:after,.swiper-button-prev:after{font-family:swiper-icons;font-size:var(--swiper-navigation-size);text-transform:none!important;letter-spacing:0;font-variant:initial;line-height:1}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:10px;right:auto}.swiper-button-prev:after,.swiper-rtl .swiper-button-next:after{content:'prev'}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:10px;left:auto}.swiper-button-next:after,.swiper-rtl .swiper-button-prev:after{content:'next'}.swiper-button-lock{display:none}",""]);const a=o},5147:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s),a=n(1667),l=n.n(a),c=new URL(n(9954),n.b),u=o()(i()),d=l()(c);u.push([e.id,"/**\n * Swiper 8.4.5\n * Most modern mobile touch slider and framework with hardware accelerated transitions\n * https://swiperjs.com\n *\n * Copyright 2014-2022 Vladimir Kharlampidi\n *\n * Released under the MIT License\n *\n * Released on: November 21, 2022\n */\n\n@font-face{font-family:swiper-icons;src:url("+d+");font-weight:400;font-style:normal}:root{--swiper-theme-color:#007aff}.swiper{margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;box-sizing:content-box}.swiper-android .swiper-slide,.swiper-wrapper{transform:translate3d(0px,0,0)}.swiper-pointer-events{touch-action:pan-y}.swiper-pointer-events.swiper-vertical{touch-action:pan-x}.swiper-slide{flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform}.swiper-slide-invisible-blank{visibility:hidden}.swiper-autoheight,.swiper-autoheight .swiper-slide{height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden .swiper-slide{transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d,.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d .swiper-slide,.swiper-3d .swiper-slide-shadow,.swiper-3d .swiper-slide-shadow-bottom,.swiper-3d .swiper-slide-shadow-left,.swiper-3d .swiper-slide-shadow-right,.swiper-3d .swiper-slide-shadow-top,.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d .swiper-slide-shadow,.swiper-3d .swiper-slide-shadow-bottom,.swiper-3d .swiper-slide-shadow-left,.swiper-3d .swiper-slide-shadow-right,.swiper-3d .swiper-slide-shadow-top{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}.swiper-3d .swiper-slide-shadow{background:rgba(0,0,0,.15)}.swiper-3d .swiper-slide-shadow-left{background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-right{background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-top{background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-3d .swiper-slide-shadow-bottom{background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:start start}.swiper-horizontal.swiper-css-mode>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-vertical.swiper-css-mode>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-centered>.swiper-wrapper::before{content:'';flex-shrink:0;order:9999}.swiper-centered.swiper-horizontal>.swiper-wrapper>.swiper-slide:first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-centered.swiper-horizontal>.swiper-wrapper::before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-centered.swiper-vertical>.swiper-wrapper>.swiper-slide:first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-centered.swiper-vertical>.swiper-wrapper::before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-centered>.swiper-wrapper>.swiper-slide{scroll-snap-align:center center}",""]);const h=u},8887:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".addresses-btn{\r\n    background-color: black;\r\n    border: none;\r\n    color: white;\r\n    padding: .5rem 1rem;\r\n    border-radius: 0;\r\n    font-size: 14px;\r\n}\r\n\r\n.addresses-btn img{\r\n    max-width: 25px;\r\n    object-fit: cover;\r\n}",""]);const a=o},1247:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=La+Belle+Aurore&family=Readex+Pro:wght@200;300;400;500;600;700&display=swap);"]),o.push([e.id,":root {\r\n    --primary-text-color: #000000;\r\n    --secondary-text: #808080;\r\n    --primary-background: #FFFFFF;\r\n    --secondary-theme-color: rgb(245, 245, 245);\r\n    --theme-color: #ED2329;\r\n  }\r\n\r\n*{\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n    font-family: 'La Belle Aurore', cursive;\r\n    font-family: 'Readex Pro', sans-serif;\r\n    color: black;\r\n}\r\n\r\n::-webkit-scrollbar{\r\n    width: 1em;\r\n}\r\n\r\n::-webkit-scrollbar-track{\r\n    background-color: rgb(210, 210, 210);\r\n}\r\n\r\n::-webkit-scrollbar-thumb{\r\n    background-color: rgb(79, 79, 79);\r\n    border-radius: 100vh;\r\n    border: solid 1px rgb(210, 210, 210);\r\n}\r\n::-webkit-scrollbar-thumb:hover{\r\n    background-color: rgb(69, 69, 69);\r\n}\r\n\r\na {\r\n    color: black;\r\n    text-decoration: none;\r\n}\r\n\r\na:hover{\r\n    color: black;\r\n}\r\n\r\n.section{\r\n    padding: 60px 0px;\r\n    /* margin: 60px 0px; */\r\n}\r\n.section-container{\r\n    position: relative;\r\n    margin: 0 auto;\r\n    width: 80%!important;\r\n}\r\n\r\n.section-title{\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    text-transform: uppercase;\r\n    font-size: 30px;\r\n    font-weight: bold;\r\n    text-align: center;\r\n    color: var(--primary-text-color);\r\n}\r\n\r\n.section-title::after{\r\n    position: absolute;\r\n    content: \"\";\r\n    display: block;\r\n    width: 120px ;\r\n    background-color: var(--primary-text-color);\r\n    height: 1px;\r\n    bottom: -2px;\r\n    transition: .5s ease-out;\r\n}\r\n\r\n.section-title:hover::after{\r\n    width: 160px;\r\n}",""]);const a=o},1286:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".cart{\r\n    position: fixed;\r\n    width: 320px;\r\n    height: auto;\r\n    overflow: auto;\r\n    max-height: 400px;\r\n    background-color: var(--secondary-theme-color);\r\n    top: 60px;\r\n    right: 0;\r\n    z-index: 1000;\r\n    padding: 30px 15px 10px 15px;\r\n    text-transform: uppercase;\r\n    -webkit-box-shadow: -1px 6px 23px -2px rgba(0,0,0,0.4);\r\n    -moz-box-shadow: -1px 6px 23px -2px rgba(0,0,0,0.4);\r\n    box-shadow: -1px 6px 23px -2px rgba(0,0,0,0.4);\r\n}\r\n\r\n.cart-table{\r\n    font-size: 10px;\r\n    padding: 0px 15px;\r\n}\r\n.cart-item{\r\n    background-color: var(--primary-background);\r\n    border-radius: 5px;\r\n    padding: 10px;\r\n    margin: 10px 0px;\r\n    font-size: 11px;\r\n}\r\n.cart-img{\r\n    height: 70px;\r\n    width: 70px;\r\n    /* border-radius: 5px; */\r\n    aspect-ratio: 1 / 1;\r\n    object-fit: cover;\r\n}\r\n\r\n.btn-plus, .btn-minus{\r\n    background-color: var(--secondary-theme-color);\r\n    color: var(--secondary-text);\r\n    border:none;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 20%;\r\n}\r\n\r\n.remove-item-btn{\r\n    background-color: transparent;\r\n    color: var(--secondary-text);\r\n    border:none;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 20%;\r\n}\r\n\r\n.remove-item-btn:hover{\r\n    color: black;\r\n}\r\n\r\n.cart-title{\r\n    margin-left: 5px;\r\n}\r\n\r\n.checkout-btn{\r\n    /* margin-top: 30px; */\r\n    width: 100%;\r\n    text-transform: uppercase;\r\n}\r\n.cart a{\r\n    cursor: pointer;\r\n}\r\n.cart a:hover{\r\n    text-decoration: none;\r\n}\r\n.cart a:hover .cart-item{\r\n    background-color: #eaeaea;\r\n}\r\n\r\n\r\n\r\n@media screen and (min-width: 992px) {\r\n    .cart{\r\n        right: 60px;\r\n    }\r\n}",""]);const a=o},8497:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".favs{\r\n    position: fixed;\r\n    width: 320px;\r\n    height: auto;\r\n    max-height: 400px;\r\n    overflow: auto;\r\n    scrollbar-width: thin;\r\n    background-color: var(--secondary-theme-color);\r\n    top: 60px;\r\n    right: 0;\r\n    z-index: 1000;\r\n    padding: 30px 15px 10px 15px;\r\n    text-transform: uppercase;\r\n    -webkit-box-shadow: -1px 6px 23px -2px rgba(0,0,0,0.4);\r\n    -moz-box-shadow: -1px 6px 23px -2px rgba(0,0,0,0.4);\r\n    box-shadow: -1px 6px 23px -2px rgba(0,0,0,0.4);\r\n}\r\n\r\n.favs-table{\r\n    font-size: 10px;\r\n    padding: 0px 15px;\r\n}\r\n.favs-item{\r\n    background-color: var(--primary-background);\r\n    border-radius: 5px;\r\n    padding: 10px;\r\n    margin: 10px 0px;\r\n    font-size: 11px;\r\n}\r\n.favs-img{\r\n    height: 70px;\r\n    width: 70px;\r\n    aspect-ratio: 1 / 1;\r\n    object-fit: cover;\r\n    /* border-radius: 5px; */\r\n}\r\n\r\n.remove-item-btn{\r\n    background-color: transparent;\r\n    color: var(--secondary-text);\r\n    border:none;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 20%;\r\n}\r\n\r\n.remove-item-btn:hover{\r\n    color: black;\r\n}\r\n\r\n.favs-title{\r\n    margin-left: 5px;\r\n}\r\n.favs a{\r\n    cursor: pointer;\r\n}\r\n.favs a:hover{\r\n    text-decoration: none;\r\n}\r\n.favs a:hover .favs-item{\r\n    background-color: #eaeaea;\r\n}\r\n",""]);const a=o},7348:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".footer-section{\r\n    padding: 50px 0;\r\n    background-color: black;\r\n}\r\n\r\n.footer-section div{\r\n    color: white;\r\n}\r\n\r\n.footer-logo{\r\n    width: 40px;\r\n    margin-right: 5px;\r\n    /* height: 80px; */\r\n    object-fit: cover;\r\n}\r\n\r\n.footer-title{\r\n    font-size: 24px; ;\r\n    list-style-type: none;\r\n    color: white;\r\n    text-transform: uppercase;\r\n    font-weight: bold;\r\n}\r\n.footer ul, .footer-link, .footer-text{\r\n    text-transform: uppercase;\r\n    color: white;\r\n    list-style-type: none;\r\n    font-weight: 100;\r\n}\r\n\r\n.footer-link:hover{\r\n    text-decoration: none;\r\n    color: white;\r\n}\r\n\r\n",""]);const a=o},8585:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".giveaway-section{\r\n    padding: 48px 0;\r\n    background-color: #EFEFEF;\r\n}\r\n\r\n.giveaway-section .section-info{\r\n    width: 300px;\r\n}\r\n.giveaway-color{\r\n    color: var(--theme-color);\r\n}\r\n.giveaway-item{\r\n    padding: 2rem .5rem;\r\n}\r\n\r\n.giveaway-item .giveaway-icon{\r\n    object-fit: cover;\r\n    width: 40px;\r\n}\r\n.giveaway-item p{\r\n    text-transform: uppercase;\r\n    margin-top: 1rem;\r\n}\r\n\r\n.air-jordans{\r\n    width: 100%;\r\n    object-fit: cover;\r\n}\r\n\r\n.giveaway-section .btn-start-now{\r\n    display: block;\r\n    margin: 0 auto;\r\n    padding: .5rem 2rem;\r\n    background-color: black;\r\n    color: white;\r\n    border: none;\r\n}\r\n\r\n.giveaway-section .btn-start-now:hover{\r\n    box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n    -webkit-box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n    -moz-box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n}\r\n",""]);const a=o},9047:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,'.hero-section{\r\n    position: fixed;\r\n    top: 0;\r\n    z-index: -10;\r\n}\r\n.carousel-item{\r\n    position: relative;\r\n    height: 400px;\r\n    overflow: hidden;\r\n}\r\n\r\n.hero-carousel-img-container{\r\n    width: 100vw;\r\n    height: 100%;\r\n    position: relative;\r\n}\r\n\r\n.hero-carousel-img-container::after{\r\n    content:"";\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, .3);\r\n}\r\n\r\n@keyframes hero-move {\r\n    0% {\r\n        transform: scale(1);\r\n      }\r\n      100% {\r\n        transform: scale(1.1);\r\n      }\r\n\r\n  }\r\n  \r\n.hero-carousel-img{\r\n    width: 100%;\r\n    height: 750px;\r\n    object-fit: cover;\r\n    animation: hero-move 10s linear infinite;\r\n\r\n}\r\n\r\n.carousel-form{\r\n    position: absolute;\r\n    height: 100%;\r\n    top: 100%;\r\n    left: 50%;\r\n    transform: translate(-50%,-50%); \r\n    text-align: center;\r\n    z-index: 10;\r\n    text-transform: uppercase;\r\n}\r\n\r\n.carousel-title{\r\n    color: var(--primary-background);\r\n    font-size: 3vw;\r\n    font-weight: bolder;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n\r\n.carousel-desc{\r\n    margin-left: auto;\r\n    font-size: 12px;\r\n    font-weight: lighter;\r\n    color: var(--primary-background);\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.carousel-btn-shop{\r\n    background-color: rgba(0, 0, 0, 0.2);\r\n    border: 1px solid white;\r\n    border-radius: 0;\r\n    color: var(--primary-background);\r\n    font-size: 16px;\r\n    text-transform: uppercase;\r\n    padding: 10px 20px;\r\n}\r\n\r\n.carousel-btn-shop:hover{\r\n    background-color: var(--secondary-theme-color);\r\n    color: var(--theme-color);\r\n}\r\n\r\n\r\n/* MEDIA QUERIES */\r\n\r\n@media screen and (max-width: 767px) {\r\n    .carousel-item{\r\n        height: 100vh;\r\n        width: 100vw;\r\n    }\r\n    .hero-carousel-img{\r\n        height: 100%!important;\r\n    }\r\n    .hero-carousel-img-container{\r\n        width: 100%;\r\n    }\r\n    .carousel-form{\r\n        text-align: center;\r\n    }\r\n    .carousel-title{\r\n        font-size: 33px;\r\n    }\r\n    .carousel-desc{\r\n        margin: auto auto 10px auto;\r\n        font-size: 8px;\r\n    }\r\n}\r\n',""]);const a=o},3439:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".hot-item{\r\n    padding: 15px;\r\n    position: relative;\r\n    overflow: hidden;\r\n    transition: .3s ease-out;\r\n}\r\n\r\n.hot-item:hover .hot-btn{\r\n    left: 15px;\r\n    bottom: 15px;\r\n}\r\n\r\n.hot-item:hover{\r\n    scale: 1.05;\r\n}\r\n\r\n.hot-item:hover .hot-img{\r\n    box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n    -webkit-box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n    -moz-box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n}\r\n\r\n.hot-accessories{\r\n    height: 300px;\r\n}\r\n\r\n.hot-img{\r\n    object-fit: cover;\r\n    width: 100%;\r\n    transition: .3s ease-out;\r\n}\r\n\r\n.hot-btn{\r\n    padding: .5rem 1rem;\r\n    text-transform: uppercase;\r\n    position: absolute;\r\n    bottom: 15px;\r\n    left: -200px;\r\n    background-color: black;\r\n    color: white;\r\n    border: none;\r\n    transition: .5s ease-out;\r\n}\r\n\r\n.square{\r\n    aspect-ratio: 1/1;\r\n    overflow: hidden;\r\n}",""]);const a=o},484:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".looking-drippy-section{\r\n    background-color: #EFEFEF;\r\n}\r\n\r\n.looking-drippy-section h2{\r\n    /* font-size: 2rem; */\r\n    margin: 0;\r\n}",""]);const a=o},6145:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".navbar-section{\r\n    position: fixed;\r\n    top: 0;\r\n    z-index: 1000;\r\n    margin: auto;\r\n    width: 100%;\r\n    transition: .5s;\r\n    text-transform: uppercase;\r\n}\r\n\r\n.nav-shadow{\r\n    -webkit-box-shadow: -4px 2px 23px -2px rgba(0,0,0,0.4);\r\n    -moz-box-shadow: -4px 2px 23px -2px rgba(0,0,0,0.4);\r\n    box-shadow: -4px 2px 23px -2px rgba(0,0,0,0.4);\r\n}\r\nnav{\r\n    height: 60px;\r\n}\r\n.nav-logo{\r\n    object-fit: contain;\r\n    height: 50px;\r\n}\r\n\r\n.nav-link{\r\n    color: var(--primary-text-color);\r\n    text-decoration: none;\r\n    transition: .1s;\r\n}\r\n\r\n.nav-link:hover{\r\n    /* background-color: var(--secondary-theme-color); */\r\n    color: var(--theme-color)!important;\r\n}\r\n\r\n.nav-sales{\r\n    color: var(--theme-color)!important;\r\n}\r\n\r\n.search-input-container{\r\n    position: relative;\r\n    overflow: hidden;\r\n}\r\n.nav-search-input{\r\n    padding: 5px;\r\n    border: none;\r\n    background-color: #EBEDEE !important;\r\n}\r\n\r\n.nav-search-input-white{\r\n    padding: 5px;\r\n    border: none;\r\n    background-color: #303030 !important;\r\n}\r\n\r\n.nav-search-input:focus,.nav-search-input:active {\r\n    outline: none !important;\r\n    box-shadow: none;\r\n }\r\n\r\n .nav-search-input-white:focus,.nav-search-input-white:active {\r\n    outline: none !important;\r\n    box-shadow: none;\r\n }\r\n\r\n.nav-search-icon{\r\n    position: absolute;\r\n    object-fit: contain;\r\n    height: 40px;\r\n    padding: 10px;\r\n    right: 3%;\r\n    cursor: pointer;\r\n}\r\n\r\n.nav-icon{\r\n    object-fit: contain;\r\n    height: 40px;\r\n    padding: 10px;\r\n    cursor: pointer;\r\n}\r\n\r\n.nav-btn{\r\n    background: none;\r\n    border: none;\r\n}\r\n\r\n.bag-btn{\r\n    position: relative;\r\n}\r\n\r\n.cart-number{\r\n    position: absolute;\r\n    top: 5px;\r\n    right: 2px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: var(--theme-color);\r\n    width: 17px;\r\n    height: 17px;\r\n    font-size: 12px;\r\n    border-radius: 30%;\r\n    color: var(--primary-background);\r\n}\r\n\r\n.heart-btn{\r\n    position: relative;\r\n}\r\n.fav-number{\r\n    position: absolute;\r\n    top: 5px;\r\n    right: 0px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: var(--theme-color);\r\n    width: 17px;\r\n    height: 17px;\r\n    font-size: 12px;\r\n    border-radius: 30%;\r\n    color: var(--primary-background);\r\n}\r\n\r\n.collapse:not(.show){\r\n    left: -113%;\r\n}\r\n\r\n\r\n.navbar-section .dropdown-menu{\r\n    min-width: none!important;\r\n    left: -197%!important;\r\n}\r\n\r\n.close-sidebar{\r\n    font-size: 1.5rem;\r\n    font-weight: bold;\r\n    margin-left: 90%;\r\n    background: none;\r\n    border: none;\r\n}\r\n/* Media Query */\r\n@media screen and (max-width: 992px) {\r\n    .nav-sidebar-logo{\r\n        display: flex!important;\r\n    }\r\n    .navbar-collapse{\r\n        display: block!important;\r\n        position: absolute;\r\n        order: 1;\r\n        background-color: var(--primary-background);\r\n        top: 0;\r\n        left: -13%;\r\n        /* width: 75vw!important; */\r\n        width: 200px!important;\r\n        height: 100vh!important;\r\n        padding: 20px;\r\n        z-index: 10;\r\n        box-shadow: 8px 15px 15px -5px rgba(0,0,0,0.44);\r\n        -webkit-box-shadow: 8px 15px 15px -5px rgba(0,0,0,0.44);\r\n        -moz-box-shadow: 8px 15px 15px -5px rgba(0,0,0,0.44);\r\n        transition: .5s!important;\r\n    }\r\n\r\n    .nav-icons .search-input-container{\r\n        display: block!important;\r\n        position: relative;\r\n    }\r\n\r\n    .nav-search-input{\r\n        display: none;\r\n    }\r\n    .nav-search-input-white{\r\n        display: none;\r\n    }\r\n    .nav-search-icon{\r\n        position: static;\r\n    }\r\n\r\n    .nav-link{\r\n        color: var(--primary-text-color)!important;\r\n        /* color: white; */\r\n        text-decoration: none;\r\n        transition: .1s;\r\n    }\r\n\r\n    .nav-sales{\r\n        color: var(--theme-color)!important;\r\n    }\r\n\r\n    .nav-icons{\r\n        justify-content: end!important;\r\n        flex: 0 0 66.66666%!important;\r\n        max-width: 66.66666%!important;\r\n        padding: 0;\r\n    }\r\n\r\n\r\n  }\r\n  @media screen and (min-width: 992px) {\r\n    .navbar-collapse{\r\n        order: 0;\r\n    }\r\n    .navbar-nav{\r\n        margin-top: 0!important;\r\n    }\r\n    .close-sidebar{\r\n        display: none;\r\n    }\r\n}\r\n",""]);const a=o},1953:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".our-outlet-section{\r\n    background-color: black;\r\n}\r\n\r\n.our-outlet-section h2,.our-outlet-section p,.our-outlet-section span,.our-outlet-section button{\r\n    color: white;\r\n}\r\n\r\n.our-outlet-section h2{\r\n    font-size: 48px;\r\n}\r\n.our-outlet-section button{\r\n    background: none;\r\n    border: 0 solid white;\r\n    border-bottom: 1px solid white;\r\n}\r\n\r\n@media screen and (max-width: 767px){\r\n    .our-outlet-info{\r\n        padding-top: 48px;\r\n    }\r\n}",""]);const a=o},5323:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".products-container{\r\n    /* margin: 40px 0px; */\r\n}\r\n\r\n.product-img{\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n    aspect-ratio: 1 / 1;\r\n}\r\n\r\n.product-item a{\r\n    text-decoration: none;\r\n}\r\n\r\n.sale-tag{\r\n    position: absolute;\r\n    width: 40px;\r\n    top: 0;\r\n    left: 30px;\r\n}\r\n.product-info{\r\n    margin: 0 auto;\r\n    padding: 10px;\r\n    text-transform: uppercase;\r\n}\r\n\r\n.product-price{\r\n    font-weight: lighter;\r\n}\r\n\r\n.product-price-sale{\r\n    /* font-weight: lighter; */\r\n    color: var(--theme-color);\r\n}\r\n\r\n.price-on-sale{\r\n    font-weight: lighter;\r\n    text-decoration: line-through;\r\n}\r\n\r\n.product-icon{\r\n    position: absolute;\r\n    width: 25px;\r\n    height: 25px;\r\n    /* z-index: 100; */\r\n    /* padding: 3px; */\r\n    /* background-color: white; */\r\n    /* border-radius: 50%;\r\n    -webkit-box-shadow: 0px 3px 12px 0px rgba(173,173,173,1);\r\n    -moz-box-shadow: 0px 3px 12px 0px rgba(173,173,173,1);\r\n    box-shadow: 0px 3px 12px 0px rgba(173,173,173,1); */\r\n    top: 12px;\r\n    cursor: pointer;\r\n    transition: .1s;\r\n}\r\n.product-icon:hover{\r\n    /* background-color: rgba(255, 255, 255, 0.5); */\r\n    scale: 1.1;\r\n}\r\n\r\n.add-to-cart-icon{\r\n    right: 30px;\r\n    /* top: 10px; */\r\n}\r\n\r\n.add-to-favs-icon{\r\n    right: 90px;\r\n    /* top: 10px; */\r\n}\r\n/* SWIPER */\r\n.swiper{\r\n    margin-top: 0;\r\n}\r\n.swiper-button-next, .swiper-button-prev{\r\n    color: var(--primary-color)!important;\r\n    border: 30px solid rgba(255, 255, 255);\r\n    /* border-radius: 50%; */\r\n    scale: .5;\r\n}\r\n\r\n.swiper-button-next:hover, .swiper-button-prev:hover{\r\n    color: var(--theme-color)!important;\r\n    border: 30px solid white;\r\n}\r\n.swiper-pagination-bullet-active{\r\n    background-color: var(--theme-color)!important;;\r\n}\r\n\r\n.swiper-wrapper{\r\n    scale: .8;\r\n}\r\n\r\n/* Filters */\r\n.show-option{\r\n    /* border: black solid 1px; */\r\n    /* padding: 5px 10px; */\r\n\r\n}\r\n.show-btn{\r\n    background-color: white;\r\n    padding: 5px 5px;\r\n    border: none;\r\n    border-radius: 0!important;\r\n    width: 35px;\r\n    height: 35px;\r\n}\r\n\r\n.show-btn img{\r\n    padding: 5px;\r\n    object-fit: cover;\r\n    width: 35px;\r\n}\r\n\r\n.active-show-btn{\r\n    background-color: var(--secondary-theme-color);\r\n    border: black solid 1px;\r\n}\r\n\r\n.filter-tools .search-input-container{\r\n    position: relative;\r\n    overflow: hidden;\r\n    outline: none;\r\n    padding: 5px;\r\n    height: 35px;\r\n    /* margin-left: 15px; */\r\n    max-width: 250px;\r\n    border: none;\r\n    background-color: #EBEDEE !important;\r\n}\r\n\r\n.filter-tools .search-input-container input{\r\n    outline: none;\r\n    border: none;\r\n    background-color: transparent !important;\r\n    width:100%\r\n}\r\n.filter-tools .search-input-container .search-icon{\r\n    position: absolute;\r\n    object-fit: contain;\r\n    width: 40px;\r\n    padding: 10px;\r\n    right: 3%;\r\n    cursor: pointer;\r\n}\r\n\r\n.sort-btn{\r\n    background-color: white;\r\n    padding: 5px 10px;\r\n    /* outline: none!important; */\r\n    border: black solid 1px;\r\n    border-radius: 0!important;\r\n    height: 35px;\r\n}\r\n\r\n@media screen and (max-width: 1200px) {\r\n    .filter-show{\r\n        justify-content: start!important;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 576px) {\r\n    .filter-option{\r\n        justify-content: center!important;\r\n        margin: auto;\r\n    }\r\n}\r\n\r\n\r\n/* .sort-btn:focus{\r\n    outline: none!important;\r\n} */\r\n.active-sort-btn{\r\n    background-color: var(--secondary-theme-color);\r\n    color: var(--theme-color);\r\n}\r\n\r\n.filter-option .dropdown-menu{\r\n    z-index: 10;\r\n}\r\n\r\n.second-hand-check{\r\n    /* margin-left: 15px; */\r\n}\r\n\r\n/* Second Hand section */\r\n\r\n.btn-sell{\r\n    border-radius: 0;\r\n    padding: 10px 15px;\r\n}\r\n\r\n.empty-msg{\r\n    height:500px\r\n}\r\n\r\n.sell-btn{\r\n    /* font-weight: bold; */\r\n    background-color: black;\r\n    color: white;\r\n    padding: 5px 10px;\r\n    border: black solid 1px;\r\n    border-radius: 0!important;\r\n    height: 35px;\r\n}\r\n\r\n.sell-btn:hover{\r\n    box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n    -webkit-box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n    -moz-box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n}\r\n\r\n.btn-submit{\r\n    background: black;\r\n    border: none;\r\n    color: white;\r\n    padding: .5rem 1rem;\r\n}\r\n\r\n.btn-submit:hover{\r\n    box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n    -webkit-box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n    -moz-box-shadow: 1px 1px 15px 0px rgba(0,0,0,0.25);\r\n}",""]);const a=o},2879:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".checkout-section{\r\n    background-color: var(--secondary-theme-color);\r\n    min-height: 100vh;\r\n}\r\n\r\n.cart-payment-item{\r\n    border-radius: 5px;\r\n    padding: 10px;\r\n    margin: 10px 0px;\r\n    font-size: 11px;\r\n}\r\n\r\n.FormGroup {\r\n\t/* margin: 0 15px 20px; */\r\n\tpadding: 0;\r\n\tborder-style: none;\r\n\tbackground-color: white;\r\n\twill-change: opacity, transform;\r\n\tbox-shadow: 0 6px 9px rgba(50, 50, 93, 0.06), 0 2px 5px rgba(0, 0, 0, 0.08);\r\n\tborder-radius: 4px;\r\n}\r\n\r\n.FormRow {\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n    color: white;\r\n\t-ms-flex-align: center;\r\n\talign-items: center;\r\n\tmargin-left: 15px;\r\n}\r\n\r\n.StripeElement--webkit-autofill {\r\n\tbackground: transparent !important;\r\n}\r\n\r\n.StripeElement {\r\n\twidth: 100%;\r\n\tpadding: 11px 15px 11px 0;\r\n}\r\n\r\n.payment-btn {\r\n\tdisplay: block;\r\n\tfont-size: 16px;\r\n\twidth: 100%;\r\n\theight: 40px;\r\n\tmargin: 40px 15px 0;\r\n\tbox-shadow: 0 6px 9px rgba(50, 50, 93, 0.06), 0 2px 5px rgba(0, 0, 0, 0.08);\r\n\tborder-radius: 4px;\r\n\tcolor: #fff;\r\n\tfont-weight: 600;\r\n\tcursor: pointer;\r\n\ttransition: all 100ms ease-in-out;\r\n\twill-change: transform, background-color, box-shadow;\r\n\tborder: none;\r\n    margin: 1rem 0rem;\r\n}\r\n\r\n.payment-btn:active {\r\n\tbox-shadow: 0 6px 9px rgba(50, 50, 93, 0.06), 0 2px 5px rgba(0, 0, 0, 0.08);\r\n}",""]);const a=o},1574:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,"body.active-popup{\r\n    overflow-y: hidden;\r\n}\r\n.popup , .popup .overlay{\r\n    width: 100vw;\r\n    height: 100vh;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    position: fixed;\r\n    z-index: 1000;\r\n}\r\n\r\n.popup .overlay{\r\n    background: rgba(49, 49, 49, 0.8);\r\n}\r\n\r\n.popup-content{\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    background-color: #f1f1f1;\r\n    padding: 2rem;\r\n    max-width: 600px;\r\n    min-width: 300px;\r\n    /* border-radius: 10px; */\r\n}\r\n\r\n.close-popup {\r\n    position: absolute;\r\n    top: 10px;\r\n    right: 10px;\r\n    padding: 5px 7px;\r\n    border: none;\r\n}\r\n\r\n.form-group input{\r\n    border-radius: 0;\r\n}\r\n.form-group input:focus{\r\n    /* outline: 0; */\r\n    box-shadow: none;\r\n    border: black solid 1px;\r\n}",""]);const a=o},2217:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".product-page-img{\r\n    width: 100%;\r\n    object-fit: cover;\r\n    aspect-ratio: 1 / 1;\r\n}\r\n\r\n.related{\r\n    border-top: 1px solid grey ;\r\n}\r\n\r\n.star{\r\n    width: 25px;\r\n    height: 25px;\r\n    object-fit: cover;\r\n}\r\n.reviews-section .reviews{\r\n    -webkit-box-shadow: inset 0px 50px 17px -54px rgba(0,0,0,0.3);\r\n    -moz-box-shadow: inset 0px 50px 17px -54px rgba(0,0,0,0.3);\r\n    box-shadow: inset 0px 50px 17px -54px rgba(0,0,0,0.3);\r\n    height: 200px;\r\n    overflow: scroll;\r\n    overflow-x: hidden;\r\n    /* padding-top: 1rem; */\r\n}\r\n.reviews-item .user img{\r\n    object-fit: cover;\r\n    aspect-ratio: 1 / 1;\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n}\r\n\r\n.reviews-item .feedback{\r\n    font-weight: lighter;\r\n    color: #3f3f3f;\r\n}\r\n\r\n.colors-option .color{\r\n    width: 30px;\r\n    height: 30px;\r\n    max-width: 30px;\r\n    max-height: 30px;\r\n    margin-right: 5px;\r\n    border-radius: 50%;\r\n}\r\n\r\n.colors .active{\r\n    box-shadow: 0 0 0 2px white, 0 0 0 4px black;\r\n}\r\n\r\n.colors-option .color.not-available{\r\n    opacity: .2;\r\n    scale: .8;\r\n}\r\n.add-to-bag-btn{\r\n    padding: .5rem 2rem;\r\n    background-color: black;\r\n    border: 1px solid black;\r\n    color: white;\r\n}\r\n.add-to-bag-btn .shopping-bag{\r\n    width: 25px;\r\n    height: 25px;\r\n}\r\n\r\n.add-to-favs-btn{\r\n    padding: .5rem 1rem;\r\n    background-color: white;\r\n    border: 1px solid black;\r\n}\r\n\r\n.add-to-favs-btn .fav-heart{\r\n    width: 25px;\r\n    height: 25px;\r\n}",""]);const a=o},3507:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".reach-section{\r\n    background-color: black;\r\n}\r\n\r\n.photo{\r\n    max-height: 550px;\r\n    object-fit: cover;\r\n}\r\n.reach-section p,.reach-section h2,.reach-section h4,.reach-section button{\r\n    color: white;\r\n    text-transform: uppercase;\r\n}\r\n\r\n.reach-section p{\r\n    max-width: 350px;\r\n}\r\n\r\n.reach-icon{\r\n    width: 40px;\r\n    margin: 1rem 0;\r\n}\r\n.reach-btn{\r\n    background-color: white;\r\n    border: none;\r\n    color: black;\r\n    padding: .5rem 1rem;\r\n    border-radius: 0;\r\n    font-size: 14px;\r\n}\r\n\r\n.reach-btn img{\r\n    max-width: 25px;\r\n    object-fit: cover;\r\n}\r\n\r\n@media screen and (max-width: 767px){\r\n    .reach-content{\r\n        padding-top: 48px;\r\n        order: 1;\r\n    }\r\n}",""]);const a=o},7505:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,'.signin{\r\n    background-color: var(--secondary-theme-color);\r\n    text-transform: uppercase;\r\n    font-size: 14px;\r\n    padding-top: 100px;\r\n}\r\n\r\n.signin::after{\r\n    content: "";\r\n    top: 0;\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.598);\r\n    z-index: -1;\r\n}\r\n\r\n.signin-form{\r\n    margin: auto;\r\n    height: 100vh;\r\n    max-width: 300px;\r\n    color: white!important;\r\n}\r\n.signin-btn{\r\n    width: 100%;\r\n    color: var(--secondary-theme-color);\r\n    background-color: green;\r\n    border-radius: 0;\r\n}\r\n.signin-btn:hover{\r\n    color: var(--secondary-theme-color);\r\n    background-color: rgb(1, 109, 1);\r\n}\r\n\r\n.signup-link{\r\n    color: var(--theme-color);\r\n    text-decoration: underline;\r\n}\r\n.signup-link:hover{\r\n    color: #c41e23;\r\n}\r\n\r\n.submitted{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%,-50%);\r\n    width: 80vh;\r\n    height: 80vh;\r\n    padding: 50px;\r\n    transition: .3s ease-out;\r\n    z-index: 1000;\r\n}\r\n\r\n.not-submitted{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%,-50%);\r\n    opacity: 0;\r\n    width: 0vh;\r\n    height: 0vh;\r\n    padding: 0px;\r\n    transition: .3s ease-out;\r\n    z-index: 1000;\r\n\r\n}\r\n\r\n.check-img{\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: contain;\r\n}  \r\n\r\n.google-btn{\r\n    max-width: 300px;\r\n    height: 50px;\r\n    width: 100%;\r\n    background-color: var(--secondary-theme-color);\r\n    background-color: white;\r\n    border-radius: 0;\r\n    padding: 10px;\r\n    margin: 10px 0px;\r\n}\r\n.google-img{\r\n    padding: 5px;\r\n    height: 40px;\r\n    /* width: 100%; */\r\n    object-fit: contain;\r\n}',""]);const a=o},3090:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,'.signup{\r\n    background-color: var(--secondary-theme-color);\r\n    text-transform: uppercase;\r\n    font-size: 14px;\r\n    padding-top: 100px;\r\n}\r\n\r\n.signup::after{\r\n    content: "";\r\n    top: 0;\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.598);\r\n    z-index: -1;\r\n}\r\n\r\n.signup-form{\r\n    margin: auto;\r\n    height: 100vh;\r\n    max-width: 300px;\r\n    color: white!important;\r\n}\r\n.signup-btn{\r\n    width: 100%;\r\n    color: var(--secondary-theme-color);\r\n    background-color: green;\r\n    border-radius: 0;\r\n}\r\n.signup-btn:hover{\r\n    color: var(--secondary-theme-color);\r\n    background-color: rgb(1, 109, 1);\r\n}\r\n\r\n.signin-link{\r\n    color: var(--theme-color);\r\n    text-decoration: underline;\r\n}\r\n.signin-link:hover{\r\n    color: #c41e23;\r\n}\r\n\r\n.submitted{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%,-50%);\r\n    width: 80vh;\r\n    height: 80vh;\r\n    padding: 50px;\r\n    transition: .3s ease-out;\r\n    z-index: 1000;\r\n}\r\n\r\n.not-submitted{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%,-50%);\r\n    opacity: 0;\r\n    width: 0vh;\r\n    height: 0vh;\r\n    padding: 0px;\r\n    transition: .3s ease-out;\r\n    z-index: 1000;\r\n\r\n}\r\n\r\n.check-img{\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: contain;\r\n}  \r\n\r\n.google-btn{\r\n    max-width: 300px;\r\n    height: 50px;\r\n    width: 100%;\r\n    background-color: var(--secondary-theme-color);\r\n    background-color: white;\r\n    border-radius: 0;\r\n    padding: 10px;\r\n    margin: 10px 0px;\r\n}\r\n.google-img{\r\n    padding: 5px;\r\n    height: 40px;\r\n    /* width: 100%; */\r\n    object-fit: contain;\r\n}',""]);const a=o},3943:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8081),i=n.n(r),s=n(3645),o=n.n(s)()(i());o.push([e.id,".why-us-section{\r\n    /* background-color: #EFEFEF; */\r\n    padding: 48px 0px;\r\n}\r\n\r\n.why-us-card{\r\n    /* background-color: black; */\r\n    /* color: white; */\r\n    /* border: 1px black solid; */\r\n    padding: 2rem 2rem;\r\n}\r\n\r\n.why-us-card p{\r\n    font-weight: lighter;\r\n    color: rgb(49, 49, 49);\r\n}\r\n\r\n\r\n",""]);const a=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},1667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},4448:(e,t,n)=>{"use strict";var r=n(7294),i=n(3840);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return V(e.type,!1);case 11:return V(e.type.render,!1);case 1:return V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case k:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return q(e(t))}catch(e){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function se(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,xe=null;function ke(e){if(e=wi(e)){if("function"!=typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function Ie(e){Se?xe?xe.push(e):xe=[e]:Se=e}function Te(){if(Se){var e=Se,t=xe;if(xe=Se=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Se||null!==xe)&&(Ne(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Re=!1}function De(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,De.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ge(e){if(qe(e)!==e)throw Error(s(188))}function $e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null,ot=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!=(s&=o)&&(r=dt(s))}else 0!=(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!=(4194240&s)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0==(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var _t,Et,St,xt,kt,It=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Ot=new Map,Rt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=wi(t))&&Et(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void kt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){It=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Pt.forEach(Ut),Ot.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var Bt=b.ReactCurrentBatchConfig,Gt=!0;function $t(e,t,n,r){var i=wt,s=Bt.transition;Bt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,Bt.transition=s}}function Wt(e,t,n,r){var i=wt,s=Bt.transition;Bt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,Bt.transition=s}}function Ht(e,t,n,r){if(Gt){var i=Qt(e,t,n,r);if(null===i)Gr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Mt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Qt(e,t,n,r))&&Gr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=vi(e=_e(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=F({},cn,{view:0,detail:0}),hn=sn(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},dn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function kn(){return xn}var In=F({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(In),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Pn),Rn=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Mn=u&&"TextEvent"in window&&!Dn,Fn=u&&(!Ln||Dn&&8<Dn&&11>=Dn),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1,Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function $n(e,t,n,r){Ie(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Kn(e){jr(e,0)}function Qn(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Zn;if(u){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"==typeof er.oninput}Zn=Xn}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Hn)){var t=[];$n(t,Hn,e,_e(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Hn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(ar(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==K(r)||(r="selectionStart"in(r=gr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},xr={};function kr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Sr[e]=n[t];return e}u&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Ir=kr("animationend"),Tr=kr("animationiteration"),Cr=kr("animationstart"),Nr=kr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),l(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Lr=Pr[Rr];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Ir,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=$t;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Ir:case Tr:case Cr:l=yn;break;case Nr:l=An;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!=(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&null!=(m=Oe(p,h))&&u.push($r(p,m,f))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Hr(f))p++;for(f=0,m=h;m;m=Hr(m))f++;for(;0<p-f;)u=Hr(u),p--;for(;0<f-p;)h=Hr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Hr(u),h=Hr(h)}u=null}else u=null;null!==l&&Kr(o,a,l,u,!1),null!==c&&null!==d&&Kr(o,d,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Gn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?$n(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Ln)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else qn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==w?"onCompositionEnd"===w&&qn&&(v=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,qn=!0)),0<(y=Wr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),(v||null!==(v=zn(n)))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Ln&&Vn(e,t)?(e=en(),Xt=Zt=Jt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v)}jr(o,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift($r(e,s,i)),null!=(s=Oe(e,t))&&r.push($r(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Oe(n,s))&&o.unshift($r(n,l,a)):i||null!=(l=Oe(n,s))&&o.push($r(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Xr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,si="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function xi(e){return{current:e}}function ki(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function Ii(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ti={},Ci=xi(Ti),Ni=xi(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!=e.childContextTypes}function Ri(){ki(Ni),ki(Ci)}function Li(e,t,n){if(Ci.current!==Ti)throw Error(s(168));Ii(Ci,t),Ii(Ni,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ii(Ci,e),Ii(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Di(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,ki(Ni),ki(Ci),Ii(Ci,e)):ki(Ni),Ii(Ni,n)}var ji=null,Ui=!1,Vi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function qi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=wt;try{var n=ji;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(t){throw null!==ji&&(ji=ji.slice(e+1)),He(Xe,qi),t}finally{wt=t,Vi=!1}}return null}var Bi=[],Gi=0,$i=null,Wi=0,Hi=[],Ki=0,Qi=null,Yi=1,Ji="";function Zi(e,t){Bi[Gi++]=Wi,Bi[Gi++]=$i,$i=e,Wi=t}function Xi(e,t,n){Hi[Ki++]=Yi,Hi[Ki++]=Ji,Hi[Ki++]=Qi,Qi=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Zi(e,1),Xi(e,1,0))}function ts(e){for(;e===$i;)$i=Bi[--Gi],Bi[Gi]=null,Wi=Bi[--Gi],Bi[Gi]=null;for(;e===Qi;)Qi=Hi[--Ki],Hi[Ki]=null,Ji=Hi[--Ki],Hi[Ki]=null,Yi=Hi[--Ki],Hi[Ki]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=xi(null),vs=null,ws=null,bs=null;function _s(){bs=ws=vs=null}function Es(e){var t=ys.current;ki(ys),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xs(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ba=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Is=null;function Ts(e){null===Is?Is=[e]:Is.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ts(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ls(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Ts(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ds(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&(a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l)}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=F({},d,h);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=d}}function js(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var Us=(new r.Component).refs;function Vs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Rs(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Ls(e,s,i))&&(nc(t,e,i,r),Ds(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Rs(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Ls(e,s,i))&&(nc(t,e,i,r),Ds(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Rs(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Ls(e,i,r))&&(nc(t,e,r,n),Ds(t,e,r))}};function qs(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(i,s))}function Bs(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"==typeof s&&null!==s?s=ks(s):(i=Oi(t)?Ai:Ci.current,s=(r=null!=(r=t.contextTypes))?Pi(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Gs(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function $s(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Us,Ps(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=ks(s):(s=Oi(t)?Ai:Ci.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Ws(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Us&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ks(e){return(0,e._init)(e._payload)}function Qs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===O&&Ks(s)===t.type)?((r=i(t,n.props)).ref=Ws(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ws(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ws(e,null,t),n.return=e,n;case E:return(t=jc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);Hs(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),is&&Zi(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Zi(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Zi(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===d?u=w:d.sibling=w,d=w,m=y}if(v.done)return n(i,m),is&&Zi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return is&&Zi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Zi(i,g),u}return function e(r,s,o,l){if("object"==typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===O&&Ks(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ws(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((s=Dc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Ws(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case O:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(D(o))return g(r,s,o,l);Hs(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Ys=Qs(!0),Js=Qs(!1),Zs={},Xs=xi(Zs),eo=xi(Zs),to=xi(Zs);function no(e){if(e===Zs)throw Error(s(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Xs,Zs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Xs),Ii(Xs,t)}function io(){ki(Xs),ki(eo),ki(to)}function so(e){no(to.current);var t=no(Xs.current),n=le(t,e.type);t!==n&&(Ii(eo,e),Ii(Xs,n))}function oo(e){eo.current===e&&(ki(Xs),ki(eo))}var ao=xi(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,wo=!1,bo=0,_o=0;function Eo(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function ko(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"==typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((po&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,mo.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Oo(e,t){var n=mo,r=To(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Go(Do.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Lo.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!=(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Lo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Do(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(e){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&nc(t,e,1,-1)}function jo(e){var t=Io();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=Io();mo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Uo(t,n,s,r))}mo.flags|=e,i.memoizedState=Uo(1|t,n,s,r)}function Bo(e,t){return zo(8390656,8,e,t)}function Go(e,t){return qo(2048,8,e,t)}function $o(e,t){return qo(4,2,e,t)}function Wo(e,t){return qo(4,4,e,t)}function Ho(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!=n?n.concat([e]):null,qo(4,4,Ho.bind(null,t,e),n)}function Qo(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0==(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Xo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return To().memoizedState}function ta(e,t,n){var r=tc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e)?ia(t,n):null!==(n=Cs(e,t,n,r))&&(nc(n,e,r,ec()),sa(n,t,r))}function na(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ts(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Cs(e,t,i,r))&&(nc(n,e,r,i=ec()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:ks,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:ks,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:ks,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:jo,useDebugValue:Qo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Xo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=Io();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!=(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Do.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Lo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Nl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:ks,useCallback:Yo,useContext:ks,useEffect:Go,useImperativeHandle:Ko,useInsertionEffect:$o,useLayoutEffect:Wo,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Qo,useDeferredValue:function(e){return Zo(To(),go.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1},ca={readContext:ks,useCallback:Yo,useContext:ks,useEffect:Go,useImperativeHandle:Ko,useInsertionEffect:$o,useLayoutEffect:Wo,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Qo,useDeferredValue:function(e){var t=To();return null===go?t.memoizedState=e:Zo(t,go.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var fa="function"==typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,$l=r),ha(0,t)},n}function ma(e,t,n){(n=Rs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!=typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,Ls(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):Ys(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return xs(t,i),r=xo(e,t,n,r,s,i),n=ko(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,xa(e,t,s,r,i))}if(s=e.child,0==(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e}function xa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0==(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!=(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function ka(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Rl,Ol),Ol|=n;else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Rl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ii(Rl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ii(Rl,Ol),Ol|=r;return _a(e,t,i,n),t.child}function Ia(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Oi(n)?Ai:Ci.current;return s=Pi(t,s),xs(t,i),n=xo(e,t,n,r,s,i),r=ko(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ca(e,t,n,r,i){if(Oi(n)){var s=!0;Mi(t)}else s=!1;if(xs(t,i),null===t.stateNode)Ba(e,t),Bs(t,n,r),$s(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;c="object"==typeof c&&null!==c?ks(c):Pi(t,c=Oi(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Gs(t,o,r,c),As=!1;var h=t.memoizedState;o.state=h,Fs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ni.current||As?("function"==typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(a=As||qs(t,n,a,r,h,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Os(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,d=t.pendingProps,h=o.context,l="object"==typeof(l=n.contextType)&&null!==l?ks(l):Pi(t,l=Oi(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||h!==l)&&Gs(t,o,r,l),As=!1,h=t.memoizedState,o.state=h,Fs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Ni.current||As?("function"==typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(c=As||qs(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){Ia(e,t);var o=0!=(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ga(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),ro(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Oa,Ra,La,Da={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Dc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Da,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=da(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Dc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Da,o);if(0==(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=da(o=Error(s(419)),r,void 0))}if(l=0!=(a&e.childLanes),ba||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),nc(r,e,i,-1))}return mc(),Ua(e,t,a,r=da(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Ki++]=Yi,Hi[Ki++]=Ji,Hi[Ki++]=Qi,Yi=e.id,Ji=e.overflow,Qi=t),(t=ja(t,r.children)).flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0==(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Rc(r,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=Rc(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!=(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(ao,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ha(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Wa(t),null;case 3:return r=t.stateNode,io(),ki(Ni),ki(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Wa(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ra(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=no(Xs.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!=(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),X(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Xr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Oa(e,t),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"==typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":W(e),X(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)La(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Xs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Zr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wa(t),null;case 13:if(ki(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!=(1&t.mode)&&0==(128&t.flags))hs(),fs(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else fs(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ao.current)?0===Ll&&(Ll=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Wa(t),null;case 10:return Es(t.type._context),Wa(t),null;case 19:if(ki(ao),null===(o=t.memoizedState))return Wa(t),null;if(r=0!=(128&t.flags),null===(l=o.rendering))if(r)$a(o,!1);else{if(0!==Ll||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,$a(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,$a(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$a(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Wa(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,$a(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,Ii(ao,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Ol)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ka(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),ki(Ni),ki(Ci),uo(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(ki(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Xs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Xr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ya=!1,Ja="function"==typeof WeakSet?WeakSet:Set,Za=null;function Xa(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){xc(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){xc(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"==typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Ya||Xa(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),qt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!=(2&s)||0!=(4&s))&&el(n,t,o),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ya&&(Xa(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){xc(n,t,e)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,hl(e,t,n),Ya=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){xc(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){xc(e,e.return,t)}try{nl(5,e,e.return)}catch(t){xc(e,e.return,t)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Xa(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Xa(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(t){xc(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):w(i,d,h,u)}switch(l){case"input":Z(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(t){xc(e,e.return,t)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t){xc(e,e.return,t)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(t){xc(e,e.return,t)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||d,ml(t,e),Ya=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!=(1&e.mode))for(Za=e,d=e.child;null!==d;){for(h=Za=d;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Xa(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){xc(r,n,e)}}break;case 5:Xa(f,f.return);break;case 22:if(null!==f.memoizedState){_l(h);continue}}null!==p?(p.return=f,Za=p):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(t){xc(e,e.return,t)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(t){xc(e,e.return,t)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(t){xc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Za=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!=(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Qa;var c=Ya;if(Qa=o,(Ya=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Za=l):El(i);for(;null!==s;)Za=s,wl(s,t,n),s=s.sibling;Za=i,Qa=a,Ya=c}bl(e)}else 0!=(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):bl(e)}}function bl(e){for(;null!==Za;){var t=Za;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&js(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}js(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&il(t)}catch(e){xc(t,t.return,e)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function _l(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){xc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){xc(t,i,e)}}var s=t.return;try{il(t)}catch(e){xc(t,s,e)}break;case 5:var o=t.return;try{il(t)}catch(e){xc(t,o,e)}}}catch(e){xc(t,t.return,e)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sl,xl=Math.ceil,kl=b.ReactCurrentDispatcher,Il=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,Cl=0,Nl=null,Al=null,Pl=0,Ol=0,Rl=xi(0),Ll=0,Dl=null,Ml=0,Fl=0,jl=0,Ul=null,Vl=null,zl=0,ql=1/0,Bl=null,Gl=!1,$l=null,Wl=null,Hl=!1,Kl=null,Ql=0,Yl=0,Jl=null,Zl=-1,Xl=0;function ec(){return 0!=(6&Cl)?Je():-1!==Zl?Zl:Zl=Je()}function tc(e){return 0==(1&e.mode)?1:0!=(2&Cl)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===Xl&&(Xl=mt()),Xl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(s(185));yt(e,n,r),0!=(2&Cl)&&e===Nl||(e===Nl&&(0==(2&Cl)&&(Fl|=n),4===Ll&&ac(e,Pl)),rc(e,r),1===n&&0===Cl&&0==(1&t.mode)&&(ql=Je()+500,Ui&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!=(a&n)&&0==(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Nl?Pl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),oi((function(){0==(6&Cl)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,Xl=0,0!=(6&Cl))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Nl?Pl:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var o=pc();for(Nl===e&&Pl===t||(Bl=null,ql=Je()+500,hc(e,t));;)try{vc();break}catch(t){fc(e,t)}_s(),kl.current=o,Cl=i,null!==Al?t=0:(Nl=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=sc(e,i)),1===t)throw n=Dl,hc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&0!==(o=pt(e))&&(r=o,t=sc(e,o)),1===t))throw n=Dl,hc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Vl,Bl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Vl,Bl),t);break}_c(e,Vl,Bl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Vl,Bl),r);break}_c(e,Vl,Bl);break;default:throw Error(s(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~jl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!=(6&Cl))throw Error(s(327));Ec();var t=ht(e,0);if(0==(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Dl,hc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Vl,Bl),rc(e,Je()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(ql=Je()+500,Ui&&qi())}}function uc(e){null!==Kl&&0===Kl.tag&&0==(6&Cl)&&Ec();var t=Cl;Cl|=1;var n=Tl.transition,r=wt;try{if(Tl.transition=null,wt=1,e)return e()}finally{wt=r,Tl.transition=n,0==(6&(Cl=t))&&qi()}}function dc(){Ol=Rl.current,ki(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ri();break;case 3:io(),ki(Ni),ki(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:ki(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Al=e=Rc(e.current,null),Pl=Ol=t,Ll=0,Dl=null,jl=Fl=Ml=0,Vl=Ul=null,null!==Is){for(t=0;t<Is.length;t++)if(null!==(r=(n=Is[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Is=null}return e}function fc(e,t){for(;;){var n=Al;try{if(_s(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,wo=!1,bo=0,Il.current=null,null===n||null===n.return){Ll=1,Dl=t,Al=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(0==(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0==(1&t)){ga(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0==(128&o.flags)&&("function"==typeof v.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Wl||!Wl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(e){t=e,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=kl.current;return kl.current=oa,null===e?oa:e}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Nl||0==(268435455&Ml)&&0==(268435455&Fl)||ac(Nl,Pl)}function gc(e,t){var n=Cl;Cl|=2;var r=pc();for(Nl===e&&Pl===t||(Bl=null,hc(e,t));;)try{yc();break}catch(t){fc(e,t)}if(_s(),Cl=n,kl.current=r,null!==Al)throw Error(s(261));return Nl=null,Pl=0,Ll}function yc(){for(;null!==Al;)wc(Al)}function vc(){for(;null!==Al&&!Qe();)wc(Al)}function wc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,Il.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Ha(n,t,Ol)))return void(Al=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ll=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ll&&(Ll=5)}function _c(e,t,n){var r=wt,i=Tl.transition;try{Tl.transition=null,wt=1,function(e,t,n,r){do{Ec()}while(null!==Kl);if(0!=(6&Cl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Al=Nl=null,Pl=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Hl||(Hl=!0,Nc(tt,(function(){return Ec(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var a=wt;wt=1;var l=Cl;Cl|=4,Il.current=null,function(e,t){if(ei=Gt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(e){xc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),Cl=l,wt=a,Tl.transition=o}else e.current=n;if(Hl&&(Hl=!1,Kl=e,Ql=i),0===(o=e.pendingLanes)&&(Wl=null),function(e){if(st&&"function"==typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=$l,$l=null,e;0!=(1&Ql)&&0!==e.tag&&Ec(),0!=(1&(o=e.pendingLanes))?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,qi()}(e,t,n,r)}finally{Tl.transition=i,wt=r}return null}function Ec(){if(null!==Kl){var e=bt(Ql),t=Tl.transition,n=wt;try{if(Tl.transition=null,wt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Ql=0,0!=(6&Cl))throw Error(s(331));var i=Cl;for(Cl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!=(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var d=Za;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Za=h;else for(;null!==Za;){var f=(d=Za).sibling,p=d.return;if(sl(d),d===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!=(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!=(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!=(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){xc(l,l.return,e)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Cl=i,qi(),st&&"function"==typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{wt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=Ls(e,t=pa(0,t=ua(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function xc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Ls(t,e=ma(t,e=ua(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>Je()-zl?hc(e,0):jl|=n),rc(e,t)}function Ic(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ns(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Oc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case S:return Dc(n.children,i,o,t);case x:a=8,i|=8;break;case k:return(e=Pc(12,n,t,2|i)).elementType=k,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case T:a=9;break e;case C:a=11;break e;case P:a=14;break e;case O:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Dc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function zc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Di(e,n,t)}return t}function Bc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=qc(null),n=e.current,(s=Rs(r=ec(),i=tc(n))).callback=null!=t?t:null,Ls(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Gc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ls(i,t,o))&&(nc(e,i,o,s),Ds(e,i,o)),o}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(ao,1&ao.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Fa(e,t,n):(Ii(ao,1&ao.current),null!==(e=Ga(e,t,n))?e.sibling:null);Ii(ao,1&ao.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return Ga(e,t,n)}(e,t,n);ba=0!=(131072&e.flags)}else ba=!1,is&&0!=(1048576&t.flags)&&Xi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ba(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);xs(t,n),i=xo(null,t,r,e,i,n);var o=ko();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,$s(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ba(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Oc(e)?1:0;if(null!=e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Os(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ga(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ia(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ii(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ga(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Rs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ss(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xs(t,n),r=r(i=ks(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Sa(e,t,r,i=gs(r.type,i),n);case 15:return xa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ba(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,xs(t,n),Bs(t,r,i),$s(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return ka(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"==typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=$c(o);a.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=$c(o);s.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=$c(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,qr(8===e.nodeType?e.parentNode:e),uc((function(){Gc(t,l,n,r)})),l}(n,t,e,i,r);return $c(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Gc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0==(6&Cl)&&(ql=Je()+500,qi()))}break;case 13:uc((function(){var t=Ns(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},Et=function(e){if(13===e.tag){var t=Ns(e,134217728);null!==t&&nc(t,e,134217728,ec()),Hc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ns(e,t);null!==n&&nc(n,e,t,ec()),Hc(e,t)}},xt=function(){return wt},kt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));H(r),Z(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=uc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,Ie,Te,cc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return zc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Kc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},745:(e,t,n)=>{"use strict";var r=n(3935);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},3935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},2408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!x.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},7294:(e,t,n)=>{"use strict";e.exports=n(2408)},53:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,w="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,R(E);else{var t=r(u);null!==t&&L(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(I),I=-1),p=!0;var s=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"==typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?h.callback=a:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&L(_,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,k=null,I=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==k){var e=t.unstable_now();C=e;var n=!0;try{n=k(!0,e)}finally{n?S():(x=!1,k=null)}}else x=!1}if("function"==typeof w)S=function(){w(A)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=A,S=function(){O.postMessage(null)}}else S=function(){y(A,0)};function R(e){k=e,x||(x=!0,S())}function L(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(I),I=-1):g=!0,L(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,R(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},3840:(e,t,n)=>{"use strict";e.exports=n(53)},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],u=s[c]||0,d="".concat(c," ").concat(u);s[c]=u+1;var h=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(f);else{var p=i(f,r);r.byIndex=a,t.splice(a,0,{identifier:d,updater:p,references:1})}o.push(d)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var l=r(e,i),c=0;c<s.length;c++){var u=n(s[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},9954:e=>{"use strict";e.exports="data:application/font-woff;charset=utf-8;base64, d09GRgABAAAAAAZgABAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAGRAAAABoAAAAci6qHkUdERUYAAAWgAAAAIwAAACQAYABXR1BPUwAABhQAAAAuAAAANuAY7+xHU1VCAAAFxAAAAFAAAABm2fPczU9TLzIAAAHcAAAASgAAAGBP9V5RY21hcAAAAkQAAACIAAABYt6F0cBjdnQgAAACzAAAAAQAAAAEABEBRGdhc3AAAAWYAAAACAAAAAj//wADZ2x5ZgAAAywAAADMAAAD2MHtryVoZWFkAAABbAAAADAAAAA2E2+eoWhoZWEAAAGcAAAAHwAAACQC9gDzaG10eAAAAigAAAAZAAAArgJkABFsb2NhAAAC0AAAAFoAAABaFQAUGG1heHAAAAG8AAAAHwAAACAAcABAbmFtZQAAA/gAAAE5AAACXvFdBwlwb3N0AAAFNAAAAGIAAACE5s74hXjaY2BkYGAAYpf5Hu/j+W2+MnAzMYDAzaX6QjD6/4//Bxj5GA8AuRwMYGkAPywL13jaY2BkYGA88P8Agx4j+/8fQDYfA1AEBWgDAIB2BOoAeNpjYGRgYNBh4GdgYgABEMnIABJzYNADCQAACWgAsQB42mNgYfzCOIGBlYGB0YcxjYGBwR1Kf2WQZGhhYGBiYGVmgAFGBiQQkOaawtDAoMBQxXjg/wEGPcYDDA4wNUA2CCgwsAAAO4EL6gAAeNpj2M0gyAACqxgGNWBkZ2D4/wMA+xkDdgAAAHjaY2BgYGaAYBkGRgYQiAHyGMF8FgYHIM3DwMHABGQrMOgyWDLEM1T9/w8UBfEMgLzE////P/5//f/V/xv+r4eaAAeMbAxwIUYmIMHEgKYAYjUcsDAwsLKxc3BycfPw8jEQA/gZBASFhEVExcQlJKWkZWTl5BUUlZRVVNXUNTQZBgMAAMR+E+gAEQFEAAAAKgAqACoANAA+AEgAUgBcAGYAcAB6AIQAjgCYAKIArAC2AMAAygDUAN4A6ADyAPwBBgEQARoBJAEuATgBQgFMAVYBYAFqAXQBfgGIAZIBnAGmAbIBzgHsAAB42u2NMQ6CUAyGW568x9AneYYgm4MJbhKFaExIOAVX8ApewSt4Bic4AfeAid3VOBixDxfPYEza5O+Xfi04YADggiUIULCuEJK8VhO4bSvpdnktHI5QCYtdi2sl8ZnXaHlqUrNKzdKcT8cjlq+rwZSvIVczNiezsfnP/uznmfPFBNODM2K7MTQ45YEAZqGP81AmGGcF3iPqOop0r1SPTaTbVkfUe4HXj97wYE+yNwWYxwWu4v1ugWHgo3S1XdZEVqWM7ET0cfnLGxWfkgR42o2PvWrDMBSFj/IHLaF0zKjRgdiVMwScNRAoWUoH78Y2icB/yIY09An6AH2Bdu/UB+yxopYshQiEvnvu0dURgDt8QeC8PDw7Fpji3fEA4z/PEJ6YOB5hKh4dj3EvXhxPqH/SKUY3rJ7srZ4FZnh1PMAtPhwP6fl2PMJMPDgeQ4rY8YT6Gzao0eAEA409DuggmTnFnOcSCiEiLMgxCiTI6Cq5DZUd3Qmp10vO0LaLTd2cjN4fOumlc7lUYbSQcZFkutRG7g6JKZKy0RmdLY680CDnEJ+UMkpFFe1RN7nxdVpXrC4aTtnaurOnYercZg2YVmLN/d/gczfEimrE/fs/bOuq29Zmn8tloORaXgZgGa78yO9/cnXm2BpaGvq25Dv9S4E9+5SIc9PqupJKhYFSSl47+Qcr1mYNAAAAeNptw0cKwkAAAMDZJA8Q7OUJvkLsPfZ6zFVERPy8qHh2YER+3i/BP83vIBLLySsoKimrqKqpa2hp6+jq6RsYGhmbmJqZSy0sraxtbO3sHRydnEMU4uR6yx7JJXveP7WrDycAAAAAAAH//wACeNpjYGRgYOABYhkgZgJCZgZNBkYGLQZtIJsFLMYAAAw3ALgAeNolizEKgDAQBCchRbC2sFER0YD6qVQiBCv/H9ezGI6Z5XBAw8CBK/m5iQQVauVbXLnOrMZv2oLdKFa8Pjuru2hJzGabmOSLzNMzvutpB3N42mNgZGBg4GKQYzBhYMxJLMlj4GBgAYow/P/PAJJhLM6sSoWKfWCAAwDAjgbRAAB42mNgYGBkAIIbCZo5IPrmUn0hGA0AO8EFTQAA"}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={id:e,exports:{}};return n[e].call(s.exports,s,s.exports,i),s.exports}i.m=n,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var s=Object.create(null);i.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,i.d(s,o),s},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/drippy-e-commerce/",i.b=document.baseURI||self.location.href,i.nc=void 0,(()=>{"use strict";var e={};i.r(e),i.d(e,{FirebaseError:()=>Ke,SDK_VERSION:()=>ln,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>en,_apps:()=>Jt,_clearComponents:()=>sn,_components:()=>Zt,_getProvider:()=>nn,_registerComponent:()=>tn,_removeServiceInstance:()=>rn,deleteApp:()=>hn,getApp:()=>un,getApps:()=>dn,initializeApp:()=>cn,onLog:()=>pn,registerVersion:()=>fn,setLogLevel:()=>mn});var t,n=i(7294),r=i.t(n,2),s=i(745);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const a="popstate";function l(e,t){if(!1===e||null==e)throw new Error(t)}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?h(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var f;function p(e,t,n){void 0===n&&(n="/");let r=S(("string"==typeof t?h(t):t).pathname||"/",n);if(null==r)return null;let i=m(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let e=0;null==s&&e<i.length;++e)s=b(i[e],E(r));return s}function m(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(l(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=C([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),m(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:w(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let n of g(e.path))i(e,t,n);else i(e,t)})),t}function g(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=g(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));const y=/^:\w+$/,v=e=>"*"===e;function w(e,t){let n=e.split("/"),r=n.length;return n.some(v)&&(r+=-2),t&&(r+=2),n.filter((e=>!v(e))).reduce(((e,t)=>e+(y.test(t)?3:""===t?1:10)),r)}function b(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let e=0;e<n.length;++e){let o=n[e],a=e===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=_({path:o.relativePath,caseSensitive:o.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=o.route;s.push({params:r,pathname:C([i,c.pathname]),pathnameBase:N(C([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=C([i,c.pathnameBase]))}return s}function _(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((e,t)=>(r.push(t),"/([^\\/]+)")));return e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{if("*"===t){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return x(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(a[n]||"",t),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function E(e){try{return decodeURI(e)}catch(t){return x(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function S(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function x(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function k(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function I(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function T(e,t,n,r){let i;void 0===r&&(r=!1),"string"==typeof e?i=h(e):(i=o({},e),l(!i.pathname||!i.pathname.includes("?"),k("?","pathname","search",i)),l(!i.pathname||!i.pathname.includes("#"),k("#","pathname","hash",i)),l(!i.search||!i.search.includes("#"),k("#","search","hash",i)));let s,a=""===e||""===i.pathname,c=a?"/":i.pathname;if(r||null==c)s=n;else{let e=t.length-1;if(c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?h(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:A(r),hash:P(i)}}(i,s),d=c&&"/"!==c&&c.endsWith("/"),f=(a||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!f||(u.pathname+="/"),u}const C=e=>e.join("/").replace(/\/\/+/g,"/"),N=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),A=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",P=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class O extends Error{}const R=["post","put","patch","delete"],L=(new Set(R),["get",...R]);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(this,arguments)}new Set(L),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement,Symbol("deferred");"function"==typeof Object.is&&Object.is;const{useState:M,useEffect:F,useLayoutEffect:j,useDebugValue:U}=r;"undefined"==typeof window||void 0===window.document||window.document.createElement,r.useSyncExternalStore;const V=n.createContext(null),z=n.createContext(null),q=n.createContext(null),B=n.createContext(null),G=n.createContext({outlet:null,matches:[]}),$=n.createContext(null);function W(){return null!=n.useContext(B)}function H(){return W()||l(!1),n.useContext(B).location}function K(){W()||l(!1);let{basename:e,navigator:t}=n.useContext(q),{matches:r}=n.useContext(G),{pathname:i}=H(),s=JSON.stringify(I(r).map((e=>e.pathnameBase))),o=n.useRef(!1);n.useEffect((()=>{o.current=!0}));let a=n.useCallback((function(n,r){if(void 0===r&&(r={}),!o.current)return;if("number"==typeof n)return void t.go(n);let a=T(n,JSON.parse(s),i,"path"===r.relative);"/"!==e&&(a.pathname="/"===a.pathname?e:C([e,a.pathname])),(r.replace?t.replace:t.push)(a,r.state,r)}),[e,t,s,i]);return a}function Q(e,t){let{relative:r}=void 0===t?{}:t,{matches:i}=n.useContext(G),{pathname:s}=H(),o=JSON.stringify(I(i).map((e=>e.pathnameBase)));return n.useMemo((()=>T(e,JSON.parse(o),s,"path"===r)),[e,o,s,r])}function Y(){let e=function(){var e;let t=n.useContext($),r=function(e){let t=n.useContext(z);return t||l(!1),t}(ee.UseRouteError),i=function(e){let t=function(e){let t=n.useContext(G);return t||l(!1),t}(),r=t.matches[t.matches.length-1];return r.route.id||l(!1),r.route.id}(ee.UseRouteError);return t||(null==(e=r.errors)?void 0:e[i])}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:i},r):null,null)}class J extends n.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?n.createElement(G.Provider,{value:this.props.routeContext},n.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z(e){let{routeContext:t,match:r,children:i}=e,s=n.useContext(V);return s&&s.static&&s.staticContext&&r.route.errorElement&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(G.Provider,{value:t},i)}var X,ee,te;function ne(e){l(!1)}function re(e){let{basename:r="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:c=!1}=e;W()&&l(!1);let u=r.replace(/^\/*/,"/"),d=n.useMemo((()=>({basename:u,navigator:a,static:c})),[u,a,c]);"string"==typeof s&&(s=h(s));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:y="default"}=s,v=n.useMemo((()=>{let e=S(f,u);return null==e?null:{pathname:e,search:p,hash:m,state:g,key:y}}),[u,f,p,m,g,y]);return null==v?null:n.createElement(q.Provider,{value:d},n.createElement(B.Provider,{children:i,value:{location:v,navigationType:o}}))}function ie(e){let{children:r,location:i}=e,s=n.useContext(V);return function(e,r){W()||l(!1);let{navigator:i}=n.useContext(q),s=n.useContext(z),{matches:o}=n.useContext(G),a=o[o.length-1],c=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let d,f=H();if(r){var m;let e="string"==typeof r?h(r):r;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||l(!1),d=e}else d=f;let g=d.pathname||"/",y=p(e,{pathname:"/"===u?g:g.slice(u.length)||"/"}),v=function(e,t,r){if(void 0===t&&(t=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}let i=e,s=null==r?void 0:r.errors;if(null!=s){let e=i.findIndex((e=>e.route.id&&(null==s?void 0:s[e.route.id])));e>=0||l(!1),i=i.slice(0,Math.min(i.length,e+1))}return i.reduceRight(((e,o,a)=>{let l=o.route.id?null==s?void 0:s[o.route.id]:null,c=r?o.route.errorElement||n.createElement(Y,null):null,u=t.concat(i.slice(0,a+1)),d=()=>n.createElement(Z,{match:o,routeContext:{outlet:e,matches:u}},l?c:void 0!==o.route.element?o.route.element:e);return r&&(o.route.errorElement||0===a)?n.createElement(J,{location:r.location,component:c,error:l,children:d(),routeContext:{outlet:null,matches:u}}):d()}),null)}(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:C([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:C([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,s||void 0);return r&&v?n.createElement(B.Provider,{value:{location:D({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},v):v}(s&&!r?s.router.routes:oe(r),i)}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(X||(X={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(ee||(ee={})),function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(te||(te={})),new Promise((()=>{}));class se extends n.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){console.error("<Await> caught the following error during render",e,t)}render(){let{children:e,errorElement:t,resolve:n}=this.props,r=null,i=te.pending;if(n instanceof Promise)if(this.state.error){te.error;let e=this.state.error;Promise.reject().catch((()=>{})),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>e})}else n._tracked?void 0!==r._error?te.error:void 0!==r._data?te.success:te.pending:(te.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),n.then((e=>Object.defineProperty(n,"_data",{get:()=>e})),(e=>Object.defineProperty(n,"_error",{get:()=>e}))));else te.success,Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>n});if(i===te.error&&r._error instanceof AbortedDeferredError)throw neverSettledPromise;if(i===te.error&&!t)throw r._error;if(i===te.error)return React.createElement(AwaitContext.Provider,{value:r,children:t});if(i===te.success)return React.createElement(AwaitContext.Provider,{value:r,children:e});throw r}}function oe(e,t){void 0===t&&(t=[]);let r=[];return n.Children.forEach(e,((e,i)=>{if(!n.isValidElement(e))return;if(e.type===n.Fragment)return void r.push.apply(r,oe(e.props.children,t));e.type!==ne&&l(!1),e.props.index&&e.props.children&&l(!1);let s=[...t,i],o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=oe(e.props.children,s)),r.push(o)})),r}function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}const le=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function ce(e){let{basename:r,children:i,window:s}=e,h=n.useRef();null==h.current&&(h.current=function(e){return void 0===e&&(e={}),function(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:h=!1}=i,f=s.history,p=t.Pop,m=null,g=y();function y(){return(f.state||{idx:null}).idx}function v(){p=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"==typeof e?e:d(e);return l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(o({},f.state,{idx:g}),""));let b={get action(){return p},get location(){return e(s,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(a,v),m=e,()=>{s.removeEventListener(a,v),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){p=t.Push;let i=u(b.location,e,n);r&&r(i,e),g=y()+1;let o=c(i,g),a=b.createHref(i);try{f.pushState(o,"",a)}catch(e){s.location.assign(a)}h&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,n){p=t.Replace;let i=u(b.location,e,n);r&&r(i,e),g=y();let s=c(i,g),o=b.createHref(i);f.replaceState(s,"",o),h&&m&&m({action:p,location:b.location,delta:0})},go:e=>f.go(e)};return b}((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:d(t)}),null,e)}({window:s,v5Compat:!0}));let f=h.current,[p,m]=n.useState({action:f.action,location:f.location});return n.useLayoutEffect((()=>f.listen(m)),[f]),n.createElement(re,{basename:r,children:i,location:p.location,navigationType:p.action,navigator:f})}const ue="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,de=n.forwardRef((function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:u,preventScrollReset:h}=e,f=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,le),p="string"==typeof u?u:d(u),m=/^[a-z+]+:\/\//i.test(p)||p.startsWith("//"),g=p,y=!1;if(ue&&m){let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p);t.origin===e.origin?g=t.pathname+t.search+t.hash:y=!0}let v=function(e,t){let{relative:r}=void 0===t?{}:t;W()||l(!1);let{basename:i,navigator:s}=n.useContext(q),{hash:o,pathname:a,search:c}=Q(e,{relative:r}),u=a;return"/"!==i&&(u="/"===a?i:C([i,a])),s.createHref({pathname:u,search:c,hash:o})}(g,{relative:i}),w=function(e,t){let{target:r,replace:i,state:s,preventScrollReset:o,relative:a}=void 0===t?{}:t,l=K(),c=H(),u=Q(e,{relative:a});return n.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let n=void 0!==i?i:d(c)===d(u);l(e,{replace:n,state:s,preventScrollReset:o,relative:a})}}),[c,l,u,i,s,r,e,o,a])}(g,{replace:o,state:a,target:c,preventScrollReset:h,relative:i});return n.createElement("a",ae({},f,{href:m?p:v,onClick:y||s?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:c}))}));var he,fe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(he||(he={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(fe||(fe={}));var pe=i(3379),me=i.n(pe),ge=i(7795),ye=i.n(ge),ve=i(569),we=i.n(ve),be=i(3565),_e=i.n(be),Ee=i(9216),Se=i.n(Ee),xe=i(4589),ke=i.n(xe),Ie=i(6145),Te={};Te.styleTagTransform=ke(),Te.setAttributes=_e(),Te.insert=we().bind(null,"head"),Te.domAPI=ye(),Te.insertStyleElement=Se(),me()(Ie.Z,Te),Ie.Z&&Ie.Z.locals&&Ie.Z.locals;var Ce=i(1286),Ne={};Ne.styleTagTransform=ke(),Ne.setAttributes=_e(),Ne.insert=we().bind(null,"head"),Ne.domAPI=ye(),Ne.insertStyleElement=Se(),me()(Ce.Z,Ne),Ce.Z&&Ce.Z.locals&&Ce.Z.locals;const Ae=function(e,t){if(!e)throw Pe(t)},Pe=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},Oe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=i>>2,u=(3&i)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Oe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw Error();const l=i<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Le=function(e){const t=Oe(e);return Re.encodeByteArray(t,!0)},De=function(e){return Le(e).replace(/\./g,"")},Me=function(e){try{return Re.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Fe(e[n],t[n]));return e}const je=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i.g)return i.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process)return;const e="MISSING_ENV_VAR".__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&Me(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ve(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(s)),""].join(".")}function ze(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Be(){var e;const t=null===(e=je())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(i.g.process)}catch(e){return!1}}function Ge(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function We(){const e=ze();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function He(){try{return"object"==typeof indexedDB}catch(e){return!1}}class Ke extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Ye,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new Ke(r,o,n)}}const Ye=/\{\$([^}]+)}/g;function Je(e){return JSON.parse(e)}function Ze(e){return JSON.stringify(e)}const Xe=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=Je(Me(s[0])||""),n=Je(Me(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}};function et(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function tt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function nt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function rt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function it(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(st(n)&&st(s)){if(!it(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function st(e){return null!==e&&"object"==typeof e}function ot(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function at(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function lt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ct{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):e<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const t=(s<<5|s>>>27)+r+c+i+n[e]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}}function ut(e,t){const n=new dt(e,t);return n.subscribe.bind(n)}class dt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ht),void 0===r.error&&(r.error=ht),void 0===r.complete&&(r.complete=ht);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ht(){}const ft=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function pt(e,t){return`${e} failed: ${t} argument `}function mt(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(pt(e,t)+"must be a valid function.")}function gt(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(pt(e,t)+"must be a valid context object.")}const yt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function vt(e){return e&&e._delegate?e._delegate:e}class wt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const bt="[DEFAULT]";class _t{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ue;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:bt})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===bt?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:bt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Et{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _t(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const St=[];var xt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(xt||(xt={}));const kt={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},It=xt.INFO,Tt={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},Ct=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=Tt[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Nt{constructor(e){this.name=e,this._logLevel=It,this._logHandler=Ct,this._userLogHandler=null,St.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?kt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...e),this._logHandler(this,xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...e),this._logHandler(this,xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...e),this._logHandler(this,xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...e),this._logHandler(this,xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...e),this._logHandler(this,xt.ERROR,...e)}}let At,Pt;const Ot=new WeakMap,Rt=new WeakMap,Lt=new WeakMap,Dt=new WeakMap,Mt=new WeakMap;let Ft={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Rt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Lt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ut(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function jt(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Pt||(Pt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Vt(this),e),Ut(Ot.get(this))}:function(...e){return Ut(t.apply(Vt(this),e))}:function(e,...n){const r=t.call(Vt(this),e,...n);return Lt.set(r,e.sort?e.sort():[e]),Ut(r)}:(e instanceof IDBTransaction&&function(e){if(Rt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Rt.set(e,t)}(e),n=e,(At||(At=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,Ft):e);var t,n}function Ut(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ut(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Ot.set(t,e)})).catch((()=>{})),Mt.set(t,e),t}(e);if(Dt.has(e))return Dt.get(e);const t=jt(e);return t!==e&&(Dt.set(e,t),Mt.set(t,e)),t}const Vt=e=>Mt.get(e),zt=["get","getKey","getAll","getAllKeys","count"],qt=["put","add","delete","clear"],Bt=new Map;function Gt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Bt.get(t))return Bt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=qt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!zt.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return Bt.set(t,s),s}Ft=(e=>({...e,get:(t,n,r)=>Gt(t,n)||e.get(t,n,r),has:(t,n)=>!!Gt(t,n)||e.has(t,n)}))(Ft);class $t{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Wt="@firebase/app",Ht="0.9.1",Kt=new Nt("@firebase/app"),Qt="[DEFAULT]",Yt={[Wt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Jt=new Map,Zt=new Map;function Xt(e,t){try{e.container.addComponent(t)}catch(n){Kt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function en(e,t){e.container.addOrOverwriteComponent(t)}function tn(e){const t=e.name;if(Zt.has(t))return Kt.debug(`There were multiple attempts to register component ${t}.`),!1;Zt.set(t,e);for(const t of Jt.values())Xt(t,e);return!0}function nn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function rn(e,t,n=Qt){nn(e,t).clearInstance(n)}function sn(){Zt.clear()}const on=new Qe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class an{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw on.create("app-deleted",{appName:this._name})}}const ln="9.16.0";function cn(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw on.create("bad-app-name",{appName:String(i)});if(n||(n=(()=>{var e;return null===(e=je())||void 0===e?void 0:e.config})()),!n)throw on.create("no-options");const s=Jt.get(i);if(s){if(it(n,s.options)&&it(r,s.config))return s;throw on.create("duplicate-app",{appName:i})}const o=new Et(i);for(const e of Zt.values())o.addComponent(e);const a=new an(n,r,o);return Jt.set(i,a),a}function un(e=Qt){const t=Jt.get(e);if(!t&&e===Qt)return cn();if(!t)throw on.create("no-app",{appName:e});return t}function dn(){return Array.from(Jt.values())}async function hn(e){const t=e.name;Jt.has(t)&&(Jt.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function fn(e,t,n){var r;let i=null!==(r=Yt[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Kt.warn(e.join(" "))}tn(new wt(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function pn(e,t){if(null!==e&&"function"!=typeof e)throw on.create("invalid-log-argument");!function(e,t){for(const n of St){let r=null;t&&t.level&&(r=kt[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const s=i.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:xt[n].toLowerCase(),message:s,args:i,type:t.name})}}}(e,t)}function mn(e){var t;t=e,St.forEach((e=>{e.setLogLevel(t)}))}const gn="firebase-heartbeat-store";let yn=null;function vn(){return yn||(yn=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Ut(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Ut(o.result),e.oldVersion,e.newVersion,Ut(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(gn)}}).catch((e=>{throw on.create("idb-open",{originalErrorMessage:e.message})}))),yn}async function wn(e,t){try{const n=(await vn()).transaction(gn,"readwrite"),r=n.objectStore(gn);return await r.put(t,bn(e)),n.done}catch(e){if(e instanceof Ke)Kt.warn(e.message);else{const t=on.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Kt.warn(t.message)}}}function bn(e){return`${e.name}!${e.options.appId}`}class _n{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Sn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=En();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=En(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),xn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=De(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function En(){return(new Date).toISOString().substring(0,10)}class Sn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!He()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{return(await vn()).transaction(gn).objectStore(gn).get(bn(e))}catch(e){if(e instanceof Ke)Kt.warn(e.message);else{const t=on.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Kt.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function xn(e){return De(JSON.stringify({version:2,heartbeats:e})).length}tn(new wt("platform-logger",(e=>new $t(e)),"PRIVATE")),tn(new wt("heartbeat",(e=>new _n(e)),"PRIVATE")),fn(Wt,Ht,""),fn(Wt,Ht,"esm2017"),fn("fire-js","");class kn{constructor(e,t){this._delegate=e,this.firebase=t,Xt(e,new wt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),hn(this._delegate))))}_getService(e,t=Qt){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Qt){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Xt(this._delegate,e)}_addOrOverwriteComponent(e){en(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const In=new Qe("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Tn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e,i={}){const s=cn(e,i);if(et(n,s.name))return n[s.name];const o=new t(s,r);return n[s.name]=o,o},app:i,registerVersion:fn,setLogLevel:mn,onLog:pn,apps:null,SDK_VERSION:ln,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(tn(e)&&"PUBLIC"===e.type){const o=(e=i())=>{if("function"!=typeof e[s])throw In.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Fe(o,e.serviceProps),r[s]=o,t.prototype[s]=function(...t){return this._getService.bind(this,n).apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!et(n,e=e||Qt))throw In.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(kn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Fe(n,e)},createSubscribe:ut,ErrorFactory:Qe,deepExtend:Fe}),n}(),Cn=new Nt("@firebase/app-compat");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Cn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Cn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Nn=Tn;fn("@firebase/app-compat","0.2.1",void 0),Nn.registerVersion("firebase","9.16.0","app-compat");var An,Pn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},On={},Rn=Rn||{},Ln=Pn||self;function Dn(){}function Mn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Fn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var jn="closure_uid_"+(1e9*Math.random()>>>0),Un=0;function Vn(e,t,n){return e.call.apply(e.bind,arguments)}function zn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function qn(e,t,n){return(qn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vn:zn).apply(null,arguments)}function Bn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Gn(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function $n(){this.s=this.s,this.o=this.o}$n.prototype.s=!1,$n.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,jn)&&e[jn]||(e[jn]=++Un))},$n.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Hn(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Kn(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(Mn(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function Qn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Qn.prototype.h=function(){this.defaultPrevented=!0};var Yn=function(){if(!Ln.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ln.addEventListener("test",Dn,t),Ln.removeEventListener("test",Dn,t)}catch(e){}return e}();function Jn(e){return/^[\s\xa0]*$/.test(e)}var Zn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Xn(e,t){return e<t?-1:e>t?1:0}function er(){var e=Ln.navigator;return e&&(e=e.userAgent)?e:""}function tr(e){return-1!=er().indexOf(e)}function nr(e){return nr[" "](e),e}nr[" "]=Dn;var rr,ir,sr=tr("Opera"),or=tr("Trident")||tr("MSIE"),ar=tr("Edge"),lr=ar||or,cr=tr("Gecko")&&!(-1!=er().toLowerCase().indexOf("webkit")&&!tr("Edge"))&&!(tr("Trident")||tr("MSIE"))&&!tr("Edge"),ur=-1!=er().toLowerCase().indexOf("webkit")&&!tr("Edge");function dr(){var e=Ln.document;return e?e.documentMode:void 0}e:{var hr="",fr=(ir=er(),cr?/rv:([^\);]+)(\)|;)/.exec(ir):ar?/Edge\/([\d\.]+)/.exec(ir):or?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ir):ur?/WebKit\/(\S+)/.exec(ir):sr?/(?:Version)[ \/]?(\S+)/.exec(ir):void 0);if(fr&&(hr=fr?fr[1]:""),or){var pr=dr();if(null!=pr&&pr>parseFloat(hr)){rr=String(pr);break e}}rr=hr}var mr,gr={};function yr(){return function(e){var t=gr;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let e=0;const t=Zn(String(rr)).split("."),n=Zn("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=Xn(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Xn(0==i[2].length,0==s[2].length)||Xn(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}()}()}Ln.document&&or?mr=dr()||parseInt(rr,10)||void 0:mr=void 0;var vr=mr;function wr(e,t){if(Qn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(cr){e:{try{nr(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:br[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&wr.X.h.call(this)}}Gn(wr,Qn);var br={2:"touch",3:"pen",4:"mouse"};wr.prototype.h=function(){wr.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var _r="closure_listenable_"+(1e6*Math.random()|0),Er=0;function Sr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Er,this.ba=this.ea=!1}function xr(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function kr(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ir(e){const t={};for(const n in e)t[n]=e[n];return t}const Tr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cr(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<Tr.length;t++)n=Tr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Nr(e){this.src=e,this.g={},this.h=0}function Ar(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Wn(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(xr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Pr(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ba&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}Nr.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Pr(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Sr(t,this.src,s,!!r,i)).ea=n,e.push(t)),t};var Or="closure_lm_"+(1e6*Math.random()|0),Rr={};function Lr(e,t,n,r,i){if(r&&r.once)return Mr(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Lr(e,t[s],n,r,i);return null}return n=Br(n),e&&e[_r]?e.N(t,n,Fn(r)?!!r.capture:!!r,i):Dr(e,t,n,!1,r,i)}function Dr(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Fn(i)?!!i.capture:!!i,a=zr(e);if(a||(e[Or]=a=new Nr(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=Vr;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Yn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ur(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Mr(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Mr(e,t[s],n,r,i);return null}return n=Br(n),e&&e[_r]?e.O(t,n,Fn(r)?!!r.capture:!!r,i):Dr(e,t,n,!0,r,i)}function Fr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Fr(e,t[s],n,r,i);else r=Fn(r)?!!r.capture:!!r,n=Br(n),e&&e[_r]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Pr(s=e.g[t],n,r,i))&&(xr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=zr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Pr(t,n,r,i)),(n=-1<e?t[e]:null)&&jr(n))}function jr(e){if("number"!=typeof e&&e&&!e.ba){var t=e.src;if(t&&t[_r])Ar(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ur(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=zr(t))?(Ar(n,e),0==n.h&&(n.src=null,t[Or]=null)):xr(e)}}}function Ur(e){return e in Rr?Rr[e]:Rr[e]="on"+e}function Vr(e,t){if(e.ba)e=!0;else{t=new wr(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&jr(e),e=n.call(r,t)}return e}function zr(e){return(e=e[Or])instanceof Nr?e:null}var qr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Br(e){return"function"==typeof e?e:(e[qr]||(e[qr]=function(t){return e.handleEvent(t)}),e[qr])}function Gr(){$n.call(this),this.i=new Nr(this),this.P=this,this.I=null}function $r(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Qn(t,e);else if(t instanceof Qn)t.target=t.target||e;else{var i=t;Cr(t=new Qn(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Wr(o,r,!0,t)&&i}if(i=Wr(o=t.g=e,r,!0,t)&&i,i=Wr(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Wr(o=t.g=n[s],r,!1,t)&&i}function Wr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&Ar(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Gn(Gr,$n),Gr.prototype[_r]=!0,Gr.prototype.removeEventListener=function(e,t,n,r){Fr(this,e,t,n,r)},Gr.prototype.M=function(){if(Gr.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)xr(n[r]);delete t.g[e],t.h--}}this.I=null},Gr.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Gr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Hr=Ln.JSON.stringify;function Kr(){var e=ti;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Qr,Yr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Jr),(e=>e.reset()));class Jr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Zr(e){Ln.setTimeout((()=>{throw e}),0)}function Xr(e,t){Qr||function(){var e=Ln.Promise.resolve(void 0);Qr=function(){e.then(ni)}}(),ei||(Qr(),ei=!0),ti.add(e,t)}var ei=!1,ti=new class{constructor(){this.h=this.g=null}add(e,t){const n=Yr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function ni(){for(var e;e=Kr();){try{e.h.call(e.g)}catch(e){Zr(e)}var t=Yr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ei=!1}function ri(e,t){Gr.call(this),this.h=e||1,this.g=t||Ln,this.j=qn(this.lb,this),this.l=Date.now()}function ii(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function si(e,t,n){if("function"==typeof e)n&&(e=qn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=qn(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ln.setTimeout(e,t||0)}function oi(e){e.g=si((()=>{e.g=null,e.i&&(e.i=!1,oi(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Gn(ri,Gr),(An=ri.prototype).ca=!1,An.R=null,An.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),$r(this,"tick"),this.ca&&(ii(this),this.start()))}},An.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},An.M=function(){ri.X.M.call(this),ii(this),delete this.g};class ai extends $n{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oi(this)}M(){super.M(),this.g&&(Ln.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(e){$n.call(this),this.h=e,this.g={}}Gn(li,$n);var ci=[];function ui(e,t,n,r){Array.isArray(n)||(n&&(ci[0]=n.toString()),n=ci);for(var i=0;i<n.length;i++){var s=Lr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function di(e){kr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&jr(e)}),e),e.g={}}function hi(){this.g=!0}function fi(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Hr(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}li.prototype.M=function(){li.X.M.call(this),di(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hi.prototype.Aa=function(){this.g=!1},hi.prototype.info=function(){};var pi={},mi=null;function gi(){return mi=mi||new Gr}function yi(e){Qn.call(this,pi.Pa,e)}function vi(e){const t=gi();$r(t,new yi(t))}function wi(e,t){Qn.call(this,pi.STAT_EVENT,e),this.stat=t}function bi(e){const t=gi();$r(t,new wi(t,e))}function _i(e,t){Qn.call(this,pi.Qa,e),this.size=t}function Ei(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Ln.setTimeout((function(){e()}),t)}pi.Pa="serverreachability",Gn(yi,Qn),pi.STAT_EVENT="statevent",Gn(wi,Qn),pi.Qa="timingevent",Gn(_i,Qn);var Si={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},xi={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ki(){}function Ii(e){return e.h||(e.h=e.i())}function Ti(){}ki.prototype.h=null;var Ci,Ni={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ai(){Qn.call(this,"d")}function Pi(){Qn.call(this,"c")}function Oi(){}function Ri(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new li(this),this.O=Di,e=lr?125:void 0,this.T=new ri(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Li}function Li(){this.i=null,this.g="",this.h=!1}Gn(Ai,Qn),Gn(Pi,Qn),Gn(Oi,ki),Oi.prototype.g=function(){return new XMLHttpRequest},Oi.prototype.i=function(){return{}},Ci=new Oi;var Di=45e3,Mi={},Fi={};function ji(e,t,n){e.K=1,e.v=rs(Zi(t)),e.s=n,e.P=!0,Ui(e,null)}function Ui(e,t){e.F=Date.now(),Bi(e),e.A=Zi(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),gs(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Li,e.g=go(e.l,n?t:null,!e.s),0<e.N&&(e.L=new ai(qn(e.La,e,e.g),e.N)),ui(e.S,e.g,"readystatechange",e.ib),t=e.H?Ir(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),vi(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Vi(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Da}function zi(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=qi(e,n),r==Fi){4==t&&(e.o=4,bi(14),i=!1),fi(e.j,e.m,null,"[Incomplete Response]");break}if(r==Mi){e.o=4,bi(15),fi(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}fi(e.j,e.m,r,null),Ki(e,r)}Vi(e)&&r!=Fi&&r!=Mi&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,bi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ao(t),t.K=!0,bi(11))):(fi(e.j,e.m,n,"[Invalid Chunked Response]"),Hi(e),Wi(e))}function qi(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fi:(n=Number(t.substring(n,r)),isNaN(n)?Mi:(r+=1)+n>t.length?Fi:(t=t.substr(r,n),e.C=r+n,t))}function Bi(e){e.V=Date.now()+e.O,Gi(e,e.O)}function Gi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ei(qn(e.gb,e),t)}function $i(e){e.B&&(Ln.clearTimeout(e.B),e.B=null)}function Wi(e){0==e.l.G||e.I||uo(e.l,e)}function Hi(e){$i(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ii(e.T),di(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ki(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Es(n.h,e)))if(!e.J&&Es(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;co(n),Xs(n)}oo(n),bi(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Ei(qn(n.cb,n),6e3));if(1>=_s(n.h)&&n.ja){try{n.ja()}catch(e){}n.ja=void 0}}else fo(n,11)}else if((e.J||n.g==e)&&co(n),!Jn(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.I=c[1],n.ka=c[2];const t=c[3];null!=t&&(n.ma=t,n.j.info("VER="+n.ma));const i=c[4];null!=i&&(n.Ca=i,n.j.info("SVER="+n.Ca));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ss(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.za=e,ns(r.F,r.D,e))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=e;if((r=n).sa=mo(r,r.H?r.ka:null,r.V),o.J){xs(r.h,o);var a=o,l=r.J;l&&a.setTimeout(l),a.B&&($i(a),Bi(a)),r.g=o}else so(r);0<n.i.length&&to(n)}else"stop"!=c[0]&&"close"!=c[0]||fo(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?fo(n,7):Zs(n):"noop"!=c[0]&&n.l&&n.l.wa(c),n.A=0)}vi()}catch(e){}}function Qi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Mn(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(Mn(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(Mn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(An=Ri.prototype).setTimeout=function(e){this.O=e},An.ib=function(e){e=e.target;const t=this.L;t&&3==Ws(e)?t.l():this.La(e)},An.La=function(e){try{if(e==this.g)e:{const u=Ws(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>u)&&(3!=u||lr||this.g&&(this.h.h||this.g.fa()||Hs(this.g)))){this.I||4!=u||7==t||vi(),$i(this);var n=this.g.aa();this.Y=n;t:if(Vi(this)){var r=Hs(this.g);e="";var i=r.length,s=4==Ws(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Hi(this),Wi(this);var o="";break t}this.h.i=new Ln.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.U,u,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jn(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,bi(12),Hi(this),Wi(this);break e}fi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ki(this,n)}this.P?(zi(this,u,o),lr&&this.i&&3==u&&(ui(this.S,this.T,"tick",this.hb),this.T.start())):(fi(this.j,this.m,o,null),Ki(this,o)),4==u&&Hi(this),this.i&&!this.I&&(4==u?uo(this.l,this):(this.i=!1,Bi(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,bi(12)):(this.o=0,bi(13)),Hi(this),Wi(this)}}}catch(e){}},An.hb=function(){if(this.g){var e=Ws(this.g),t=this.g.fa();this.C<t.length&&($i(this),zi(this,e,t),this.i&&4!=e&&Bi(this))}},An.cancel=function(){this.I=!0,Hi(this)},An.gb=function(){this.B=null;const e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(vi(),bi(17)),Hi(this),this.o=2,Wi(this)):Gi(this,this.V-e)};var Yi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ji(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ji){this.h=void 0!==t?t:e.h,Xi(this,e.j),this.s=e.s,this.g=e.g,es(this,e.m),this.l=e.l,t=e.i;var n=new hs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ts(this,n),this.o=e.o}else e&&(n=String(e).match(Yi))?(this.h=!!t,Xi(this,n[1]||"",!0),this.s=is(n[2]||""),this.g=is(n[3]||"",!0),es(this,n[4]),this.l=is(n[5]||"",!0),ts(this,n[6]||"",!0),this.o=is(n[7]||"")):(this.h=!!t,this.i=new hs(null,this.h))}function Zi(e){return new Ji(e)}function Xi(e,t,n){e.j=n?is(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function es(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ts(e,t,n){t instanceof hs?(e.i=t,function(e,t){t&&!e.j&&(fs(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ps(this,t),gs(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ss(t,us)),e.i=new hs(t,e.h))}function ns(e,t,n){e.i.set(t,n)}function rs(e){return ns(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function is(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ss(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,os),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function os(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ji.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ss(t,as,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ss(t,as,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ss(n,"/"==n.charAt(0)?cs:ls,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ss(n,ds)),e.join("")};var as=/[#\/\?@]/g,ls=/[#\?:]/g,cs=/[#\?]/g,us=/[#\?@]/g,ds=/#/g;function hs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function fs(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ps(e,t){fs(e),t=ys(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ms(e,t){return fs(e),t=ys(e,t),e.g.has(t)}function gs(e,t,n){ps(e,t),0<n.length&&(e.i=null,e.g.set(ys(e,t),Hn(n)),e.h+=n.length)}function ys(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function vs(e){this.l=e||ws,e=Ln.PerformanceNavigationTiming?0<(e=Ln.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Ln.g&&Ln.g.Ga&&Ln.g.Ga()&&Ln.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(An=hs.prototype).add=function(e,t){fs(this),this.i=null,e=ys(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},An.forEach=function(e,t){fs(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},An.oa=function(){fs(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},An.W=function(e){fs(this);let t=[];if("string"==typeof e)ms(this,e)&&(t=t.concat(this.g.get(ys(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},An.set=function(e,t){return fs(this),this.i=null,ms(this,e=ys(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},An.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},An.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var ws=10;function bs(e){return!!e.h||!!e.g&&e.g.size>=e.j}function _s(e){return e.h?1:e.g?e.g.size:0}function Es(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ss(e,t){e.g?e.g.add(t):e.h=t}function xs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ks(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return Hn(e.i)}function Is(){}function Ts(){this.g=new Is}function Cs(e,t,n){const r=n||"";try{Qi(e,(function(e,n){let i=e;Fn(e)&&(i=Hr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Ns(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function As(e){this.l=e.ac||null,this.j=e.jb||!1}function Ps(e,t){Gr.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Os,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vs.prototype.cancel=function(){if(this.i=ks(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Is.prototype.stringify=function(e){return Ln.JSON.stringify(e,void 0)},Is.prototype.parse=function(e){return Ln.JSON.parse(e,void 0)},Gn(As,ki),As.prototype.g=function(){return new Ps(this.l,this.j)},As.prototype.i=function(e){return function(){return e}}({}),Gn(Ps,Gr);var Os=0;function Rs(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Ls(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ds(e)}function Ds(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(An=Ps.prototype).open=function(e,t){if(this.readyState!=Os)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ds(this)},An.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ln).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},An.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ls(this)),this.readyState=Os},An.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ds(this)),this.g&&(this.readyState=3,Ds(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Ln.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Rs(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},An.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ls(this):Ds(this),3==this.readyState&&Rs(this)}},An.Va=function(e){this.g&&(this.response=this.responseText=e,Ls(this))},An.Ua=function(e){this.g&&(this.response=e,Ls(this))},An.ga=function(){this.g&&Ls(this)},An.setRequestHeader=function(e,t){this.v.append(e,t)},An.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},An.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ps.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ms=Ln.JSON.parse;function Fs(e){Gr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=js,this.K=this.L=!1}Gn(Fs,Gr);var js="",Us=/^https?$/i,Vs=["POST","PUT"];function zs(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,qs(e),Gs(e)}function qs(e){e.D||(e.D=!0,$r(e,"complete"),$r(e,"error"))}function Bs(e){if(e.h&&void 0!==Rn&&(!e.C[1]||4!=Ws(e)||2!=e.aa()))if(e.v&&4==Ws(e))si(e.Ha,0,e);else if($r(e,"readystatechange"),4==Ws(e)){e.h=!1;try{const a=e.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.H).match(Yi)[1]||null;if(!i&&Ln.self&&Ln.self.location){var s=Ln.self.location.protocol;i=s.substr(0,s.length-1)}r=!Us.test(i?i.toLowerCase():"")}n=r}if(n)$r(e,"complete"),$r(e,"success");else{e.m=6;try{var o=2<Ws(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.aa()+"]",qs(e)}}finally{Gs(e)}}}function Gs(e,t){if(e.g){$s(e);const n=e.g,r=e.C[0]?Dn:null;e.g=null,e.C=null,t||$r(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function $s(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ln.clearTimeout(e.A),e.A=null)}function Ws(e){return e.g?e.g.readyState:0}function Hs(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case js:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ks(e){let t="";return kr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Qs(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ks(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ns(e,t,n))}function Ys(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Js(e){this.Ca=0,this.i=[],this.j=new hi,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ys("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ys("baseRetryDelayMs",5e3,e),this.bb=Ys("retryDelaySeedMs",1e4,e),this.$a=Ys("forwardChannelMaxRetries",2,e),this.ta=Ys("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new vs(e&&e.concurrentRequestLimit),this.Fa=new Ts,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Zs(e){if(eo(e),3==e.G){var t=e.U++,n=Zi(e.F);ns(n,"SID",e.I),ns(n,"RID",t),ns(n,"TYPE","terminate"),ro(e,n),(t=new Ri(e,e.j,t,void 0)).K=2,t.v=rs(Zi(n)),n=!1,Ln.navigator&&Ln.navigator.sendBeacon&&(n=Ln.navigator.sendBeacon(t.v.toString(),"")),!n&&Ln.Image&&((new Image).src=t.v,n=!0),n||(t.g=go(t.l,null),t.g.da(t.v)),t.F=Date.now(),Bi(t)}po(e)}function Xs(e){e.g&&(ao(e),e.g.cancel(),e.g=null)}function eo(e){Xs(e),e.u&&(Ln.clearTimeout(e.u),e.u=null),co(e),e.h.cancel(),e.m&&("number"==typeof e.m&&Ln.clearTimeout(e.m),e.m=null)}function to(e){bs(e.h)||e.m||(e.m=!0,Xr(e.Ja,e),e.C=0)}function no(e,t){var n;n=t?t.m:e.U++;const r=Zi(e.F);ns(r,"SID",e.I),ns(r,"RID",n),ns(r,"AID",e.T),ro(e,r),e.o&&e.s&&Qs(r,e.o,e.s),n=new Ri(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=io(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Ss(e.h,n),ji(n,r,t)}function ro(e,t){e.ia&&kr(e.ia,(function(e,n){ns(t,n,e)})),e.l&&Qi({},(function(e,n){ns(t,n,e)}))}function io(e,t,n){n=Math.min(e.i.length,n);var r=e.l?qn(e.l.Ra,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{Cs(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function so(e){e.g||e.u||(e.Z=1,Xr(e.Ia,e),e.A=0)}function oo(e){return!(e.g||e.u||3<=e.A||(e.Z++,e.u=Ei(qn(e.Ia,e),ho(e,e.A)),e.A++,0))}function ao(e){null!=e.B&&(Ln.clearTimeout(e.B),e.B=null)}function lo(e){e.g=new Ri(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Zi(e.sa);ns(t,"RID","rpc"),ns(t,"SID",e.I),ns(t,"CI",e.L?"0":"1"),ns(t,"AID",e.T),ns(t,"TYPE","xmlhttp"),ro(e,t),e.o&&e.s&&Qs(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=rs(Zi(t)),n.s=null,n.P=!0,Ui(n,e)}function co(e){null!=e.v&&(Ln.clearTimeout(e.v),e.v=null)}function uo(e,t){var n=null;if(e.g==t){co(e),ao(e),e.g=null;var r=2}else{if(!Es(e.h,t))return;n=t.D,xs(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;$r(r=gi(),new _i(r,n)),to(e)}else so(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(_s(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.C>=(e.Za?0:e.$a)||(e.m=Ei(qn(e.Ja,e,t),ho(e,e.C)),e.C++,0)))}(e,t)||2==r&&oo(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:fo(e,5);break;case 4:fo(e,10);break;case 3:fo(e,6);break;default:fo(e,2)}}function ho(e,t){let n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function fo(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=qn(e.kb,e);n||(n=new Ji("//www.google.com/images/cleardot.gif"),Ln.location&&"http"==Ln.location.protocol||Xi(n,"https"),rs(n)),function(e,t){const n=new hi;if(Ln.Image){const r=new Image;r.onload=Bn(Ns,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Bn(Ns,n,r,"TestLoadImage: error",!1,t),r.onabort=Bn(Ns,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Bn(Ns,n,r,"TestLoadImage: timeout",!1,t),Ln.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else bi(2);e.G=0,e.l&&e.l.va(t),po(e),eo(e)}function po(e){if(e.G=0,e.la=[],e.l){const t=ks(e.h);0==t.length&&0==e.i.length||(Kn(e.la,t),Kn(e.la,e.i),e.h.i.length=0,Hn(e.i),e.i.length=0),e.l.ua()}}function mo(e,t,n){var r=n instanceof Ji?Zi(n):new Ji(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),es(r,r.m);else{var i=Ln.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Ji(null,void 0);r&&Xi(s,r),t&&(s.g=t),i&&es(s,i),n&&(s.l=n),r=s}return n=e.D,t=e.za,n&&t&&ns(r,n,t),ns(r,"VER",e.ma),ro(e,r),r}function go(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Fs(new As({jb:!0})):new Fs(e.ra)).Ka(e.H),t}function yo(){}function vo(){if(or&&!(10<=Number(vr)))throw Error("Environmental error: no available transport.")}function wo(e,t){Gr.call(this),this.g=new Js(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Jn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Jn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Eo(this)}function bo(e){Ai.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _o(){Pi.call(this),this.status=1}function Eo(e){this.g=e}(An=Fs.prototype).Ka=function(e){this.L=e},An.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ci.g(),this.C=this.u?Ii(this.u):Ii(Ci),this.g.onreadystatechange=qn(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void zs(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Ln.FormData&&e instanceof Ln.FormData,!(0<=Wn(Vs,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$s(this),0<this.B&&((this.K=function(e){return or&&yr()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qn(this.qa,this)):this.A=si(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){zs(this,e)}},An.qa=function(){void 0!==Rn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},An.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,$r(this,"complete"),$r(this,"abort"),Gs(this))},An.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gs(this,!0)),Fs.X.M.call(this)},An.Ha=function(){this.s||(this.F||this.v||this.l?Bs(this):this.fb())},An.fb=function(){Bs(this)},An.aa=function(){try{return 2<Ws(this)?this.g.status:-1}catch(e){return-1}},An.fa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},An.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ms(t)}},An.Ea=function(){return this.m},An.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(An=Js.prototype).ma=8,An.G=1,An.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Ri(this,this.j,e,void 0);let s=this.s;if(this.S&&(s?(s=Ir(s),Cr(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=io(this,i,t),ns(n=Zi(this.F),"RID",e),ns(n,"CVER",22),this.D&&ns(n,"X-HTTP-Session-Id",this.D),ro(this,n),s&&(this.N?t="headers="+encodeURIComponent(String(Ks(s)))+"&"+t:this.o&&Qs(n,this.o,s)),Ss(this.h,i),this.Ya&&ns(n,"TYPE","init"),this.O?(ns(n,"$req",t),ns(n,"SID","null"),i.Z=!0,ji(i,n,null)):ji(i,n,t),this.G=2}}else 3==this.G&&(e?no(this,e):0==this.i.length||bs(this.h)||no(this))},An.Ia=function(){if(this.u=null,lo(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Ei(qn(this.eb,this),e)}},An.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,bi(10),Xs(this),lo(this))},An.cb=function(){null!=this.v&&(this.v=null,Xs(this),oo(this),bi(19))},An.kb=function(e){e?(this.j.info("Successfully pinged google.com"),bi(2)):(this.j.info("Failed to ping google.com"),bi(1))},(An=yo.prototype).xa=function(){},An.wa=function(){},An.va=function(){},An.ua=function(){},An.Ra=function(){},vo.prototype.g=function(e,t){return new wo(e,t)},Gn(wo,Gr),wo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;bi(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=mo(e,null,e.V),to(e)},wo.prototype.close=function(){Zs(this.g)},wo.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Hr(e),e=n);t.i.push(new class{constructor(e,t){this.h=e,this.g=t}}(t.ab++,e)),3==t.G&&to(t)},wo.prototype.M=function(){this.g.l=null,delete this.j,Zs(this.g),delete this.g,wo.X.M.call(this)},Gn(bo,Ai),Gn(_o,Pi),Gn(Eo,yo),Eo.prototype.xa=function(){$r(this.g,"a")},Eo.prototype.wa=function(e){$r(this.g,new bo(e))},Eo.prototype.va=function(e){$r(this.g,new _o)},Eo.prototype.ua=function(){$r(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,wo.prototype.send=wo.prototype.u,wo.prototype.open=wo.prototype.m,wo.prototype.close=wo.prototype.close,Si.NO_ERROR=0,Si.TIMEOUT=8,Si.HTTP_ERROR=6,xi.COMPLETE="complete",Ti.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",Gr.prototype.listen=Gr.prototype.N,Fs.prototype.listenOnce=Fs.prototype.O,Fs.prototype.getLastError=Fs.prototype.Oa,Fs.prototype.getLastErrorCode=Fs.prototype.Ea,Fs.prototype.getStatus=Fs.prototype.aa,Fs.prototype.getResponseJson=Fs.prototype.Sa,Fs.prototype.getResponseText=Fs.prototype.fa,Fs.prototype.send=Fs.prototype.da,Fs.prototype.setWithCredentials=Fs.prototype.Ka;var So=On.createWebChannelTransport=function(){return new vo},xo=On.getStatEventTarget=function(){return gi()},ko=On.ErrorCode=Si,Io=On.EventType=xi,To=On.Event=pi,Co=On.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},No=On.FetchXmlHttpFactory=As,Ao=On.WebChannel=Ti,Po=On.XhrIo=Fs;const Oo="@firebase/firestore";class Ro{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ro.UNAUTHENTICATED=new Ro(null),Ro.GOOGLE_CREDENTIALS=new Ro("google-credentials-uid"),Ro.FIRST_PARTY=new Ro("first-party-uid"),Ro.MOCK_USER=new Ro("mock-user");let Lo="9.16.0";const Do=new Nt("@firebase/firestore");function Mo(){return Do.logLevel}function Fo(e,...t){if(Do.logLevel<=xt.DEBUG){const n=t.map(Vo);Do.debug(`Firestore (${Lo}): ${e}`,...n)}}function jo(e,...t){if(Do.logLevel<=xt.ERROR){const n=t.map(Vo);Do.error(`Firestore (${Lo}): ${e}`,...n)}}function Uo(e,...t){if(Do.logLevel<=xt.WARN){const n=t.map(Vo);Do.warn(`Firestore (${Lo}): ${e}`,...n)}}function Vo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function zo(e="Unexpected state"){const t=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: `+e;throw jo(t),new Error(t)}function qo(e,t){e||zo()}function Bo(e,t){return e}const Go={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $o extends Ke{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ho{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ko{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ro.UNAUTHENTICATED)))}shutdown(){}}class Qo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Yo{constructor(e){this.t=e,this.currentUser=Ro.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Wo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wo,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Fo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Fo("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Fo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(qo("string"==typeof t.accessToken),new Ho(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qo(null===e||"string"==typeof e),new Ro(e)}}class Jo{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r,this.type="FirstParty",this.user=Ro.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(qo(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Zo{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r}getToken(){return Promise.resolve(new Jo(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable((()=>t(Ro.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Xo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ea{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const n=e=>{null!=e.error&&Fo("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.A;return this.A=e.token,Fo("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Fo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.T.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.T.getImmediate({optional:!0});e?r(e):Fo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(qo("string"==typeof e.token),this.A=e.token,new Xo(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ta(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class na{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=ta(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function ra(e,t){return e<t?-1:e>t?1:0}function ia(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function sa(e){return e+"\0"}class oa{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $o(Go.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $o(Go.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $o(Go.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $o(Go.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return oa.fromMillis(Date.now())}static fromDate(e){return oa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new oa(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ra(this.nanoseconds,e.nanoseconds):ra(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class aa{constructor(e){this.timestamp=e}static fromTimestamp(e){return new aa(e)}static min(){return new aa(new oa(0,0))}static max(){return new aa(new oa(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class la{constructor(e,t,n){void 0===t?t=0:t>e.length&&zo(),void 0===n?n=e.length-t:n>e.length-t&&zo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===la.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof la?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ca extends la{construct(e,t,n){return new ca(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new $o(Go.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new ca(t)}static emptyPath(){return new ca([])}}const ua=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class da extends la{construct(e,t,n){return new da(e,t,n)}static isValidIdentifier(e){return ua.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),da.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new da(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new $o(Go.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new $o(Go.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new $o(Go.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new $o(Go.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new da(t)}static emptyPath(){return new da([])}}class ha{constructor(e){this.path=e}static fromPath(e){return new ha(ca.fromString(e))}static fromName(e){return new ha(ca.fromString(e).popFirst(5))}static empty(){return new ha(ca.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ca.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ca.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ha(new ca(e.slice()))}}class fa{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function pa(e){return e.fields.find((e=>2===e.kind))}function ma(e){return e.fields.filter((e=>2!==e.kind))}fa.UNKNOWN_ID=-1;class ga{constructor(e,t){this.fieldPath=e,this.kind=t}}class ya{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ya(0,ba.min())}}function va(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=aa.fromTimestamp(1e9===r?new oa(n+1,0):new oa(n,r));return new ba(i,ha.empty(),t)}function wa(e){return new ba(e.readTime,e.key,-1)}class ba{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ba(aa.min(),ha.empty(),-1)}static max(){return new ba(aa.max(),ha.empty(),-1)}}function _a(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ha.comparator(e.documentKey,t.documentKey),0!==n?n:ra(e.largestBatchId,t.largestBatchId))}const Ea="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function xa(e){if(e.code!==Go.FAILED_PRECONDITION||e.message!==Ea)throw e;Fo("LocalStore","Unexpectedly lost primary lease")}class ka{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ka(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ka?t:ka.resolve(t)}catch(e){return ka.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ka.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ka.reject(t)}static resolve(e){return new ka(((t,n)=>{t(e)}))}static reject(e){return new ka(((t,n)=>{n(e)}))}static waitFor(e){return new ka(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ka.resolve(!1);for(const n of e)t=t.next((e=>e?ka.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ka(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ka(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Ia{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Wo,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Na(e,t.error)):this.P.resolve()},this.transaction.onerror=t=>{const n=La(t.target.error);this.P.reject(new Na(e,n))}}static open(e,t,n,r){try{return new Ia(t,e.transaction(r,n))}catch(e){throw new Na(t,e)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Fo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Pa(t)}}class Ta{constructor(e,t,n){this.name=e,this.version=t,this.S=n,12.2===Ta.D(ze())&&jo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fo("SimpleDb","Removing database:",e),Oa(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!He())return!1;if(Ta.N())return!0;const e=ze(),t=Ta.D(e),n=0<t&&t<10,r=Ta.k(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static N(){return"undefined"!=typeof process&&"YES"===(null==="MISSING_ENV_VAR"?void 0:"MISSING_ENV_VAR".O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static k(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async F(e){return this.db||(Fo("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Na(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new $o(Go.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new $o(Go.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Na(e,r))},r.onupgradeneeded=e=>{Fo("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.S.$(t,r.transaction,e.oldVersion,this.version).next((()=>{Fo("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.F(e);const t=Ia.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.V(),e))).catch((e=>(t.abort(e),ka.reject(e)))).toPromise();return s.catch((()=>{})),await t.v,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Fo("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ca{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Oa(this.q.delete())}}class Na extends $o{constructor(e,t){super(Go.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Aa(e){return"IndexedDbTransactionError"===e.name}class Pa{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Fo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Fo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Oa(n)}add(e){return Fo("SimpleDb","ADD",this.store.name,e,e),Oa(this.store.add(e))}get(e){return Oa(this.store.get(e)).next((t=>(void 0===t&&(t=null),Fo("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Fo("SimpleDb","DELETE",this.store.name,e),Oa(this.store.delete(e))}count(){return Fo("SimpleDb","COUNT",this.store.name),Oa(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.H(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new ka(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}J(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ka(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}Y(e,t){Fo("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const r=this.cursor(n);return this.H(r,((e,t,n)=>n.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.H(r,t)}tt(e){const t=this.cursor({});return new ka(((n,r)=>{t.onerror=e=>{const t=La(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}H(e,t){const n=[];return new ka(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Ca(i),o=t(i.primaryKey,i.value,s);if(o instanceof ka){const e=o.catch((e=>(s.done(),ka.reject(e))));n.push(e)}s.isDone?r():null===s.G?i.continue():i.continue(s.G)}})).next((()=>ka.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Oa(e){return new ka(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=La(e.target.error);n(t)}}))}let Ra=!1;function La(e){const t=Ta.D(ze());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new $o("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ra||(Ra=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Da{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){Fo("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Fo("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(e){Aa(e)?Fo("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await xa(e)}await this.nt(6e4)}))}}class Ma{constructor(e,t){this.localStore=e,this.persistence=t}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.it(t,e)))}it(e,t){const n=new Set;let r=t,i=!0;return ka.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Fo("IndexBackiller",`Processing collection: ${t}`),this.rt(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}rt(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ot(r,n))).next((n=>(Fo("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ot(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=wa(t);_a(r,n)>0&&(n=r)})),new ba(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ut(e),this.ct=e=>t.writeSequenceNumber(e))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}Fa.at=-1;class ja{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Ua{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ua("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}function Va(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function za(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qa(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ba(e){return null==e}function Ga(e){return 0===e&&1/e==-1/0}function $a(e){return"number"==typeof e&&Number.isInteger(e)&&!Ga(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class Wa{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Wa(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Wa(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ra(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wa.EMPTY_BYTE_STRING=new Wa("");const Ha=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ka(e){if(qo(!!e),"string"==typeof e){let t=0;const n=Ha.exec(e);if(qo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Qa(e.seconds),nanos:Qa(e.nanos)}}function Qa(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ya(e){return"string"==typeof e?Wa.fromBase64String(e):Wa.fromUint8Array(e)}function Ja(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Za(e){const t=e.mapValue.fields.__previous_value__;return Ja(t)?Za(t):t}function Xa(e){const t=Ka(e.mapValue.fields.__local_write_time__.timestampValue);return new oa(t.seconds,t.nanos)}const el={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tl={nullValue:"NULL_VALUE"};function nl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ja(e)?4:gl(e)?9007199254740991:10:zo()}function rl(e,t){if(e===t)return!0;const n=nl(e);if(n!==nl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Xa(e).isEqual(Xa(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ka(e.timestampValue),r=Ka(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ya(e.bytesValue).isEqual(Ya(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Qa(e.geoPointValue.latitude)===Qa(t.geoPointValue.latitude)&&Qa(e.geoPointValue.longitude)===Qa(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Qa(e.integerValue)===Qa(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Qa(e.doubleValue),r=Qa(t.doubleValue);return n===r?Ga(n)===Ga(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ia(e.arrayValue.values||[],t.arrayValue.values||[],rl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Va(n)!==Va(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!rl(n[e],r[e])))return!1;return!0}(e,t);default:return zo()}}function il(e,t){return void 0!==(e.values||[]).find((e=>rl(e,t)))}function sl(e,t){if(e===t)return 0;const n=nl(e),r=nl(t);if(n!==r)return ra(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ra(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Qa(e.integerValue||e.doubleValue),r=Qa(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ol(e.timestampValue,t.timestampValue);case 4:return ol(Xa(e),Xa(t));case 5:return ra(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ya(e),r=Ya(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=ra(n[e],r[e]);if(0!==t)return t}return ra(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ra(Qa(e.latitude),Qa(t.latitude));return 0!==n?n:ra(Qa(e.longitude),Qa(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=sl(n[e],r[e]);if(t)return t}return ra(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===el.mapValue&&t===el.mapValue)return 0;if(e===el.mapValue)return 1;if(t===el.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=ra(r[e],s[e]);if(0!==t)return t;const o=sl(n[r[e]],i[s[e]]);if(0!==o)return o}return ra(r.length,s.length)}(e.mapValue,t.mapValue);default:throw zo()}}function ol(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ra(e,t);const n=Ka(e),r=Ka(t),i=ra(n.seconds,r.seconds);return 0!==i?i:ra(n.nanos,r.nanos)}function al(e){return ll(e)}function ll(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ka(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ya(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ha.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ll(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${ll(e.fields[i])}`;return n+"}"}(e.mapValue):zo();var t,n}function cl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ul(e){return!!e&&"integerValue"in e}function dl(e){return!!e&&"arrayValue"in e}function hl(e){return!!e&&"nullValue"in e}function fl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pl(e){return!!e&&"mapValue"in e}function ml(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return za(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ml(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ml(e.arrayValue.values[n]);return t}return Object.assign({},e)}function gl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function yl(e){return"nullValue"in e?tl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?cl(Ua.empty(),ha.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:zo()}function vl(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?cl(Ua.empty(),ha.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?el:zo()}function wl(e,t){const n=sl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function bl(e,t){const n=sl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class _l{constructor(e,t){this.position=e,this.inclusive=t}}function El(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ha.comparator(ha.fromName(o.referenceValue),n.key):sl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Sl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!rl(e.position[n],t.position[n]))return!1;return!0}class xl{}class kl extends xl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Dl(e,t,n):"array-contains"===t?new Ul(e,n):"in"===t?new Vl(e,n):"not-in"===t?new zl(e,n):"array-contains-any"===t?new ql(e,n):new kl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ml(e,n):new Fl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(sl(t,this.value)):null!==t&&nl(this.value)===nl(t)&&this.matchesComparison(sl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Il extends xl{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Il(e,t)}matches(e){return Tl(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt((e=>e.isInequality()));return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Tl(e){return"and"===e.op}function Cl(e){return"or"===e.op}function Nl(e){return Al(e)&&Tl(e)}function Al(e){for(const t of e.filters)if(t instanceof Il)return!1;return!0}function Pl(e){if(e instanceof kl)return e.field.canonicalString()+e.op.toString()+al(e.value);if(Nl(e))return e.filters.map((e=>Pl(e))).join(",");{const t=e.filters.map((e=>Pl(e))).join(",");return`${e.op}(${t})`}}function Ol(e,t){return e instanceof kl?function(e,t){return t instanceof kl&&e.op===t.op&&e.field.isEqual(t.field)&&rl(e.value,t.value)}(e,t):e instanceof Il?function(e,t){return t instanceof Il&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Ol(n,t.filters[r])),!0)}(e,t):void zo()}function Rl(e,t){const n=e.filters.concat(t);return Il.create(n,e.op)}function Ll(e){return e instanceof kl?function(e){return`${e.field.canonicalString()} ${e.op} ${al(e.value)}`}(e):e instanceof Il?function(e){return e.op.toString()+" {"+e.getFilters().map(Ll).join(" ,")+"}"}(e):"Filter"}class Dl extends kl{constructor(e,t,n){super(e,t,n),this.key=ha.fromName(n.referenceValue)}matches(e){const t=ha.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ml extends kl{constructor(e,t){super(e,"in",t),this.keys=jl(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Fl extends kl{constructor(e,t){super(e,"not-in",t),this.keys=jl(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ha.fromName(e.referenceValue)))}class Ul extends kl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dl(t)&&il(t.arrayValue,this.value)}}class Vl extends kl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&il(this.value.arrayValue,t)}}class zl extends kl{constructor(e,t){super(e,"not-in",t)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!il(this.value.arrayValue,t)}}class ql extends kl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>il(this.value.arrayValue,e)))}}class Bl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Gl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class $l{constructor(e,t){this.comparator=e,this.root=t||Hl.EMPTY}insert(e,t){return new $l(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hl.BLACK,null,null))}remove(e){return new $l(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wl(this.root,e,this.comparator,!0)}}class Wl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Hl.RED,this.left=null!=r?r:Hl.EMPTY,this.right=null!=i?i:Hl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Hl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Hl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Hl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zo();if(this.right.isRed())throw zo();const e=this.left.check();if(e!==this.right.check())throw zo();return e+(this.isRed()?0:1)}}Hl.EMPTY=null,Hl.RED=!0,Hl.BLACK=!1,Hl.EMPTY=new class{constructor(){this.size=0}get key(){throw zo()}get value(){throw zo()}get color(){throw zo()}get left(){throw zo()}get right(){throw zo()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Hl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kl{constructor(e){this.comparator=e,this.data=new $l(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ql(this.data.getIterator())}getIteratorFrom(e){return new Ql(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Kl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Kl(this.comparator);return t.data=e,t}}class Ql{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yl(e){return e.hasNext()?e.getNext():void 0}class Jl{constructor(e){this.fields=e,e.sort(da.comparator)}static empty(){return new Jl([])}unionWith(e){let t=new Kl(da.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Jl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ia(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Zl{constructor(e){this.value=e}static empty(){return new Zl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!pl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ml(t)}setAll(e){let t=da.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ml(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());pl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];pl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){za(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Zl(ml(this.value))}}function Xl(e){const t=[];return za(e.fields,((e,n)=>{const r=new da([e]);if(pl(n)){const e=Xl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Jl(t)}class ec{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ec(e,0,aa.min(),aa.min(),aa.min(),Zl.empty(),0)}static newFoundDocument(e,t,n,r){return new ec(e,1,t,aa.min(),n,r,0)}static newNoDocument(e,t){return new ec(e,2,t,aa.min(),aa.min(),Zl.empty(),0)}static newUnknownDocument(e,t){return new ec(e,3,t,aa.min(),aa.min(),Zl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(aa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=aa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ec&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ec(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tc{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ft=null}}function nc(e,t=null,n=[],r=[],i=null,s=null,o=null){return new tc(e,t,n,r,i,s,o)}function rc(e){const t=Bo(e);if(null===t.ft){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Pl(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ba(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>al(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>al(e))).join(",")),t.ft=e}return t.ft}function ic(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Gl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ol(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Sl(e.startAt,t.startAt)&&Sl(e.endAt,t.endAt)}function sc(e){return ha.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function oc(e,t){return e.filters.filter((e=>e instanceof kl&&e.field.isEqual(t)))}function ac(e,t,n){let r=tl,i=!0;for(const n of oc(e,t)){let e=tl,t=!0;switch(n.op){case"<":case"<=":e=yl(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=tl}wl({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];wl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function lc(e,t,n){let r=el,i=!0;for(const n of oc(e,t)){let e=el,t=!0;switch(n.op){case">=":case">":e=vl(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=el}bl({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];bl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class cc{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.dt=null,this._t=null,this.startAt,this.endAt}}function uc(e,t,n,r,i,s,o,a){return new cc(e,t,n,r,i,s,o,a)}function dc(e){return new cc(e)}function hc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function fc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function pc(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function mc(e){return null!==e.collectionGroup}function gc(e){const t=Bo(e);if(null===t.dt){t.dt=[];const e=pc(t),n=fc(t);if(null!==e&&null===n)e.isKeyField()||t.dt.push(new Bl(e)),t.dt.push(new Bl(da.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.dt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Bl(da.keyField(),e))}}}return t.dt}function yc(e){const t=Bo(e);if(!t._t)if("F"===t.limitType)t._t=nc(t.path,t.collectionGroup,gc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of gc(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Bl(n.field,t))}const n=t.endAt?new _l(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _l(t.startAt.position,t.startAt.inclusive):null;t._t=nc(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function vc(e,t){t.getFirstInequalityField(),pc(e);const n=e.filters.concat([t]);return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wc(e,t,n){return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bc(e,t){return ic(yc(e),yc(t))&&e.limitType===t.limitType}function _c(e){return`${rc(yc(e))}|lt:${e.limitType}`}function Ec(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Ll(e))).join(", ")}]`),Ba(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>al(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>al(e))).join(",")),`Target(${t})`}(yc(e))}; limitType=${e.limitType})`}function Sc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ha.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of gc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=El(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,gc(e),t)||e.endAt&&!function(e,t,n){const r=El(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,gc(e),t))}(e,t)}function xc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function kc(e){return(t,n)=>{let r=!1;for(const i of gc(e)){const e=Ic(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ic(e,t,n){const r=e.field.isKeyField()?ha.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?sl(r,i):zo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zo()}}function Tc(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ga(t)?"-0":t}}function Cc(e){return{integerValue:""+e}}function Nc(e,t){return $a(t)?Cc(t):Tc(e,t)}class Ac{constructor(){this._=void 0}}function Pc(e,t,n){return e instanceof Lc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Dc?Mc(e,t):e instanceof Fc?jc(e,t):function(e,t){const n=Rc(e,t),r=Vc(n)+Vc(e.gt);return ul(n)&&ul(e.gt)?Cc(r):Tc(e.yt,r)}(e,t)}function Oc(e,t,n){return e instanceof Dc?Mc(e,t):e instanceof Fc?jc(e,t):n}function Rc(e,t){return e instanceof Uc?ul(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Lc extends Ac{}class Dc extends Ac{constructor(e){super(),this.elements=e}}function Mc(e,t){const n=zc(t);for(const t of e.elements)n.some((e=>rl(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Fc extends Ac{constructor(e){super(),this.elements=e}}function jc(e,t){let n=zc(t);for(const t of e.elements)n=n.filter((e=>!rl(e,t)));return{arrayValue:{values:n}}}class Uc extends Ac{constructor(e,t){super(),this.yt=e,this.gt=t}}function Vc(e){return Qa(e.integerValue||e.doubleValue)}function zc(e){return dl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class qc{constructor(e,t){this.field=e,this.transform=t}}class Bc{constructor(e,t){this.version=e,this.transformResults=t}}class Gc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gc}static exists(e){return new Gc(void 0,e)}static updateTime(e){return new Gc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $c(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Wc{}function Hc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ru(e.key,Gc.none()):new Zc(e.key,e.data,Gc.none());{const n=e.data,r=Zl.empty();let i=new Kl(da.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Xc(e.key,r,new Jl(i.toArray()),Gc.none())}}function Kc(e,t,n){e instanceof Zc?function(e,t,n){const r=e.value.clone(),i=tu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xc?function(e,t,n){if(!$c(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=tu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(eu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qc(e,t,n,r){return e instanceof Zc?function(e,t,n,r){if(!$c(e.precondition,t))return n;const i=e.value.clone(),s=nu(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Xc?function(e,t,n,r){if(!$c(e.precondition,t))return n;const i=nu(e.fieldTransforms,r,t),s=t.data;return s.setAll(eu(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return $c(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Yc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Rc(r.transform,e||null);null!=i&&(null===n&&(n=Zl.empty()),n.set(r.field,i))}return n||null}function Jc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ia(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Dc&&t instanceof Dc||e instanceof Fc&&t instanceof Fc?ia(e.elements,t.elements,rl):e instanceof Uc&&t instanceof Uc?rl(e.gt,t.gt):e instanceof Lc&&t instanceof Lc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Zc extends Wc{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xc extends Wc{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function eu(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function tu(e,t,n){const r=new Map;qo(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Oc(o,a,n[i]))}return r}function nu(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Pc(e,s,t))}return r}class ru extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iu extends Wc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class su{constructor(e){this.count=e}}var ou,au;function lu(e){switch(e){default:return zo();case Go.CANCELLED:case Go.UNKNOWN:case Go.DEADLINE_EXCEEDED:case Go.RESOURCE_EXHAUSTED:case Go.INTERNAL:case Go.UNAVAILABLE:case Go.UNAUTHENTICATED:return!1;case Go.INVALID_ARGUMENT:case Go.NOT_FOUND:case Go.ALREADY_EXISTS:case Go.PERMISSION_DENIED:case Go.FAILED_PRECONDITION:case Go.ABORTED:case Go.OUT_OF_RANGE:case Go.UNIMPLEMENTED:case Go.DATA_LOSS:return!0}}function cu(e){if(void 0===e)return jo("GRPC error has no .code"),Go.UNKNOWN;switch(e){case ou.OK:return Go.OK;case ou.CANCELLED:return Go.CANCELLED;case ou.UNKNOWN:return Go.UNKNOWN;case ou.DEADLINE_EXCEEDED:return Go.DEADLINE_EXCEEDED;case ou.RESOURCE_EXHAUSTED:return Go.RESOURCE_EXHAUSTED;case ou.INTERNAL:return Go.INTERNAL;case ou.UNAVAILABLE:return Go.UNAVAILABLE;case ou.UNAUTHENTICATED:return Go.UNAUTHENTICATED;case ou.INVALID_ARGUMENT:return Go.INVALID_ARGUMENT;case ou.NOT_FOUND:return Go.NOT_FOUND;case ou.ALREADY_EXISTS:return Go.ALREADY_EXISTS;case ou.PERMISSION_DENIED:return Go.PERMISSION_DENIED;case ou.FAILED_PRECONDITION:return Go.FAILED_PRECONDITION;case ou.ABORTED:return Go.ABORTED;case ou.OUT_OF_RANGE:return Go.OUT_OF_RANGE;case ou.UNIMPLEMENTED:return Go.UNIMPLEMENTED;case ou.DATA_LOSS:return Go.DATA_LOSS;default:return zo()}}(au=ou||(ou={}))[au.OK=0]="OK",au[au.CANCELLED=1]="CANCELLED",au[au.UNKNOWN=2]="UNKNOWN",au[au.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",au[au.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",au[au.NOT_FOUND=5]="NOT_FOUND",au[au.ALREADY_EXISTS=6]="ALREADY_EXISTS",au[au.PERMISSION_DENIED=7]="PERMISSION_DENIED",au[au.UNAUTHENTICATED=16]="UNAUTHENTICATED",au[au.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",au[au.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",au[au.ABORTED=10]="ABORTED",au[au.OUT_OF_RANGE=11]="OUT_OF_RANGE",au[au.UNIMPLEMENTED=12]="UNIMPLEMENTED",au[au.INTERNAL=13]="INTERNAL",au[au.UNAVAILABLE=14]="UNAVAILABLE",au[au.DATA_LOSS=15]="DATA_LOSS";class uu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){za(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return qa(this.inner)}size(){return this.innerSize}}const du=new $l(ha.comparator);function hu(){return du}const fu=new $l(ha.comparator);function pu(...e){let t=fu;for(const n of e)t=t.insert(n.key,n);return t}function mu(e){let t=fu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function gu(){return vu()}function yu(){return vu()}function vu(){return new uu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const wu=new $l(ha.comparator),bu=new Kl(ha.comparator);function _u(...e){let t=bu;for(const n of e)t=t.add(n);return t}const Eu=new Kl(ra);function Su(){return Eu}class xu{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new xu(aa.min(),r,Su(),hu(),_u())}}class ku{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ku(n,t,_u(),_u(),_u())}}class Iu{constructor(e,t,n,r){this.It=e,this.removedTargetIds=t,this.key=n,this.Tt=r}}class Tu{constructor(e,t){this.targetId=e,this.Et=t}}class Cu{constructor(e,t,n=Wa.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Nu{constructor(){this.At=0,this.Rt=Ou(),this.bt=Wa.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=_u(),t=_u(),n=_u();return this.Rt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:zo()}})),new ku(this.bt,this.Pt,e,t,n)}xt(){this.vt=!1,this.Rt=Ou()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Au{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=hu(),this.qt=Pu(),this.Ut=new Kl(ra)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,(t=>{const n=this.Wt(t);switch(e.state){case 0:this.zt(t)&&n.Dt(e.resumeToken);break;case 1:n.Mt(),n.Vt||n.xt(),n.Dt(e.resumeToken);break;case 2:n.Mt(),n.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(n.Ft(),n.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),n.Dt(e.resumeToken));break;default:zo()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach(((e,n)=>{this.zt(n)&&t(n)}))}Jt(e){const t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){const e=r.target;if(sc(e))if(0===n){const n=new ha(e.path);this.Qt(t,n,ec.newNoDocument(n,aa.min()))}else qo(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach(((n,r)=>{const i=this.Yt(r);if(i){if(n.current&&sc(i.target)){const t=new ha(i.target.path);null!==this.Lt.get(t)||this.te(r,t)||this.Qt(r,t,ec.newNoDocument(t,e))}n.St&&(t.set(r,n.Ct()),n.xt())}}));let n=_u();this.qt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Yt(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Lt.forEach(((t,n)=>n.setReadTime(e)));const r=new xu(e,t,this.Ut,this.Lt,n);return this.Lt=hu(),this.qt=Pu(),this.Ut=new Kl(ra),r}Gt(e,t){if(!this.zt(e))return;const n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,n){if(!this.zt(e))return;const r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Nu,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Kl(ra),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Fo("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Nu),this.$t.getRemoteKeysForTarget(e).forEach((t=>{this.Qt(e,t,null)}))}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Pu(){return new $l(ha.comparator)}function Ou(){return new $l(ha.comparator)}const Ru={asc:"ASCENDING",desc:"DESCENDING"},Lu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Du={and:"AND",or:"OR"};class Mu{constructor(e,t){this.databaseId=e,this.wt=t}}function Fu(e,t){return e.wt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ju(e,t){return e.wt?t.toBase64():t.toUint8Array()}function Uu(e,t){return Fu(e,t.toTimestamp())}function Vu(e){return qo(!!e),aa.fromTimestamp(function(e){const t=Ka(e);return new oa(t.seconds,t.nanos)}(e))}function zu(e,t){return function(e){return new ca(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function qu(e){const t=ca.fromString(e);return qo(ud(t)),t}function Bu(e,t){return zu(e.databaseId,t.path)}function Gu(e,t){const n=qu(t);if(n.get(1)!==e.databaseId.projectId)throw new $o(Go.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new $o(Go.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ha(Ku(n))}function $u(e,t){return zu(e.databaseId,t)}function Wu(e){const t=qu(e);return 4===t.length?ca.emptyPath():Ku(t)}function Hu(e){return new ca(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ku(e){return qo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Qu(e,t,n){return{name:Bu(e,t),fields:n.value.mapValue.fields}}function Yu(e,t,n){const r=Gu(e,t.name),i=Vu(t.updateTime),s=t.createTime?Vu(t.createTime):aa.min(),o=new Zl({mapValue:{fields:t.fields}}),a=ec.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ju(e,t){let n;if(t instanceof Zc)n={update:Qu(e,t.key,t.value)};else if(t instanceof ru)n={delete:Bu(e,t.key)};else if(t instanceof Xc)n={update:Qu(e,t.key,t.data),updateMask:cd(t.fieldMask)};else{if(!(t instanceof iu))return zo();n={verify:Bu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Lc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Dc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Uc)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw zo()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Uu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zo()}(e,t.precondition)),n}function Zu(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Gc.updateTime(Vu(e.updateTime)):void 0!==e.exists?Gc.exists(e.exists):Gc.none()}(t.currentDocument):Gc.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)qo("REQUEST_TIME"===t.setToServerValue),n=new Lc;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Dc(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Fc(e)}else"increment"in t?n=new Uc(e,t.increment):zo();const r=da.fromServerFormat(t.fieldPath);return new qc(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Gu(e,t.update.name),s=new Zl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Jl(t.map((e=>da.fromServerFormat(e))))}(t.updateMask);return new Xc(i,s,e,n,r)}return new Zc(i,s,n,r)}if(t.delete){const r=Gu(e,t.delete);return new ru(r,n)}if(t.verify){const r=Gu(e,t.verify);return new iu(r,n)}return zo()}function Xu(e,t){return{documents:[$u(e,t.path)]}}function ed(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=$u(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=$u(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return ld(Il.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:od(e.field),direction:rd(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.wt||Ba(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function td(e){let t=Wu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){qo(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=nd(e);return t instanceof Il&&Nl(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Bl(ad(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ba(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new _l(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new _l(n,t)}(n.endAt)),uc(t,i,o,s,a,"F",l,c)}function nd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ad(e.unaryFilter.field);return kl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ad(e.unaryFilter.field);return kl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ad(e.unaryFilter.field);return kl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ad(e.unaryFilter.field);return kl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zo()}}(e):void 0!==e.fieldFilter?function(e){return kl.create(ad(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Il.create(e.compositeFilter.filters.map((e=>nd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return zo()}}(e.compositeFilter.op))}(e):zo()}function rd(e){return Ru[e]}function id(e){return Lu[e]}function sd(e){return Du[e]}function od(e){return{fieldPath:e.canonicalString()}}function ad(e){return da.fromServerFormat(e.fieldPath)}function ld(e){return e instanceof kl?function(e){if("=="===e.op){if(fl(e.value))return{unaryFilter:{field:od(e.field),op:"IS_NAN"}};if(hl(e.value))return{unaryFilter:{field:od(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fl(e.value))return{unaryFilter:{field:od(e.field),op:"IS_NOT_NAN"}};if(hl(e.value))return{unaryFilter:{field:od(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:od(e.field),op:id(e.op),value:e.value}}}(e):e instanceof Il?function(e){const t=e.getFilters().map((e=>ld(e)));return 1===t.length?t[0]:{compositeFilter:{op:sd(e.op),filters:t}}}(e):zo()}function cd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ud(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function dd(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=fd(t)),t=hd(e.get(n),t);return fd(t)}function hd(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function fd(e){return e+""}function pd(e){const t=e.length;if(qo(t>=2),2===t)return qo(""===e.charAt(0)&&""===e.charAt(1)),ca.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&zo(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:zo()}s=t+2}return new ca(r)}const md=["userId","batchId"];function gd(e,t){return[e,dd(t)]}function yd(e,t,n){return[e,dd(t),n]}const vd={},wd=["prefixPath","collectionGroup","readTime","documentId"],bd=["prefixPath","collectionGroup","documentId"],_d=["collectionGroup","readTime","prefixPath","documentId"],Ed=["canonicalId","targetId"],Sd=["targetId","path"],xd=["path","targetId"],kd=["collectionId","parent"],Id=["indexId","uid"],Td=["uid","sequenceNumber"],Cd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Nd=["indexId","uid","orderedDocumentKey"],Ad=["userId","collectionPath","documentId"],Pd=["userId","collectionPath","largestBatchId"],Od=["userId","collectionGroup","largestBatchId"],Rd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ld=[...Rd,"documentOverlays"],Dd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Md=Dd,Fd=[...Md,"indexConfiguration","indexState","indexEntries"];class jd extends Sa{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Ud(e,t){const n=Bo(e);return Ta.M(n.se,t)}class Vd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&Kc(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Qc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Qc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=yu();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Hc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(aa.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),_u())}isEqual(e){return this.batchId===e.batchId&&ia(this.mutations,e.mutations,((e,t)=>Jc(e,t)))&&ia(this.baseMutations,e.baseMutations,((e,t)=>Jc(e,t)))}}class zd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){qo(e.mutations.length===n.length);let r=wu;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new zd(e,t,n,r)}}class qd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bd{constructor(e,t,n,r,i=aa.min(),s=aa.min(),o=Wa.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Bd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Bd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Gd{constructor(e){this.ie=e}}function $d(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Wd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Bu(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Fu(e,t.version.toTimestamp()),createTime:Fu(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Hd(t.version)};else{if(!t.isUnknownDocument())return zo();r.unknownDocument={path:n.path.toArray(),version:Hd(t.version)}}return r}function Wd(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Hd(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Kd(e){const t=new oa(e.seconds,e.nanoseconds);return aa.fromTimestamp(t)}function Qd(e,t){const n=(t.baseMutations||[]).map((t=>Zu(e.ie,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>Zu(e.ie,t))),i=oa.fromMillis(t.localWriteTimeMs);return new Vd(t.batchId,i,n,r)}function Yd(e){const t=Kd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Kd(e.lastLimboFreeSnapshotVersion):aa.min();let r;var i;return void 0!==e.query.documents?(qo(1===(i=e.query).documents.length),r=yc(dc(Wu(i.documents[0])))):r=function(e){return yc(td(e))}(e.query),new Bd(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Wa.fromBase64String(e.resumeToken))}function Jd(e,t){const n=Hd(t.snapshotVersion),r=Hd(t.lastLimboFreeSnapshotVersion);let i;i=sc(t.target)?Xu(e.ie,t.target):ed(e.ie,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:rc(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zd(e){const t=td({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wc(t,t.limit,"L"):t}function Xd(e,t){return new qd(t.largestBatchId,Zu(e.ie,t.overlayMutation))}function eh(e,t){const n=t.path.lastSegment();return[e,dd(t.path.popLast()),n]}function th(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Hd(r.readTime),documentKey:dd(r.documentKey.path),largestBatchId:r.largestBatchId}}class nh{getBundleMetadata(e,t){return rh(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Kd(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return rh(e).put({bundleId:(n=t).id,createTime:Hd(Vu(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return ih(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:Zd(t.bundledQuery),readTime:Kd(t.readTime)};var t}))}saveNamedQuery(e,t){return ih(e).put(function(e){return{name:e.name,readTime:Hd(Vu(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function rh(e){return Ud(e,"bundles")}function ih(e){return Ud(e,"namedQueries")}class sh{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){const n=t.uid||"";return new sh(e,n)}getOverlay(e,t){return oh(e).get(eh(this.userId,t)).next((e=>e?Xd(this.yt,e):null))}getOverlays(e,t){const n=gu();return ka.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new qd(t,i);r.push(this.oe(e,s))})),ka.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(dd(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(oh(e).Y("collectionPathOverlayIndex",r))})),ka.waitFor(i)}getOverlaysForCollection(e,t,n){const r=gu(),i=dd(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return oh(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Xd(this.yt,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=gu();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return oh(e).Z({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Xd(this.yt,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}oe(e,t){return oh(e).put(function(e,t,n){const[r,i,s]=eh(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ju(e.ie,n.mutation)}}(this.yt,this.userId,t))}}function oh(e){return Ud(e,"documentOverlays")}class ah{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Qa(e.integerValue));else if("doubleValue"in e){const n=Qa(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),Ga(n)?t.le(0):t.le(n))}else if("timestampValue"in e){const n=e.timestampValue;this.he(t,20),"string"==typeof n?t.fe(n):(t.fe(`${n.seconds||""}`),t.le(n.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Ya(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.he(t,45),t.le(n.latitude||0),t.le(n.longitude||0)}else"mapValue"in e?gl(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):zo()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const n=e.fields||{};this.he(t,55);for(const e of Object.keys(n))this.de(e,t),this.ce(n[e],t)}ye(e,t){const n=e.values||[];this.he(t,50);for(const e of n)this.ce(e,t)}me(e,t){this.he(t,37),ha.fromName(e).path.forEach((e=>{this.he(t,60),this.pe(e,t)}))}he(e,t){e.le(t)}_e(e){e.le(2)}}function lh(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ch(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=lh(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ah.Ie=new ah;class uh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ee(n.value),n=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.be(n.value),n=t.next();this.Pe()}ve(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ee(e);else if(e<2048)this.Ee(960|e>>>6),this.Ee(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|e>>>12),this.Ee(128|63&e>>>6),this.Ee(128|63&e);else{const e=t.codePointAt(0);this.Ee(240|e>>>18),this.Ee(128|63&e>>>12),this.Ee(128|63&e>>>6),this.Ee(128|63&e)}}this.Ae()}Ve(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.be(e);else if(e<2048)this.be(960|e>>>6),this.be(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.be(480|e>>>12),this.be(128|63&e>>>6),this.be(128|63&e);else{const e=t.codePointAt(0);this.be(240|e>>>18),this.be(128|63&e>>>12),this.be(128|63&e>>>6),this.be(128|63&e)}}this.Pe()}Se(e){const t=this.De(e),n=ch(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}xe(e){const t=this.De(e),n=ch(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class dh{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class hh{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class fh{constructor(){this.$e=new uh,this.Be=new dh(this.$e),this.Le=new hh(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class ph{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new ph(this.indexId,this.documentKey,this.arrayValue,n)}}function mh(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=gh(e.arrayValue,t.arrayValue),0!==n?n:(n=gh(e.directionalValue,t.directionalValue),0!==n?n:ha.comparator(e.documentKey,t.documentKey)))}function gh(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class yh{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const e=t;e.isInequality()?this.Qe=e:this.Ge.push(e)}}je(e){qo(e.collectionGroup===this.collectionId);const t=pa(e);if(void 0!==t&&!this.We(t))return!1;const n=ma(e);let r=0,i=0;for(;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){const e=n[r];if(!this.ze(this.Qe,e)||!this.He(this.Ke[i++],e))return!1;++r}for(;r<n.length;++r){const e=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],e))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function vh(e){var t,n;if(qo(e instanceof kl||e instanceof Il),e instanceof kl){if(e instanceof Vl){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>kl.create(e.field,"==",t))))||[];return Il.create(r,"or")}return e}const r=e.filters.map((e=>vh(e)));return Il.create(r,e.op)}function wh(e){if(0===e.getFilters().length)return[];const t=Sh(vh(e));return qo(Eh(t)),bh(t)||_h(t)?[t]:t.getFilters()}function bh(e){return e instanceof kl}function _h(e){return e instanceof Il&&Nl(e)}function Eh(e){return bh(e)||_h(e)||function(e){if(e instanceof Il&&Cl(e)){for(const t of e.getFilters())if(!bh(t)&&!_h(t))return!1;return!0}return!1}(e)}function Sh(e){if(qo(e instanceof kl||e instanceof Il),e instanceof kl)return e;if(1===e.filters.length)return Sh(e.filters[0]);const t=e.filters.map((e=>Sh(e)));let n=Il.create(t,e.op);return n=Ih(n),Eh(n)?n:(qo(n instanceof Il),qo(Tl(n)),qo(n.filters.length>1),n.filters.reduce(((e,t)=>xh(e,t))))}function xh(e,t){let n;return qo(e instanceof kl||e instanceof Il),qo(t instanceof kl||t instanceof Il),n=e instanceof kl?t instanceof kl?function(e,t){return Il.create([e,t],"and")}(e,t):kh(e,t):t instanceof kl?kh(t,e):function(e,t){if(qo(e.filters.length>0&&t.filters.length>0),Tl(e)&&Tl(t))return Rl(e,t.getFilters());const n=Cl(e)?e:t,r=Cl(e)?t:e,i=n.filters.map((e=>xh(e,r)));return Il.create(i,"or")}(e,t),Ih(n)}function kh(e,t){if(Tl(t))return Rl(t,e.getFilters());{const n=t.filters.map((t=>xh(e,t)));return Il.create(n,"or")}}function Ih(e){if(qo(e instanceof kl||e instanceof Il),e instanceof kl)return e;const t=e.getFilters();if(1===t.length)return Ih(t[0]);if(Al(e))return e;const n=t.map((e=>Ih(e))),r=[];return n.forEach((t=>{t instanceof kl?r.push(t):t instanceof Il&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Il.create(r,e.op)}class Th{constructor(){this.Je=new Ch}addToCollectionParentIndex(e,t){return this.Je.add(t),ka.resolve()}getCollectionParents(e,t){return ka.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ka.resolve()}deleteFieldIndex(e,t){return ka.resolve()}getDocumentsMatchingTarget(e,t){return ka.resolve(null)}getIndexType(e,t){return ka.resolve(0)}getFieldIndexes(e,t){return ka.resolve([])}getNextCollectionGroupToUpdate(e){return ka.resolve(null)}getMinOffset(e,t){return ka.resolve(ba.min())}getMinOffsetFromCollectionGroup(e,t){return ka.resolve(ba.min())}updateCollectionGroup(e,t,n){return ka.resolve()}updateIndexEntries(e,t){return ka.resolve()}}class Ch{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Kl(ca.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Kl(ca.comparator)).toArray()}}const Nh=new Uint8Array(0);class Ah{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new Ch,this.Xe=new uu((e=>rc(e)),((e,t)=>ic(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.Ye.add(t)}));const i={collectionId:n,parent:dd(r)};return Ph(e).put(i)}return ka.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[sa(t),""],!1,!0);return Ph(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(pd(r.parent))}return n}))}addFieldIndex(e,t){const n=Rh(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Lh(e);return i.next((e=>{n.put(th(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Rh(e),r=Lh(e),i=Oh(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=Oh(e);let r=!0;const i=new Map;return ka.forEach(this.Ze(t),(t=>this.tn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=_u();const r=[];return ka.forEach(i,((i,s)=>{var o;Fo("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`} to execute ${rc(t)}`);const a=function(e,t){const n=pa(t);if(void 0===n)return null;for(const t of oc(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(s,i),l=function(e,t){const n=new Map;for(const r of ma(t))for(const t of oc(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of ma(t)){const t=0===i.kind?ac(e,i.fieldPath,e.startAt):lc(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new _l(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of ma(t)){const t=0===i.kind?lc(e,i.fieldPath,e.endAt):ac(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new _l(n,r)}(s,i),d=this.en(i,s,c),h=this.en(i,s,u),f=this.nn(i,s,l),p=this.sn(i.indexId,a,d,c.inclusive,h,u.inclusive,f);return ka.forEach(p,(i=>n.J(i,t.limit).next((t=>{t.forEach((t=>{const n=ha.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return ka.resolve(null)}))}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:wh(Il.create(e.filters,"and")).map((t=>nc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.Xe.set(e,t),t)}sn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.rn(t[u/l]):Nh,d=this.on(e,a,n[u%l],r),h=this.un(e,a,i[u%l],s),f=o.map((t=>this.on(e,a,t,!0)));c.push(...this.createRange(d,h,f))}return c}on(e,t,n,r){const i=new ph(e,ha.empty(),t,n);return r?i:i.Ue()}un(e,t,n,r){const i=new ph(e,ha.empty(),t,n);return r?i.Ue():i}tn(e,t){const n=new yh(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.je(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.Ze(t);return ka.forEach(r,(t=>this.tn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Kl(da.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}cn(e,t){const n=new fh;for(const r of ma(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.qe(r.kind);ah.Ie.ue(e,i)}return n.Fe()}rn(e){const t=new fh;return ah.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const n=new fh;return ah.Ie.ue(cl(this.databaseId,t),n.qe(function(e){const t=ma(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}nn(e,t,n){if(null===n)return[];let r=[];r.push(new fh);let i=0;for(const s of ma(e)){const e=n[i++];for(const n of r)if(this.hn(t,s.fieldPath)&&dl(e))r=this.ln(r,s,e);else{const t=n.qe(s.kind);ah.Ie.ue(e,t)}}return this.fn(r)}en(e,t,n){return this.nn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Fe();return t}ln(e,t,n){const r=[...e],i=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new fh;r.seed(n.Fe()),ah.Ie.ue(e,r.qe(t.kind)),i.push(r)}return i}hn(e,t){return!!e.filters.find((e=>e instanceof kl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Rh(e),r=Lh(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return ka.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new ya(t.sequenceNumber,new ba(Kd(t.readTime),new ha(pd(t.documentKey)),t.largestBatchId)):ya.empty(),r=e.fields.map((([e,t])=>new ga(da.fromServerFormat(e),t)));return new fa(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ra(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Rh(e),i=Lh(e);return this.dn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>ka.forEach(t,(t=>i.put(th(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return ka.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?ka.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),ka.forEach(i,(n=>this._n(e,t,n).next((t=>{const i=this.wn(r,n);return t.isEqual(i)?ka.resolve():this.mn(e,r,n,t,i)})))))))}))}gn(e,t,n,r){return Oh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}yn(e,t,n,r){return Oh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}_n(e,t,n){const r=Oh(e);let i=new Kl(mh);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},((e,r)=>{i=i.add(new ph(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}wn(e,t){let n=new Kl(mh);const r=this.cn(t,e);if(null==r)return n;const i=pa(t);if(null!=i){const s=e.data.field(i.fieldPath);if(dl(s))for(const i of s.arrayValue.values||[])n=n.add(new ph(t.indexId,e.key,this.rn(i),r))}else n=n.add(new ph(t.indexId,e.key,Nh,r));return n}mn(e,t,n,r,i){Fo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Yl(s),l=Yl(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Yl(o)):t?(i(a),a=Yl(s)):(a=Yl(s),l=Yl(o))}}(r,i,mh,(r=>{s.push(this.gn(e,t,n,r))}),(r=>{s.push(this.yn(e,t,n,r))})),ka.waitFor(s)}dn(e){let t=1;return Lh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>mh(e,t))).filter(((e,t,n)=>!t||0!==mh(e,n[t-1])));const r=[];r.push(e);for(const i of n){const n=mh(i,e),s=mh(i,t);if(0===n)r[0]=e.Ue();else if(n>0&&s<0)r.push(i),r.push(i.Ue());else if(s>0)break}r.push(t);const i=[];for(let e=0;e<r.length;e+=2){if(this.pn(r[e],r[e+1]))return[];const t=[r[e].indexId,this.uid,r[e].arrayValue,r[e].directionalValue,Nh,[]],n=[r[e+1].indexId,this.uid,r[e+1].arrayValue,r[e+1].directionalValue,Nh,[]];i.push(IDBKeyRange.bound(t,n))}return i}pn(e,t){return mh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Dh)}getMinOffset(e,t){return ka.mapArray(this.Ze(t),(t=>this.tn(e,t).next((e=>e||zo())))).next(Dh)}}function Ph(e){return Ud(e,"collectionParents")}function Oh(e){return Ud(e,"indexEntries")}function Rh(e){return Ud(e,"indexConfiguration")}function Lh(e){return Ud(e,"indexState")}function Dh(e){qo(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;_a(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ba(t.readTime,t.documentKey,n)}const Mh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Fh(e,Fh.DEFAULT_COLLECTION_PERCENTILE,Fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jh(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{qo(1===a)})));const c=[];for(const e of n.mutations){const r=yd(t,e.key.path,n.batchId);s.push(i.delete(r)),c.push(e.key)}return ka.waitFor(s).next((()=>c))}function Uh(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw zo();t=e.noDocument}return JSON.stringify(t).length}Fh.DEFAULT_COLLECTION_PERCENTILE=10,Fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fh.DEFAULT=new Fh(41943040,Fh.DEFAULT_COLLECTION_PERCENTILE,Fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fh.DISABLED=new Fh(-1,0,0);class Vh{constructor(e,t,n,r){this.userId=e,this.yt=t,this.indexManager=n,this.referenceDelegate=r,this.In={}}static re(e,t,n,r){qo(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Vh(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qh(e).Z({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Bh(e),s=qh(e);return s.add({}).next((o=>{qo("number"==typeof o);const a=new Vd(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Ju(e.ie,t))),i=n.mutations.map((t=>Ju(e.ie,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.yt,this.userId,a),c=[];let u=new Kl(((e,t)=>ra(e.canonicalString(),t.canonicalString())));for(const e of r){const t=yd(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,vd))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.In[o]=a.keys()})),ka.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return qh(e).get(t).next((e=>e?(qo(e.userId===this.userId),Qd(this.yt,e)):null))}Tn(e,t){return this.In[t]?ka.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.In[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return qh(e).Z({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(qo(t.batchId>=n),i=Qd(this.yt,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return qh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qh(e).W("userMutationsIndex",t).next((e=>e.map((e=>Qd(this.yt,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=gd(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Bh(e).Z({range:r},((n,r,s)=>{const[o,a,l]=n,c=pd(a);if(o===this.userId&&t.path.isEqual(c))return qh(e).get(l).next((e=>{if(!e)throw zo();qo(e.userId===this.userId),i.push(Qd(this.yt,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Kl(ra);const r=[];return t.forEach((t=>{const i=gd(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Bh(e).Z({range:s},((e,r,i)=>{const[s,o,a]=e,l=pd(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),ka.waitFor(r).next((()=>this.En(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=gd(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Kl(ra);return Bh(e).Z({range:s},((e,t,i)=>{const[s,a,l]=e,c=pd(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.En(e,o)))}En(e,t){const n=[],r=[];return t.forEach((t=>{r.push(qh(e).get(t).next((e=>{if(null===e)throw zo();qo(e.userId===this.userId),n.push(Qd(this.yt,e))})))})),ka.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return jh(e.se,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.An(t.batchId)})),ka.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ka.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Bh(e).Z({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=pd(e[1]);r.push(t)}else n.done()})).next((()=>{qo(0===r.length)}))}))}containsKey(e,t){return zh(e,this.userId,t)}Rn(e){return Gh(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function zh(e,t,n){const r=gd(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Bh(e).Z({range:s,X:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function qh(e){return Ud(e,"mutations")}function Bh(e){return Ud(e,"documentMutations")}function Gh(e){return Ud(e,"mutationQueues")}class $h{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new $h(0)}static vn(){return new $h(-1)}}class Wh{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next((t=>{const n=new $h(t.highestTargetId);return t.highestTargetId=n.next(),this.Sn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Vn(e).next((e=>aa.fromTimestamp(new oa(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Vn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Vn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Sn(e,r))))}addTargetData(e,t){return this.Dn(e,t).next((()=>this.Vn(e).next((n=>(n.targetCount+=1,this.Cn(t,n),this.Sn(e,n))))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Hh(e).delete(t.targetId))).next((()=>this.Vn(e))).next((t=>(qo(t.targetCount>0),t.targetCount-=1,this.Sn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Hh(e).Z(((s,o)=>{const a=Yd(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>ka.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Hh(e).Z(((e,n)=>{const r=Yd(n);t(r)}))}Vn(e){return Kh(e).get("targetGlobalKey").next((e=>(qo(null!==e),e)))}Sn(e,t){return Kh(e).put("targetGlobalKey",t)}Dn(e,t){return Hh(e).put(Jd(this.yt,t))}Cn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Vn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=rc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Hh(e).Z({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Yd(n);ic(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Qh(e);return t.forEach((t=>{const s=dd(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),ka.waitFor(r)}removeMatchingKeys(e,t,n){const r=Qh(e);return ka.forEach(t,(t=>{const i=dd(t.path);return ka.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Qh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Qh(e);let i=_u();return r.Z({range:n,X:!0},((e,t,n)=>{const r=pd(e[1]),s=new ha(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=dd(t.path),r=IDBKeyRange.bound([n],[sa(n)],!1,!0);let i=0;return Qh(e).Z({index:"documentTargetsIndex",X:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}ne(e,t){return Hh(e).get(t).next((e=>e?Yd(e):null))}}function Hh(e){return Ud(e,"targets")}function Kh(e){return Ud(e,"targetGlobal")}function Qh(e){return Ud(e,"targetDocuments")}function Yh([e,t],[n,r]){const i=ra(e,n);return 0===i?ra(t,r):i}class Jh{constructor(e){this.xn=e,this.buffer=new Kl(Yh),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Yh(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Zh{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){Fo("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Mn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Aa(e)?Fo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await xa(e)}await this.Fn(3e5)}))}}class Xh{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ka.resolve(Fa.at);const n=new Jh(t);return this.$n.forEachTarget(e,(e=>n.On(e.sequenceNumber))).next((()=>this.$n.Ln(e,(e=>n.On(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.$n.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fo("LruGarbageCollector","Garbage collection skipped; disabled"),ka.resolve(Mh)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Fo("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mh):this.qn(e,t)))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Fo("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Mo()<=xt.DEBUG&&Fo("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),ka.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class ef{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Xh(e,t)}(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Un(e){let t=0;return this.Ln(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,((e,n)=>t(n)))}addReference(e,t,n){return tf(e,n)}removeReference(e,t,n){return tf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return tf(e,t)}Gn(e,t){return function(e,t){let n=!1;return Gh(e).tt((r=>zh(e,r,t).next((e=>(e&&(n=!0),ka.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Kn(e,((s,o)=>{if(o<=t){const t=this.Gn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,aa.min()),Qh(e).delete([0,dd(s.path)]))))}));r.push(t)}})).next((()=>ka.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return tf(e,t)}Kn(e,t){const n=Qh(e);let r,i=Fa.at;return n.Z({index:"documentTargetsIndex"},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Fa.at&&t(new ha(pd(r)),i),i=o,r=s):i=Fa.at})).next((()=>{i!==Fa.at&&t(new ha(pd(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tf(e,t){return Qh(e).put(function(e,t){return{targetId:0,path:dd(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class nf{constructor(){this.changes=new uu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ec.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ka.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rf{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return lf(e).put(n)}removeEntry(e,t,n){return lf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Wd(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Qn(e,n))))}getEntry(e,t){let n=ec.newInvalidDocument(t);return lf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(cf(t))},((e,r)=>{n=this.jn(t,r)})).next((()=>n))}Wn(e,t){let n={size:0,document:ec.newInvalidDocument(t)};return lf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(cf(t))},((e,r)=>{n={document:this.jn(t,r),size:Uh(r)}})).next((()=>n))}getEntries(e,t){let n=hu();return this.zn(e,t,((e,t)=>{const r=this.jn(e,t);n=n.insert(e,r)})).next((()=>n))}Hn(e,t){let n=hu(),r=new $l(ha.comparator);return this.zn(e,t,((e,t)=>{const i=this.jn(e,t);n=n.insert(e,i),r=r.insert(e,Uh(t))})).next((()=>({documents:n,Jn:r})))}zn(e,t,n){if(t.isEmpty())return ka.resolve();let r=new Kl(df);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(cf(r.first()),cf(r.last())),s=r.getIterator();let o=s.getNext();return lf(e).Z({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=ha.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&df(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.j(cf(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getAllFromCollection(e,t,n){const r=[t.popLast().toArray(),t.lastSegment(),Wd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],i=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lf(e).W(IDBKeyRange.bound(r,i,!0)).next((e=>{let t=hu();for(const n of e){const e=this.jn(ha.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);t=t.insert(e.key,e)}return t}))}getAllFromCollectionGroup(e,t,n,r){let i=hu();const s=uf(t,n),o=uf(t,ba.max());return lf(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.jn(ha.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new of(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return af(e).get("remoteDocumentGlobalKey").next((e=>(qo(!!e),e)))}Qn(e,t){return af(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Yu(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ha.fromSegments(t.noDocument.path),r=Kd(t.noDocument.readTime);n=ec.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return zo();{const e=ha.fromSegments(t.unknownDocument.path),r=Kd(t.unknownDocument.version);n=ec.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new oa(e[0],e[1]);return aa.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!e.isNoDocument()||!e.version.isEqual(aa.min()))return e}return ec.newInvalidDocument(e)}}function sf(e){return new rf(e)}class of extends nf{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new uu((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Kl(((e,t)=>ra(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Xn.get(i);if(t.push(this.Yn.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=$d(this.Yn.yt,s);r=r.add(i.path.popLast());const l=Uh(a);n+=l-o.size,t.push(this.Yn.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=$d(this.Yn.yt,s.convertToNoDocument(aa.min()));t.push(this.Yn.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Yn.updateMetadata(e,n)),ka.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next((e=>(this.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next((({documents:e,Jn:t})=>(t.forEach(((t,n)=>{this.Xn.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function af(e){return Ud(e,"remoteDocumentGlobal")}function lf(e){return Ud(e,"remoteDocumentsV14")}function cf(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function uf(e,t){const n=t.documentKey.path.toArray();return[e,Wd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function df(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=ra(n[e],r[e]),i)return i;return i=ra(n.length,r.length),i||(i=ra(n[n.length-2],r[r.length-2]),i||ra(n[n.length-1],r[r.length-1]))}class hf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ff{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Qc(n.mutation,e,Jl.empty(),oa.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,_u()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=_u()){const r=gu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=pu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=gu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,_u())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=hu();const s=vu(),o=vu();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Xc)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Qc(o.mutation,t,o.mutation.getFieldMask(),oa.now())):s.set(t.key,Jl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new hf(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=vu();let r=new $l(((e,t)=>e-t)),i=_u();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Jl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||_u()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=yu();l.forEach((e=>{if(!i.has(e)){const r=Hc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return ka.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return ha.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ka.resolve(gu());let o=-1,a=i;return s.next((t=>ka.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ka.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,_u()))).next((e=>({batchId:o,changes:mu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ha(t)).next((e=>{let t=pu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=pu();return this.indexManager.getCollectionParents(e,r).next((s=>ka.forEach(s,(s=>{const o=function(e,t){return new cc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)))).next((e=>{e.forEach(((e,t)=>{const n=t.getKey();null===r.get(n)&&(r=r.insert(n,ec.newInvalidDocument(n)))}));let n=pu();return r.forEach(((r,i)=>{const s=e.get(r);void 0!==s&&Qc(s.mutation,i,Jl.empty(),oa.now()),Sc(t,i)&&(n=n.insert(r,i))})),n}))}}class pf{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ka.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Vu(n.createTime)}),ka.resolve()}getNamedQuery(e,t){return ka.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Zd(e.bundledQuery),readTime:Vu(e.readTime)}}(t)),ka.resolve()}}class mf{constructor(){this.overlays=new $l(ha.comparator),this.es=new Map}getOverlay(e,t){return ka.resolve(this.overlays.get(t))}getOverlays(e,t){const n=gu();return ka.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.oe(e,t,r)})),ka.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.es.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.es.delete(n)),ka.resolve()}getOverlaysForCollection(e,t,n){const r=gu(),i=t.length+1,s=new ha(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ka.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new $l(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=gu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=gu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return ka.resolve(o)}oe(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qd(t,n));let i=this.es.get(t);void 0===i&&(i=_u(),this.es.set(t,i)),this.es.set(t,i.add(n.key))}}class gf{constructor(){this.ns=new Kl(yf.ss),this.rs=new Kl(yf.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const n=new yf(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.cs(new yf(e,t))}hs(e,t){e.forEach((e=>this.removeReference(e,t)))}ls(e){const t=new ha(new ca([])),n=new yf(t,e),r=new yf(t,e+1),i=[];return this.rs.forEachInRange([n,r],(e=>{this.cs(e),i.push(e.key)})),i}fs(){this.ns.forEach((e=>this.cs(e)))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ha(new ca([])),n=new yf(t,e),r=new yf(t,e+1);let i=_u();return this.rs.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new yf(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yf{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ha.comparator(e.key,t.key)||ra(e._s,t._s)}static os(e,t){return ra(e._s,t._s)||ha.comparator(e.key,t.key)}}class vf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Kl(yf.ss)}checkEmpty(e){return ka.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Vd(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.gs=this.gs.add(new yf(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ka.resolve(s)}lookupMutationBatch(e,t){return ka.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ps(n),i=r<0?0:r;return ka.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ka.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ka.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yf(t,0),r=new yf(t,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([n,r],(e=>{const t=this.ys(e._s);i.push(t)})),ka.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Kl(ra);return t.forEach((e=>{const t=new yf(e,0),r=new yf(e,Number.POSITIVE_INFINITY);this.gs.forEachInRange([t,r],(e=>{n=n.add(e._s)}))})),ka.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ha.isDocumentKey(i)||(i=i.child(""));const s=new yf(new ha(i),0);let o=new Kl(ra);return this.gs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),s),ka.resolve(this.Is(o))}Is(e){const t=[];return e.forEach((e=>{const n=this.ys(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){qo(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let n=this.gs;return ka.forEach(t.mutations,(r=>{const i=new yf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.gs=n}))}An(e){}containsKey(e,t){const n=new yf(t,0),r=this.gs.firstAfterOrEqual(n);return ka.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ka.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wf{constructor(e){this.Es=e,this.docs=new $l(ha.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ka.resolve(n?n.document.mutableCopy():ec.newInvalidDocument(t))}getEntries(e,t){let n=hu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ec.newInvalidDocument(e))})),ka.resolve(n)}getAllFromCollection(e,t,n){let r=hu();const i=new ha(t.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||_a(wa(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return ka.resolve(r)}getAllFromCollectionGroup(e,t,n,r){zo()}As(e,t){return ka.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new bf(this)}getSize(e){return ka.resolve(this.size)}}class bf extends nf{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(n)})),ka.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class _f{constructor(e){this.persistence=e,this.Rs=new uu((e=>rc(e)),ic),this.lastRemoteSnapshotVersion=aa.min(),this.highestTargetId=0,this.bs=0,this.Ps=new gf,this.targetCount=0,this.vs=$h.Pn()}forEachTarget(e,t){return this.Rs.forEach(((e,n)=>t(n))),ka.resolve()}getLastRemoteSnapshotVersion(e){return ka.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ka.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ka.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),ka.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new $h(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ka.resolve()}updateTargetData(e,t){return this.Dn(t),ka.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ka.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Rs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Rs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),ka.waitFor(i).next((()=>r))}getTargetCount(e){return ka.resolve(this.targetCount)}getTargetData(e,t){const n=this.Rs.get(t)||null;return ka.resolve(n)}addMatchingKeys(e,t,n){return this.Ps.us(t,n),ka.resolve()}removeMatchingKeys(e,t,n){this.Ps.hs(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ka.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ka.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ps.ds(t);return ka.resolve(n)}containsKey(e,t){return ka.resolve(this.Ps.containsKey(t))}}class Ef{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fa(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new _f(this),this.indexManager=new Th,this.remoteDocumentCache=function(e){return new wf(e)}((e=>this.referenceDelegate.xs(e))),this.yt=new Gd(t),this.Ns=new pf(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Vs[e.toKey()];return n||(n=new vf(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,n){Fo("MemoryPersistence","Starting transaction:",e);const r=new Sf(this.Ss.next());return this.referenceDelegate.ks(),n(r).next((e=>this.referenceDelegate.Os(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ms(e,t){return ka.or(Object.values(this.Vs).map((n=>()=>n.containsKey(e,t))))}}class Sf extends Sa{constructor(e){super(),this.currentSequenceNumber=e}}class xf{constructor(e){this.persistence=e,this.Fs=new gf,this.$s=null}static Bs(e){return new xf(e)}get Ls(){if(this.$s)return this.$s;throw zo()}addReference(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),ka.resolve()}removeReference(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),ka.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ka.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach((e=>this.Ls.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ls.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ka.forEach(this.Ls,(n=>{const r=ha.fromPath(n);return this.qs(e,r).next((e=>{e||t.removeEntry(r,aa.min())}))})).next((()=>(this.$s=null,t.apply(e))))}updateLimboDocument(e,t){return this.qs(e,t).next((e=>{e?this.Ls.delete(t.toString()):this.Ls.add(t.toString())}))}xs(e){return 0}qs(e,t){return ka.or([()=>ka.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class kf{constructor(e){this.yt=e}$(e,t,n,r){const i=new Ia("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",md,{unique:!0}),e.createObjectStore("documentMutations")}(e),If(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=ka.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),If(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:aa.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",md,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return ka.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Us(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(i))))),n<7&&r>=7&&(s=s.next((()=>this.Gs(i)))),n<8&&r>=8&&(s=s.next((()=>this.Qs(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.js(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Ad});t.createIndex("collectionPathOverlayIndex",Pd,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Od,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:wd});t.createIndex("documentKeyIndex",bd),t.createIndex("collectionGroupIndex",_d)}(e))).next((()=>this.Ws(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.zs(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Id}).createIndex("sequenceNumberIndex",Td,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Cd}).createIndex("documentKeyIndex",Nd,{unique:!1})}(e)))),s}Ks(e){let t=0;return e.store("remoteDocuments").Z(((e,n)=>{t+=Uh(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Us(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>ka.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>ka.forEach(n,(n=>{qo(n.userId===t.userId);const r=Qd(this.yt,n);return jh(e,t.userId,r).next((()=>{}))}))))}))))}Gs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Z(((n,i)=>{const s=new ca(n),o=function(e){return[0,dd(e)]}(s);r.push(t.get(o).next((n=>n?ka.resolve():(n=>t.put({targetId:0,path:dd(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>ka.waitFor(r)))}))}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:kd});const n=t.store("collectionParents"),r=new Ch,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:dd(r)})}};return t.store("remoteDocuments").Z({X:!0},((e,t)=>{const n=new ca(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Z({X:!0},(([e,t,n],r)=>{const s=pd(t);return i(s.popLast())}))))}js(e){const t=e.store("targets");return t.Z(((e,n)=>{const r=Yd(n),i=Jd(this.yt,r);return t.put(i)}))}Ws(e,t){const n=t.store("remoteDocuments"),r=[];return n.Z(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new ha(ca.fromString(o.document.name).popFirst(5)):o.noDocument?ha.fromSegments(o.noDocument.path):o.unknownDocument?ha.fromSegments(o.unknownDocument.path):zo()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>ka.waitFor(r)))}zs(e,t){const n=t.store("mutations"),r=sf(this.yt),i=new Ef(xf.Bs,this.yt.ie);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:_u();Qd(this.yt,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),ka.forEach(n,((e,n)=>{const s=new Ro(n),o=sh.re(this.yt,s),a=i.getIndexManager(s),l=Vh.re(s,this.yt,a,i.referenceDelegate);return new ff(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new jd(t,Fa.at),e).next()}))}))}}function If(e){e.createObjectStore("targetDocuments",{keyPath:Sd}).createIndex("documentTargetsIndex",xd,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ed,{unique:!0}),e.createObjectStore("targetGlobal")}const Tf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Cf{constructor(e,t,n,r,i,s,o,a,l,c,u=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Hs=i,this.window=s,this.document=o,this.Js=l,this.Ys=c,this.Xs=u,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=e=>Promise.resolve(),!Cf.C())throw new $o(Go.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ef(this,r),this.ii=t+"main",this.yt=new Gd(a),this.ri=new Ta(this.ii,this.Xs,new kf(this.yt)),this.Cs=new Wh(this.referenceDelegate,this.yt),this.remoteDocumentCache=sf(this.yt),this.Ns=new nh,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===c&&jo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $o(Go.FAILED_PRECONDITION,Tf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Cs.getHighestSequenceNumber(e)))})).then((e=>{this.Ss=new Fa(e,this.Js)})).then((()=>{this.Ds=!0})).catch((e=>(this.ri&&this.ri.close(),Promise.reject(e))))}li(e){return this.si=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((async()=>{this.started&&await this.ui()})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Af(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable((()=>this.si(!1))))}))})).next((()=>this.di(e))).next((t=>this.isPrimary&&!t?this._i(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Aa(e))return Fo("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable((()=>this.si(e))),this.isPrimary=e}))}fi(e){return Nf(e).get("owner").next((e=>ka.resolve(this.mi(e))))}gi(e){return Af(e).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Ud(e,"clientMetadata");return t.W().next((e=>{const n=this.Ii(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return ka.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.oi)for(const t of e)this.oi.removeItem(this.Ti(t.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.ui().then((()=>this.yi())).then((()=>this.hi()))))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ka.resolve(!0):Nf(e).get("owner").next((t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new $o(Go.FAILED_PRECONDITION,Tf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Af(e).W().next((e=>void 0===this.Ii(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Fo("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new jd(e,Fa.at);return this._i(t).next((()=>this.gi(t)))})),this.ri.close(),this.Pi()}Ii(e,t){return e.filter((e=>this.pi(e.updateTimeMs,t)&&!this.Ei(e.clientId)))}vi(){return this.runTransaction("getActiveClients","readonly",(e=>Af(e).W().next((e=>this.Ii(e,18e5).map((e=>e.clientId))))))}get started(){return this.Ds}getMutationQueue(e,t){return Vh.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ah(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return sh.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,n){Fo("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.Xs)?Fd:14===s?Md:13===s?Dd:12===s?Ld:11===s?Rd:void zo();var s;let o;return this.ri.runTransaction(e,r,i,(r=>(o=new jd(r,this.Ss?this.Ss.next():Fa.at),"readwrite-primary"===t?this.fi(o).next((e=>!!e||this.di(o))).next((t=>{if(!t)throw jo(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable((()=>this.si(!1))),new $o(Go.FAILED_PRECONDITION,Ea);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.Vi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Vi(e){return Nf(e).get("owner").next((e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new $o(Go.FAILED_PRECONDITION,Tf)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nf(e).put("owner",t)}static C(){return Ta.C()}_i(e){const t=Nf(e);return t.get("owner").next((e=>this.mi(e)?(Fo("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ka.resolve()))}pi(e,t){const n=Date.now();return!(e<n-t||e>n&&(jo(`Detected an update time that is in the future: ${e} > ${n}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.ui())))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),!Be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Fo("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return jo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){jo("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nf(e){return Ud(e,"owner")}function Af(e){return Ud(e,"clientMetadata")}function Pf(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Of{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Si=n,this.Di=r}static Ci(e,t){let n=_u(),r=_u();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new Of(e,t.fromCache,n,r)}}class Rf{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.ki(e,t).next((i=>i||this.Oi(e,t,r,n))).next((n=>n||this.Mi(e,t)))}ki(e,t){if(hc(t))return ka.resolve(null);let n=yc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=wc(t,null,"F"),n=yc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=_u(...r);return this.Ni.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Fi(t,r);return this.$i(t,s,i,n.readTime)?this.ki(e,wc(t,null,"F")):this.Bi(e,s,t,n)}))))})))))}Oi(e,t,n,r){return hc(t)||r.isEqual(aa.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((i=>{const s=this.Fi(t,i);return this.$i(t,s,n,r)?this.Mi(e,t):(Mo()<=xt.DEBUG&&Fo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ec(t)),this.Bi(e,s,t,va(r,-1)))}))}Fi(e,t){let n=new Kl(kc(e));return t.forEach(((t,r)=>{Sc(e,r)&&(n=n.add(r))})),n}$i(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mi(e,t){return Mo()<=xt.DEBUG&&Fo("QueryEngine","Using full collection scan to execute query:",Ec(t)),this.Ni.getDocumentsMatchingQuery(e,t,ba.min())}Bi(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Lf{constructor(e,t,n,r){this.persistence=e,this.Li=t,this.yt=r,this.qi=new $l(ra),this.Ui=new uu((e=>rc(e)),ic),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(n)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ff(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.qi)))}}function Df(e,t,n,r){return new Lf(e,t,n,r)}async function Mf(e,t){const n=Bo(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Qi(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=_u();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ji:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Ff(e){const t=Bo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Cs.getLastRemoteSnapshotVersion(e)))}function jf(e,t,n){let r=_u(),i=_u();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=hu();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(aa.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Fo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Wi:r,zi:i}}))}function Uf(e,t){const n=Bo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Vf(e,t){const n=Bo(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Cs.getTargetData(e,t).next((i=>i?(r=i,ka.resolve(r)):n.Cs.allocateTargetId(e).next((i=>(r=new Bd(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}async function zf(e,t,n){const r=Bo(e),i=r.qi.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Aa(e))throw e;Fo("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.qi=r.qi.remove(t),r.Ui.delete(i.target)}function qf(e,t,n){const r=Bo(e);let i=aa.min(),s=_u();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=Bo(e),i=r.Ui.get(n);return void 0!==i?ka.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,yc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Li.getDocumentsMatchingQuery(e,t,n?i:aa.min(),n?s:_u()))).next((e=>($f(r,xc(t),e),{documents:e,Hi:s})))))}function Bf(e,t){const n=Bo(e),r=Bo(n.Cs),i=n.qi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ne(e,t).next((e=>e?e.target:null))))}function Gf(e,t){const n=Bo(e),r=n.Ki.get(t)||aa.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Gi.getAllFromCollectionGroup(e,t,va(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>($f(n,t,e),e)))}function $f(e,t,n){let r=e.Ki.get(t)||aa.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}async function Wf(e,t,n=_u()){const r=await Vf(e,yc(Zd(t.bundledQuery))),i=Bo(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Vu(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ns.saveNamedQuery(e,t);const o=r.withResumeToken(Wa.EMPTY_BYTE_STRING,s);return i.qi=i.qi.insert(o.targetId,o),i.Cs.updateTargetData(e,o).next((()=>i.Cs.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Cs.addMatchingKeys(e,n,r.targetId))).next((()=>i.Ns.saveNamedQuery(e,t)))}))}function Hf(e,t){return`firestore_clients_${e}_${t}`}function Kf(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Qf(e,t){return`firestore_targets_${e}_${t}`}class Yf{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Zi(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new $o(r.error.code,r.error.message))),s?new Yf(e,t,r.state,i):(jo("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jf{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Zi(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new $o(n.error.code,n.error.message))),i?new Jf(e,n.state,r):(jo("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Su();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=$a(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new Zf(e,i):(jo("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Xf{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Xf(t.clientId,t.onlineState):(jo("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ep{constructor(){this.activeTargetIds=Su()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tp{constructor(e,t,n,r,i){this.window=e,this.Hs=t,this.persistenceKey=n,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new $l(ra),this.started=!1,this.cr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ar=Hf(this.persistenceKey,this.sr),this.hr=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new ep),this.lr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.wr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.mr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.vi();for(const t of e){if(t===this.sr)continue;const e=this.getItem(Hf(this.persistenceKey,t));if(e){const n=Zf.Zi(t,e);n&&(this.ur=this.ur.insert(n.clientId,n))}}this.gr();const t=this.storage.getItem(this.wr);if(t){const e=this.yr(t);e&&this.pr(e)}for(const e of this.cr)this.rr(e);this.cr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,n){this.Tr(e,t,n),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Qf(this.persistenceKey,e));if(n){const r=Jf.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qf(this.persistenceKey,e))}updateQueryState(e,t,n){this.Rr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Er(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fo("SharedClientState","READ",e,t),t}setItem(e,t){Fo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){const t=e;if(t.storageArea===this.storage){if(Fo("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ar)return void jo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.lr.test(t.key)){if(null==t.newValue){const e=this.vr(t.key);return this.Vr(e,null)}{const e=this.Sr(t.key,t.newValue);if(e)return this.Vr(e.clientId,e)}}else if(this.dr.test(t.key)){if(null!==t.newValue){const e=this.Dr(t.key,t.newValue);if(e)return this.Cr(e)}}else if(this._r.test(t.key)){if(null!==t.newValue){const e=this.Nr(t.key,t.newValue);if(e)return this.kr(e)}}else if(t.key===this.wr){if(null!==t.newValue){const e=this.yr(t.newValue);if(e)return this.pr(e)}}else if(t.key===this.hr){const e=function(e){let t=Fa.at;if(null!=e)try{const n=JSON.parse(e);qo("number"==typeof n),t=n}catch(e){jo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Fa.at&&this.sequenceNumberHandler(e)}else if(t.key===this.mr){const e=this.Or(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Mr(e))))}}else this.cr.push(t)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,n){const r=new Yf(this.currentUser,e,t,n),i=Kf(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}Er(e){const t=Kf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){const t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}Rr(e,t,n){const r=Qf(this.persistenceKey,e),i=new Jf(e,t,n);this.setItem(r,i.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const n=this.vr(e);return Zf.Zi(n,t)}Dr(e,t){const n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Yf.Zi(new Ro(i),r,t)}Nr(e,t){const n=this._r.exec(e),r=Number(n[1]);return Jf.Zi(r,t)}yr(e){return Xf.Zi(e)}Or(e){return JSON.parse(e)}async Cr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Fr(e.batchId,e.state,e.error);Fo("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const n=t?this.ur.insert(e,t):this.ur.remove(e),r=this.Ir(this.ur),i=this.Ir(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Br(s,o).then((()=>{this.ur=n}))}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Su();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class np{constructor(){this.Lr=new ep,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,n){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new ep,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rp{Ur(e){}shutdown(){}}class ip{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Fo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Fo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const sp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class op{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class ap extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,n,r,i){const s=this.ho(e,t);Fo("RestConnection","Sending: ",s,n);const o={};return this.lo(o,r,i),this.fo(e,s,o,n).then((e=>(Fo("RestConnection","Received: ",e),e)),(t=>{throw Uo("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t}))}_o(e,t,n,r,i,s){return this.ao(e,t,n,r,i)}lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}ho(e,t){const n=sp[e];return`${this.oo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,n,r){return new Promise(((i,s)=>{const o=new Po;o.setWithCredentials(!0),o.listenOnce(Io.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case ko.NO_ERROR:const t=o.getResponseJson();Fo("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ko.TIMEOUT:Fo("Connection",'RPC "'+e+'" timed out'),s(new $o(Go.DEADLINE_EXCEEDED,"Request time out"));break;case ko.HTTP_ERROR:const n=o.getStatus();if(Fo("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Go).indexOf(t)>=0?t:Go.UNKNOWN}(t.status);s(new $o(e,t.message))}else s(new $o(Go.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new $o(Go.UNAVAILABLE,"Connection failed."));break;default:zo()}}finally{Fo("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}wo(e,t,n){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=So(),s=xo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new No({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const a=r.join("");Fo("Connection","Creating WebChannel: "+a,o);const l=i.createWebChannel(a,o);let c=!1,u=!1;const d=new op({Hr:e=>{u?Fo("Connection","Not sending because WebChannel is closed:",e):(c||(Fo("Connection","Opening WebChannel transport."),l.open(),c=!0),Fo("Connection","WebChannel sending:",e),l.send(e))},Jr:()=>l.close()}),h=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return h(l,Ao.EventType.OPEN,(()=>{u||Fo("Connection","WebChannel transport opened.")})),h(l,Ao.EventType.CLOSE,(()=>{u||(u=!0,Fo("Connection","WebChannel transport closed"),d.io())})),h(l,Ao.EventType.ERROR,(e=>{u||(u=!0,Uo("Connection","WebChannel transport errored:",e),d.io(new $o(Go.UNAVAILABLE,"The operation could not be completed")))})),h(l,Ao.EventType.MESSAGE,(e=>{var t;if(!u){const n=e.data[0];qo(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Fo("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=ou[e];if(void 0!==t)return cu(t)}(e),n=i.message;void 0===t&&(t=Go.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),u=!0,d.io(new $o(t,n)),l.close()}else Fo("Connection","WebChannel received:",n),d.ro(n)}})),h(s,To.STAT_EVENT,(e=>{e.stat===Co.PROXY?Fo("Connection","Detected buffering proxy"):e.stat===Co.NOPROXY&&Fo("Connection","Detected no buffering proxy")})),setTimeout((()=>{d.so()}),0),d}}function lp(){return"undefined"!=typeof window?window:null}function cp(){return"undefined"!=typeof document?document:null}function up(e){return new Mu(e,!0)}class dp{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Hs=e,this.timerId=t,this.mo=n,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-n);r>0&&Fo("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,(()=>(this.Eo=Date.now(),e()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class hp{constructor(e,t,n,r,i,s,o,a){this.Hs=e,this.vo=n,this.Vo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new dp(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(()=>this.$o())))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,t){this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==e?this.xo.reset():t&&t.code===Go.RESOURCE_EXHAUSTED?(jo(t.toString()),jo("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):t&&t.code===Go.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.So===t&&this.Go(e,n)}),(t=>{e((()=>{const e=new $o(Go.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Qo(e)}))}))}Go(e,t){const n=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((()=>{n((()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,(()=>(this.ko()&&(this.state=3),Promise.resolve()))),this.listener.Yr())))})),this.stream.Zr((e=>{n((()=>this.Qo(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Oo(){this.state=5,this.xo.Ro((async()=>{this.state=0,this.start()}))}Qo(e){return Fo("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget((()=>this.So===e?t():(Fo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fp extends hp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.yt=i}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.wt?(qo(void 0===t||"string"==typeof t),Wa.fromBase64String(t||"")):(qo(void 0===t||t instanceof Uint8Array),Wa.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Go.UNKNOWN:cu(e.code);return new $o(t,e.message||"")}(o);n=new Cu(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Gu(e,r.document.name),s=Vu(r.document.updateTime),o=r.document.createTime?Vu(r.document.createTime):aa.min(),a=new Zl({mapValue:{fields:r.document.fields}}),l=ec.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Iu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Gu(e,r.document),s=r.readTime?Vu(r.readTime):aa.min(),o=ec.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Iu([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Gu(e,r.document),s=r.removedTargetIds||[];n=new Iu([],s,i,null)}else{if(!("filter"in t))return zo();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new su(r),s=e.targetId;n=new Tu(s,i)}}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return aa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?aa.min():t.readTime?Vu(t.readTime):aa.min()}(e);return this.listener.Wo(t,n)}zo(e){const t={};t.database=Hu(this.yt),t.addTarget=function(e,t){let n;const r=t.target;return n=sc(r)?{documents:Xu(e,r)}:{query:ed(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ju(e,t.resumeToken):t.snapshotVersion.compareTo(aa.min())>0&&(n.readTime=Fu(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}Ho(e){const t={};t.database=Hu(this.yt),t.removeTarget=e,this.Bo(t)}}class pp extends hp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.yt=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(qo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function(e,t){return e&&e.length>0?(qo(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Vu(e.updateTime):Vu(t);return n.isEqual(aa.min())&&(n=Vu(t)),new Bc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Vu(e.commitTime);return this.listener.Zo(n,t)}return qo(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Hu(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Ju(this.yt,e)))};this.Bo(t)}}class mp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.yt=r,this.nu=!1}su(){if(this.nu)throw new $o(Go.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.ao(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Go.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new $o(Go.UNKNOWN,e.toString())}))}_o(e,t,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection._o(e,t,n,i,s,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Go.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new $o(Go.UNKNOWN,e.toString())}))}terminate(){this.nu=!0}}class gp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve()))))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(jo(t),this.ou=!1):Fo("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class yp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.Ur((e=>{n.enqueueAndForget((async()=>{Ip(this)&&(Fo("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Bo(e);t._u.add(4),await wp(t),t.gu.set("Unknown"),t._u.delete(4),await vp(t)}(this))}))})),this.gu=new gp(n,r)}}async function vp(e){if(Ip(e))for(const t of e.wu)await t(!0)}async function wp(e){for(const t of e.wu)await t(!1)}function bp(e,t){const n=Bo(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),kp(n)?xp(n):Gp(n).ko()&&Ep(n,t))}function _p(e,t){const n=Bo(e),r=Gp(n);n.du.delete(t),r.ko()&&Sp(n,t),0===n.du.size&&(r.ko()?r.Fo():Ip(n)&&n.gu.set("Unknown"))}function Ep(e,t){e.yu.Ot(t.targetId),Gp(e).zo(t)}function Sp(e,t){e.yu.Ot(t),Gp(e).Ho(t)}function xp(e){e.yu=new Au({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ne:t=>e.du.get(t)||null}),Gp(e).start(),e.gu.uu()}function kp(e){return Ip(e)&&!Gp(e).No()&&e.du.size>0}function Ip(e){return 0===Bo(e)._u.size}function Tp(e){e.yu=void 0}async function Cp(e){e.du.forEach(((t,n)=>{Ep(e,t)}))}async function Np(e,t){Tp(e),kp(e)?(e.gu.hu(t),xp(e)):e.gu.set("Unknown")}async function Ap(e,t,n){if(e.gu.set("Online"),t instanceof Cu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.du.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.du.delete(r),e.yu.removeTarget(r))}(e,t)}catch(n){Fo("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Pp(e,n)}else if(t instanceof Iu?e.yu.Kt(t):t instanceof Tu?e.yu.Jt(t):e.yu.jt(t),!n.isEqual(aa.min()))try{const t=await Ff(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.yu.Zt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.du.get(t);if(!n)return;e.du.set(t,n.withResumeToken(Wa.EMPTY_BYTE_STRING,n.snapshotVersion)),Sp(e,t);const r=new Bd(n.target,t,1,n.sequenceNumber);Ep(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Fo("RemoteStore","Failed to raise snapshot:",t),await Pp(e,t)}}async function Pp(e,t,n){if(!Aa(t))throw t;e._u.add(1),await wp(e),e.gu.set("Offline"),n||(n=()=>Ff(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Fo("RemoteStore","Retrying IndexedDB access"),await n(),e._u.delete(1),await vp(e)}))}function Op(e,t){return t().catch((n=>Pp(e,n,t)))}async function Rp(e){const t=Bo(e),n=$p(t);let r=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;Lp(t);)try{const e=await Uf(t.localStore,r);if(null===e){0===t.fu.length&&n.Fo();break}r=e.batchId,Dp(t,e)}catch(e){await Pp(t,e)}Mp(t)&&Fp(t)}function Lp(e){return Ip(e)&&e.fu.length<10}function Dp(e,t){e.fu.push(t);const n=$p(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function Mp(e){return Ip(e)&&!$p(e).No()&&e.fu.length>0}function Fp(e){$p(e).start()}async function jp(e){$p(e).eu()}async function Up(e){const t=$p(e);for(const n of e.fu)t.Xo(n.mutations)}async function Vp(e,t,n){const r=e.fu.shift(),i=zd.from(r,t,n);await Op(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Rp(e)}async function zp(e,t){t&&$p(e).Yo&&await async function(e,t){if(lu(n=t.code)&&n!==Go.ABORTED){const n=e.fu.shift();$p(e).Mo(),await Op(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Rp(e)}var n}(e,t),Mp(e)&&Fp(e)}async function qp(e,t){const n=Bo(e);n.asyncQueue.verifyOperationInProgress(),Fo("RemoteStore","RemoteStore received new credentials");const r=Ip(n);n._u.add(3),await wp(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n._u.delete(3),await vp(n)}async function Bp(e,t){const n=Bo(e);t?(n._u.delete(2),await vp(n)):t||(n._u.add(2),await wp(n),n.gu.set("Unknown"))}function Gp(e){return e.pu||(e.pu=function(e,t,n){const r=Bo(e);return r.su(),new fp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Cp.bind(null,e),Zr:Np.bind(null,e),Wo:Ap.bind(null,e)}),e.wu.push((async t=>{t?(e.pu.Mo(),kp(e)?xp(e):e.gu.set("Unknown")):(await e.pu.stop(),Tp(e))}))),e.pu}function $p(e){return e.Iu||(e.Iu=function(e,t,n){const r=Bo(e);return r.su(),new pp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:jp.bind(null,e),Zr:zp.bind(null,e),tu:Up.bind(null,e),Zo:Vp.bind(null,e)}),e.wu.push((async t=>{t?(e.Iu.Mo(),await Rp(e)):(await e.Iu.stop(),e.fu.length>0&&(Fo("RemoteStore",`Stopping write stream with ${e.fu.length} pending writes`),e.fu=[]))}))),e.Iu}class Wp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Wp(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $o(Go.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hp(e,t){if(jo("AsyncQueue",`${t}: ${e}`),Aa(e))return new $o(Go.UNAVAILABLE,`${t}: ${e}`);throw e}class Kp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ha.comparator(t.key,n.key):(e,t)=>ha.comparator(e.key,t.key),this.keyedMap=pu(),this.sortedSet=new $l(this.comparator)}static emptySet(e){return new Kp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Kp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Qp{constructor(){this.Tu=new $l(ha.comparator)}track(e){const t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):zo():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Yp{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Yp(e,t,Kp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Jp{constructor(){this.Au=void 0,this.listeners=[]}}class Zp{constructor(){this.queries=new uu((e=>_c(e)),bc),this.onlineState="Unknown",this.Ru=new Set}}async function Xp(e,t){const n=Bo(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Jp),i)try{s.Au=await n.onListen(r)}catch(e){const n=Hp(e,`Initialization of query '${Ec(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.bu(n.onlineState),s.Au&&t.Pu(s.Au)&&rm(n)}async function em(e,t){const n=Bo(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function tm(e,t){const n=Bo(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.Pu(e)&&(r=!0);i.Au=e}}r&&rm(n)}function nm(e,t,n){const r=Bo(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function rm(e){e.Ru.forEach((e=>{e.next()}))}class im{constructor(e,t,n){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Yp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){if(e.docChanges.length>0)return!0;const t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}xu(e){e=Yp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class sm{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class om{constructor(e){this.yt=e}Ji(e){return Gu(this.yt,e)}Yi(e){return e.metadata.exists?Yu(this.yt,e.document,!1):ec.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Vu(e)}}class am{constructor(e,t,n){this.Mu=e,this.localStore=t,this.yt=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=lm(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const n=ca.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,n=new om(this.yt);for(const r of e)if(r.metadata.queries){const e=n.Ji(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||_u()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Bo(e);let s=_u(),o=hu();for(const e of n){const n=t.Ji(e.metadata.name);e.document&&(s=s.add(n));const r=t.Yi(e);r.setReadTime(t.Xi(e.metadata.readTime)),o=o.insert(n,r)}const a=i.Gi.newChangeBuffer({trackRemovals:!0}),l=await Vf(i,function(e){return yc(dc(ca.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>jf(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Cs.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Cs.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi))).next((()=>t.Wi))))))}(this.localStore,new om(this.yt),this.documents,this.Mu.id),t=this.$u(this.documents);for(const e of this.queries)await Wf(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:e}}}function lm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class cm{constructor(e){this.key=e}}class um{constructor(e){this.key=e}}class dm{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=_u(),this.mutatedKeys=_u(),this.Gu=kc(e),this.Qu=new Kp(this.Gu)}get ju(){return this.qu}Wu(e,t){const n=t?t.zu:new Qp,r=t?t.Qu:this.Qu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Sc(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.Hu(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Gu(u,a)>0||l&&this.Gu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Qu:s,zu:n,$i:o,mutatedKeys:i}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zo()}};return n(e)-n(t)}(e.type,t.type)||this.Gu(e.doc,t.doc))),this.Ju(n);const s=t?this.Yu():[],o=0===this.Ku.size&&this.current?1:0,a=o!==this.Uu;return this.Uu=o,0!==i.length||a?{snapshot:new Yp(this.query,e.Qu,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:s}:{Xu:s}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Qp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach((e=>this.qu=this.qu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qu=this.qu.delete(e))),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=_u(),this.Qu.forEach((e=>{this.Zu(e.key)&&(this.Ku=this.Ku.add(e.key))}));const t=[];return e.forEach((e=>{this.Ku.has(e)||t.push(new um(e))})),this.Ku.forEach((n=>{e.has(n)||t.push(new cm(n))})),t}tc(e){this.qu=e.Hi,this.Ku=_u();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Yp.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class hm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class fm{constructor(e){this.key=e,this.nc=!1}}class pm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.sc={},this.ic=new uu((e=>_c(e)),bc),this.rc=new Map,this.oc=new Set,this.uc=new $l(ha.comparator),this.cc=new Map,this.ac=new gf,this.hc={},this.lc=new Map,this.fc=$h.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}async function mm(e,t){const n=zm(e);let r,i;const s=n.ic.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const e=await Vf(n.localStore,yc(t));n.isPrimaryClient&&bp(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await gm(n,t,r,"current"===s,e.resumeToken)}return i}async function gm(e,t,n,r,i){e._c=(t,n,r)=>async function(e,t,n,r){let i=t.view.Wu(n);i.$i&&(i=await qf(e.localStore,t.query,!1).then((({documents:e})=>t.view.Wu(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Tm(e,t.targetId,o.Xu),o.snapshot}(e,t,n,r);const s=await qf(e.localStore,t,!0),o=new dm(t,s.Hi),a=o.Wu(s.documents),l=ku.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Tm(e,n,c.Xu);const u=new hm(t,n,o);return e.ic.set(t,u),e.rc.has(n)?e.rc.get(n).push(t):e.rc.set(n,[t]),c.snapshot}async function ym(e,t){const n=Bo(e),r=n.ic.get(t),i=n.rc.get(r.targetId);if(i.length>1)return n.rc.set(r.targetId,i.filter((e=>!bc(e,t)))),void n.ic.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await zf(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),_p(n.remoteStore,r.targetId),km(n,r.targetId)})).catch(xa)):(km(n,r.targetId),await zf(n.localStore,r.targetId,!0))}async function vm(e,t){const n=Bo(e);try{const e=await function(e,t){const n=Bo(e),r=t.snapshotVersion;let i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Cs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Cs.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?c=c.withResumeToken(Wa.EMPTY_BYTE_STRING,aa.min()).withLastLimboFreeSnapshotVersion(aa.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Cs.updateTargetData(e,c))}));let a=hu(),l=_u();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(jf(e,s,t.documentUpdates).next((e=>{a=e.Wi,l=e.zi}))),!r.isEqual(aa.min())){const t=n.Cs.getLastRemoteSnapshotVersion(e).next((t=>n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return ka.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.qi=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.cc.get(t);r&&(qo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.nc=!0:e.modifiedDocuments.size>0?qo(r.nc):e.removedDocuments.size>0&&(qo(r.nc),r.nc=!1))})),await Am(n,e,t)}catch(e){await xa(e)}}function wm(e,t,n){const r=Bo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ic.forEach(((n,r)=>{const i=r.view.bu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Bo(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.bu(t)&&(r=!0)})),r&&rm(n)}(r.eventManager,t),e.length&&r.sc.Wo(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function bm(e,t,n){const r=Bo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.cc.get(t),s=i&&i.key;if(s){let e=new $l(ha.comparator);e=e.insert(s,ec.newNoDocument(s,aa.min()));const n=_u().add(s),i=new xu(aa.min(),new Map,new Kl(ra),e,n);await vm(r,i),r.uc=r.uc.remove(s),r.cc.delete(t),Nm(r)}else await zf(r.localStore,t,!1).then((()=>km(r,t,n))).catch(xa)}async function _m(e,t){const n=Bo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Bo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ka.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);qo(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=_u();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);xm(n,r,null),Sm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Am(n,e)}catch(e){await xa(e)}}async function Em(e,t,n){const r=Bo(e);try{const e=await function(e,t){const n=Bo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(qo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);xm(r,t,n),Sm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Am(r,e)}catch(n){await xa(n)}}function Sm(e,t){(e.lc.get(t)||[]).forEach((e=>{e.resolve()})),e.lc.delete(t)}function xm(e,t,n){const r=Bo(e);let i=r.hc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function km(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.rc.get(t))e.ic.delete(r),n&&e.sc.wc(r,n);e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((t=>{e.ac.containsKey(t)||Im(e,t)}))}function Im(e,t){e.oc.delete(t.path.canonicalString());const n=e.uc.get(t);null!==n&&(_p(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),Nm(e))}function Tm(e,t,n){for(const r of n)r instanceof cm?(e.ac.addReference(r.key,t),Cm(e,r)):r instanceof um?(Fo("SyncEngine","Document no longer in limbo: "+r.key),e.ac.removeReference(r.key,t),e.ac.containsKey(r.key)||Im(e,r.key)):zo()}function Cm(e,t){const n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Fo("SyncEngine","New document in limbo: "+n),e.oc.add(r),Nm(e))}function Nm(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){const t=e.oc.values().next().value;e.oc.delete(t);const n=new ha(ca.fromString(t)),r=e.fc.next();e.cc.set(r,new fm(n)),e.uc=e.uc.insert(n,r),bp(e.remoteStore,new Bd(yc(dc(n.path)),r,2,Fa.at))}}async function Am(e,t,n){const r=Bo(e),i=[],s=[],o=[];r.ic.isEmpty()||(r.ic.forEach(((e,a)=>{o.push(r._c(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Of.Ci(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.sc.Wo(i),await async function(e,t){const n=Bo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ka.forEach(t,(t=>ka.forEach(t.Si,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ka.forEach(t.Di,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Aa(e))throw e;Fo("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.qi.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.qi=n.qi.insert(t,i)}}}(r.localStore,s))}async function Pm(e,t){const n=Bo(e);if(!n.currentUser.isEqual(t)){Fo("SyncEngine","User change. New user:",t.toKey());const e=await Mf(n.localStore,t);n.currentUser=t,function(e,t){e.lc.forEach((e=>{e.forEach((e=>{e.reject(new $o(Go.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Am(n,e.ji)}}function Om(e,t){const n=Bo(e),r=n.cc.get(t);if(r&&r.nc)return _u().add(r.key);{let e=_u();const r=n.rc.get(t);if(!r)return e;for(const t of r){const r=n.ic.get(t);e=e.unionWith(r.view.ju)}return e}}async function Rm(e,t){const n=Bo(e),r=await qf(n.localStore,t.query,!0),i=t.view.tc(r);return n.isPrimaryClient&&Tm(n,t.targetId,i.Xu),i}async function Lm(e,t){const n=Bo(e);return Gf(n.localStore,t).then((e=>Am(n,e)))}async function Dm(e,t,n,r){const i=Bo(e),s=await function(e,t){const n=Bo(e),r=Bo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Tn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):ka.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Rp(i.remoteStore):"acknowledged"===n||"rejected"===n?(xm(i,t,r||null),Sm(i,t),function(e,t){Bo(Bo(e).mutationQueue).An(t)}(i.localStore,t)):zo(),await Am(i,s)):Fo("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Mm(e,t,n){const r=Bo(e),i=[],s=[];for(const e of t){let t;const n=r.rc.get(e);if(n&&0!==n.length){t=await Vf(r.localStore,yc(n[0]));for(const e of n){const t=r.ic.get(e),n=await Rm(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await Bf(r.localStore,e);t=await Vf(r.localStore,n),await gm(r,Fm(n),e,!1,t.resumeToken)}i.push(t)}return r.sc.Wo(s),i}function Fm(e){return uc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function jm(e){const t=Bo(e);return Bo(Bo(t.localStore).persistence).vi()}async function Um(e,t,n,r){const i=Bo(e);if(i.dc)return void Fo("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Gf(i.localStore,xc(s[0])),r=xu.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Wa.EMPTY_BYTE_STRING);await Am(i,e,r);break}case"rejected":await zf(i.localStore,t,!0),km(i,t,r);break;default:zo()}}async function Vm(e,t,n){const r=zm(e);if(r.dc){for(const e of t){if(r.rc.has(e)){Fo("SyncEngine","Adding an already active target "+e);continue}const t=await Bf(r.localStore,e),n=await Vf(r.localStore,t);await gm(r,Fm(t),n.targetId,!1,n.resumeToken),bp(r.remoteStore,n)}for(const e of n)r.rc.has(e)&&await zf(r.localStore,e,!1).then((()=>{_p(r.remoteStore,e),km(r,e)})).catch(xa)}}function zm(e){const t=Bo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Om.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bm.bind(null,t),t.sc.Wo=tm.bind(null,t.eventManager),t.sc.wc=nm.bind(null,t.eventManager),t}function qm(e){const t=Bo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_m.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Em.bind(null,t),t}class Bm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=up(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Df(this.persistence,new Rf,e.initialUser,this.yt)}yc(e){return new Ef(xf.Bs,this.yt)}gc(e){return new np}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Gm extends Bm{constructor(e,t,n){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ac.initialize(this,e),await qm(this.Ac.syncEngine),await Rp(this.Ac.remoteStore),await this.persistence.li((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}Ic(e){return Df(this.persistence,new Rf,e.initialUser,this.yt)}Tc(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Zh(n,e.asyncQueue,t)}Ec(e,t){const n=new Ma(t,this.persistence);return new Da(e.asyncQueue,n)}yc(e){const t=Pf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fh.withCacheSize(this.cacheSizeBytes):Fh.DEFAULT;return new Cf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,lp(),cp(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new np}}class $m extends Gm{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ac.syncEngine;this.sharedClientState instanceof tp&&(this.sharedClientState.syncEngine={Fr:Dm.bind(null,t),$r:Um.bind(null,t),Br:Vm.bind(null,t),vi:jm.bind(null,t),Mr:Lm.bind(null,t)},await this.sharedClientState.start()),await this.persistence.li((async e=>{await async function(e,t){const n=Bo(e);if(zm(n),qm(n),!0===t&&!0!==n.dc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Mm(n,e.toArray());n.dc=!0,await Bp(n.remoteStore,!0);for(const e of t)bp(n.remoteStore,e)}else if(!1===t&&!1!==n.dc){const e=[];let t=Promise.resolve();n.rc.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(km(n,i),zf(n.localStore,i,!0)))),_p(n.remoteStore,i)})),await t,await Mm(n,e),function(e){const t=Bo(e);t.cc.forEach(((e,n)=>{_p(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new $l(ha.comparator)}(n),n.dc=!1,await Bp(n.remoteStore,!1)}}(this.Ac.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}gc(e){const t=lp();if(!tp.C(t))throw new $o(Go.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Pf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Wm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>wm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pm.bind(null,this.syncEngine),await Bp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zp}createDatastore(e){const t=up(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new ap(r));var r;return function(e,t,n,r){return new mp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>wm(this.syncEngine,e,0),s=ip.C()?new ip:new rp,new yp(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new pm(e,t,n,r,i,s);return o&&(a.dc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Bo(e);Fo("RemoteStore","RemoteStore shutting down."),t._u.add(5),await wp(t),t.mu.shutdown(),t.gu.set("Unknown")}(this.remoteStore)}}function Hm(e,t,n){if(!n)throw new $o(Go.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Km(e,t,n,r){if(!0===t&&!0===r)throw new $o(Go.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Qm(e){if(!ha.isDocumentKey(e))throw new $o(Go.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ym(e){if(ha.isDocumentKey(e))throw new $o(Go.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Jm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":zo()}function Zm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new $o(Go.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jm(e);throw new $o(Go.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Xm(e,t){if(t<=0)throw new $o(Go.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const eg=new Map;class tg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new $o(Go.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new $o(Go.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Km("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ng{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $o(Go.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new $o(Go.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ko;switch(e.type){case"gapi":const t=e.client;return new Zo(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new $o(Go.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=eg.get(e);t&&(Fo("ComponentProvider","Removing Datastore"),eg.delete(e),t.terminate())}(this),Promise.resolve()}}class rg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rg(this.firestore,e,this._key)}}class ig{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ig(this.firestore,e,this._query)}}class sg extends ig{constructor(e,t,n){super(e,t,dc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rg(this.firestore,null,new ha(e))}withConverter(e){return new sg(this.firestore,e,this._path)}}function og(e,t,...n){if(e=vt(e),Hm("collection","path",t),e instanceof ng){const r=ca.fromString(t,...n);return Ym(r),new sg(e,null,r)}{if(!(e instanceof rg||e instanceof sg))throw new $o(Go.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ca.fromString(t,...n));return Ym(r),new sg(e.firestore,null,r)}}function ag(e,t,...n){if(e=vt(e),1===arguments.length&&(t=na.R()),Hm("doc","path",t),e instanceof ng){const r=ca.fromString(t,...n);return Qm(r),new rg(e,null,new ha(r))}{if(!(e instanceof rg||e instanceof sg))throw new $o(Go.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ca.fromString(t,...n));return Qm(r),new rg(e.firestore,e instanceof sg?e.converter:null,new ha(r))}}function lg(e,t){return e=vt(e),t=vt(t),(e instanceof rg||e instanceof sg)&&(t instanceof rg||t instanceof sg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function cg(e,t){return e=vt(e),t=vt(t),e instanceof ig&&t instanceof ig&&e.firestore===t.firestore&&bc(e._query,t._query)&&e.converter===t.converter}function ug(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class dg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):jo("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class hg{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Wo,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((e=>{e&&e.Ou()?this.metadata.resolve(e.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.ku)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Pc.cancel()}async getMetadata(){return this.metadata.promise}async mc(){return await this.getMetadata(),this.Vc()}async Vc(){const e=await this.Sc();if(null===e)return null;const t=this.vc.decode(e),n=Number(t);isNaN(n)&&this.Dc(`length string (${t}) is not valid number`);const r=await this.Cc(n);return new sm(JSON.parse(r),e.length+n)}xc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Sc(){for(;this.xc()<0&&!await this.Nc(););if(0===this.buffer.length)return null;const e=this.xc();e<0&&this.Dc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Cc(e){for(;this.buffer.length<e;)await this.Nc()&&this.Dc("Reached the end of bundle when more is expected.");const t=this.vc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Nc(){const e=await this.Pc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class fg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new $o(Go.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Bo(e),r=Hu(n.yt)+"/documents",i={documents:t.map((e=>Bu(n.yt,e)))},s=await n._o("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){qo(!!t.found),t.found.name,t.found.updateTime;const n=Gu(e,t.found.name),r=Vu(t.found.updateTime),i=t.found.createTime?Vu(t.found.createTime):aa.min(),s=new Zl({mapValue:{fields:t.found.fields}});return ec.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){qo(!!t.missing),qo(!!t.readTime);const n=Gu(e,t.missing),r=Vu(t.readTime);return ec.newNoDocument(n,r)}(e,t):zo()}(n.yt,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());qo(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new ru(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=ha.fromPath(t);this.mutations.push(new iu(n,this.precondition(n)))})),await async function(e,t){const n=Bo(e),r=Hu(n.yt)+"/documents",i={writes:t.map((e=>Ju(n.yt,e)))};await n.ao("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zo();t=aa.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new $o(Go.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(aa.min())?Gc.exists(!1):Gc.updateTime(t):Gc.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(aa.min()))throw new $o(Go.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gc.updateTime(t)}return Gc.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pg{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.kc=n.maxAttempts,this.xo=new dp(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){this.xo.Ro((async()=>{const e=new fg(this.datastore),t=this.Mc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Fc(e)}))))})).catch((e=>{this.Fc(e)}))}))}Mc(e){try{const t=this.updateFunction(e);return!Ba(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Oc(),Promise.resolve())))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!lu(t)}return!1}}class mg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ro.UNAUTHENTICATED,this.clientId=na.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Fo("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Fo("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $o(Go.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Hp(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function gg(e,t){e.asyncQueue.verifyOperationInProgress(),Fo("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Mf(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function yg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await vg(e);Fo("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>qp(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>qp(t.remoteStore,n))),e.onlineComponents=t}async function vg(e){return e.offlineComponents||(Fo("FirestoreClient","Using default OfflineComponentProvider"),await gg(e,new Bm)),e.offlineComponents}async function wg(e){return e.onlineComponents||(Fo("FirestoreClient","Using default OnlineComponentProvider"),await yg(e,new Wm)),e.onlineComponents}function bg(e){return vg(e).then((e=>e.persistence))}function _g(e){return vg(e).then((e=>e.localStore))}function Eg(e){return wg(e).then((e=>e.remoteStore))}function Sg(e){return wg(e).then((e=>e.syncEngine))}async function xg(e){const t=await wg(e),n=t.eventManager;return n.onListen=mm.bind(null,t.syncEngine),n.onUnlisten=ym.bind(null,t.syncEngine),n}function kg(e,t,n={}){const r=new Wo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new dg({next:s=>{t.enqueueAndForget((()=>em(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new $o(Go.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new $o(Go.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new im(dc(n.path),s,{includeMetadataChanges:!0,Nu:!0});return Xp(e,o)}(await xg(e),e.asyncQueue,t,n,r))),r.promise}function Ig(e,t,n={}){const r=new Wo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new dg({next:n=>{t.enqueueAndForget((()=>em(e,o))),n.fromCache&&"server"===r.source?i.reject(new $o(Go.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new im(n,s,{includeMetadataChanges:!0,Nu:!0});return Xp(e,o)}(await xg(e),e.asyncQueue,t,n,r))),r.promise}class Tg{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new dp(this,"async_queue_retry"),this.Wc=()=>{const e=cp();e&&Fo("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const e=cp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=cp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise((()=>{}));const t=new Wo;return this.Hc((()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Lc.push(e),this.Jc())))}async Jc(){if(0!==this.Lc.length){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Aa(e))throw e;Fo("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro((()=>this.Jc()))}}Hc(e){const t=this.Bc.then((()=>(this.Gc=!0,e().catch((e=>{this.Kc=e,this.Gc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw jo("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Gc=!1,e))))));return this.Bc=t,t}enqueueAfterDelay(e,t,n){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=Wp.createAndSchedule(this,e,t,n,(e=>this.Yc(e)));return this.Uc.push(r),r}zc(){this.Kc&&zo()}verifyOperationInProgress(){}async Xc(){let e;do{e=this.Bc,await e}while(e!==this.Bc)}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then((()=>{this.Uc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()}))}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Cg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class Ng{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ag extends ng{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Tg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Og(this),this._firestoreClient.terminate()}}function Pg(e){return e._firestoreClient||Og(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Og(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new ja(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new mg(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Rg(e,t,n){const r=new Wo;return e.asyncQueue.enqueue((async()=>{try{await gg(e,n),await yg(e,t),r.resolve()}catch(e){const t=e;if(!function(e){return"FirebaseError"===e.name?e.code===Go.FAILED_PRECONDITION||e.code===Go.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(t))throw t;Uo("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.reject(t)}})).then((()=>r.promise))}function Lg(e){if(e._initialized||e._terminated)throw new $o(Go.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Dg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dg(Wa.fromBase64String(e))}catch(e){throw new $o(Go.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Dg(Wa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mg{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new $o(Go.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new da(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fg{constructor(e){this._methodName=e}}class jg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $o(Go.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $o(Go.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ra(this._lat,e._lat)||ra(this._long,e._long)}}const Ug=/^__.*__$/;class Vg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zc(e,this.data,t,this.fieldTransforms)}}class zg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Xc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zo()}}class Bg{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.yt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.na(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Bg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}ca(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return cy(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(qg(this.sa)&&Ug.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Gg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=n||up(e)}da(e,t,n,r=!1){return new Bg({sa:e,methodName:t,fa:n,path:da.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function $g(e){const t=e._freezeSettings(),n=up(e._databaseId);return new Gg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Wg(e,t,n,r,i,s={}){const o=e.da(s.merge||s.mergeFields?2:0,t,n,i);sy("Data must be an object, but it was:",o,r);const a=ry(r,o);let l,c;if(s.merge)l=new Jl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=oy(t,r,n);if(!o.contains(i))throw new $o(Go.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);uy(e,i)||e.push(i)}l=new Jl(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Vg(new Zl(a),l,c)}class Hg extends Fg{_toFieldTransform(e){if(2!==e.sa)throw 1===e.sa?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hg}}function Kg(e,t,n){return new Bg({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}class Qg extends Fg{_toFieldTransform(e){return new qc(e.path,new Lc)}isEqual(e){return e instanceof Qg}}class Yg extends Fg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Kg(this,e,!0),n=this._a.map((e=>ny(e,t))),r=new Dc(n);return new qc(e.path,r)}isEqual(e){return this===e}}class Jg extends Fg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Kg(this,e,!0),n=this._a.map((e=>ny(e,t))),r=new Fc(n);return new qc(e.path,r)}isEqual(e){return this===e}}class Zg extends Fg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Uc(e.yt,Nc(e.yt,this.wa));return new qc(e.path,t)}isEqual(e){return this===e}}function Xg(e,t,n,r){const i=e.da(1,t,n);sy("Data must be an object, but it was:",i,r);const s=[],o=Zl.empty();za(r,((e,r)=>{const a=ly(t,e,n);r=vt(r);const l=i.ca(a);if(r instanceof Hg)s.push(a);else{const e=ny(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Jl(s);return new zg(o,a,i.fieldTransforms)}function ey(e,t,n,r,i,s){const o=e.da(1,t,n),a=[oy(t,r,n)],l=[i];if(s.length%2!=0)throw new $o(Go.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(oy(t,s[e])),l.push(s[e+1]);const c=[],u=Zl.empty();for(let e=a.length-1;e>=0;--e)if(!uy(c,a[e])){const t=a[e];let n=l[e];n=vt(n);const r=o.ca(t);if(n instanceof Hg)c.push(t);else{const e=ny(n,r);null!=e&&(c.push(t),u.set(t,e))}}const d=new Jl(c);return new zg(u,d,o.fieldTransforms)}function ty(e,t,n,r=!1){return ny(n,e.da(r?4:3,t))}function ny(e,t){if(iy(e=vt(e)))return sy("Unsupported field value:",t,e),ry(e,t);if(e instanceof Fg)return function(e,t){if(!qg(t.sa))throw t.ha(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ha(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ny(i,t.aa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=vt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Nc(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=oa.fromDate(e);return{timestampValue:Fu(t.yt,n)}}if(e instanceof oa){const n=new oa(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Fu(t.yt,n)}}if(e instanceof jg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dg)return{bytesValue:ju(t.yt,e._byteString)};if(e instanceof rg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:zu(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha(`Unsupported field value: ${Jm(e)}`)}(e,t)}function ry(e,t){const n={};return qa(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):za(e,((e,r)=>{const i=ny(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function iy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof oa||e instanceof jg||e instanceof Dg||e instanceof rg||e instanceof Fg)}function sy(e,t,n){if(!iy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Jm(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function oy(e,t,n){if((t=vt(t))instanceof Mg)return t._internalPath;if("string"==typeof t)return ly(e,t);throw cy("Field path arguments must be of type string or ",e,!1,void 0,n)}const ay=new RegExp("[~\\*/\\[\\]]");function ly(e,t,n){if(t.search(ay)>=0)throw cy(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Mg(...t.split("."))._internalPath}catch(r){throw cy(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function cy(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new $o(Go.INVALID_ARGUMENT,a+e+l)}function uy(e,t){return e.some((e=>e.isEqual(t)))}class dy{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hy extends dy{data(){return super.data()}}function fy(e,t){return"string"==typeof t?ly(e,t):t instanceof Mg?t._internalPath:t._delegate._internalPath}function py(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new $o(Go.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class my{}class gy extends my{}function yy(e,t,...n){let r=[];t instanceof my&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof wy)).length,n=e.filter((e=>e instanceof vy)).length;if(t>1||t>0&&n>0)throw new $o(Go.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e}class vy extends gy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new vy(e,t,n)}_apply(e){const t=this._parse(e);return Ty(e._query,t),new ig(e.firestore,e.converter,vc(e._query,t))}_parse(e){const t=$g(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new $o(Go.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Iy(o,s);const t=[];for(const n of o)t.push(ky(r,e,n));a={arrayValue:{values:t}}}else a=ky(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Iy(o,s),a=ty(n,"where",o,"in"===s||"not-in"===s);return kl.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class wy extends my{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wy(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Il.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)Ty(n,e),n=vc(n,e)}(e._query,t),new ig(e.firestore,e.converter,vc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class by extends gy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new by(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new $o(Go.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new $o(Go.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Bl(t,n);return function(e,t){if(null===fc(e)){const n=pc(e);null!==n&&Cy(0,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new ig(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new cc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class _y extends gy{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new _y(e,t,n)}_apply(e){return new ig(e.firestore,e.converter,wc(e._query,this._limit,this._limitType))}}class Ey extends gy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ey(e,t,n)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new ig(e.firestore,e.converter,function(e,t){return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Sy extends gy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Sy(e,t,n)}_apply(e){const t=xy(e,this.type,this._docOrFields,this._inclusive);return new ig(e.firestore,e.converter,function(e,t){return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function xy(e,t,n,r){if(n[0]=vt(n[0]),n[0]instanceof dy)return function(e,t,n,r,i){if(!r)throw new $o(Go.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of gc(e))if(n.field.isKeyField())s.push(cl(t,r.key));else{const e=r.data.field(n.field);if(Ja(e))throw new $o(Go.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new $o(Go.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new _l(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=$g(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new $o(Go.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const l=i[s];if(o[s].field.isKeyField()){if("string"!=typeof l)throw new $o(Go.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof l}`);if(!mc(e)&&-1!==l.indexOf("/"))throw new $o(Go.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${l}' contains a slash.`);const n=e.path.child(ca.fromString(l));if(!ha.isDocumentKey(n))throw new $o(Go.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new ha(n);a.push(cl(t,i))}else{const e=ty(n,r,l);a.push(e)}}return new _l(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function ky(e,t,n){if("string"==typeof(n=vt(n))){if(""===n)throw new $o(Go.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mc(t)&&-1!==n.indexOf("/"))throw new $o(Go.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ca.fromString(n));if(!ha.isDocumentKey(r))throw new $o(Go.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cl(e,new ha(r))}if(n instanceof rg)return cl(e,n._key);throw new $o(Go.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jm(n)}.`)}function Iy(e,t){if(!Array.isArray(e)||0===e.length)throw new $o(Go.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new $o(Go.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ty(e,t){if(t.isInequality()){const n=pc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new $o(Go.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=fc(e);null!==i&&Cy(0,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new $o(Go.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new $o(Go.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Cy(e,t,n){if(!n.isEqual(t))throw new $o(Go.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Ny{convertValue(e,t="none"){switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zo()}}convertObject(e,t){const n={};return za(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new jg(Qa(e.latitude),Qa(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Za(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Xa(e));default:return null}}convertTimestamp(e){const t=Ka(e);return new oa(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ca.fromString(e);qo(ud(n));const r=new Ua(n.get(1),n.get(3)),i=new ha(n.popFirst(5));return r.isEqual(t)||jo(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Ay(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Py extends Ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rg(this.firestore,null,t)}}class Oy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ry extends dy{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ly(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(fy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ly extends Ry{data(e={}){return super.data(e)}}class Dy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Oy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ly(this._firestore,this._userDataWriter,n.key,n,new Oy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $o(Go.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ly(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Oy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ly(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Oy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:My(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function My(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zo()}}function Fy(e,t){return e instanceof Ry&&t instanceof Ry?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Dy&&t instanceof Dy&&e._firestore===t._firestore&&cg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class jy extends Ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rg(this.firestore,null,t)}}function Uy(e,t,n){e=Zm(e,rg);const r=Zm(e.firestore,Ag),i=Ay(e.converter,t,n);return qy(r,[Wg($g(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gc.none())])}function Vy(e,t,n,...r){e=Zm(e,rg);const i=Zm(e.firestore,Ag),s=$g(i);let o;return o="string"==typeof(t=vt(t))||t instanceof Mg?ey(s,"updateDoc",e._key,t,n,r):Xg(s,"updateDoc",e._key,t),qy(i,[o.toMutation(e._key,Gc.exists(!0))])}function zy(e,...t){var n,r,i;e=vt(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Cg(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Cg(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,c,u;if(e instanceof rg)c=Zm(e.firestore,Ag),u=dc(e._key.path),l={next:n=>{t[o]&&t[o](By(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Zm(e,ig);c=Zm(n.firestore,Ag),u=n._query;const r=new jy(c);l={next:e=>{t[o]&&t[o](new Dy(c,r,n,e))},error:t[o+1],complete:t[o+2]},py(e._query)}return function(e,t,n,r){const i=new dg(r),s=new im(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Xp(await xg(e),s))),()=>{i.bc(),e.asyncQueue.enqueueAndForget((async()=>em(await xg(e),s)))}}(Pg(c),u,a,l)}function qy(e,t){return function(e,t){const n=new Wo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=qm(e);try{const e=await function(e,t){const n=Bo(e),r=oa.now(),i=t.reduce(((e,t)=>e.add(t.key)),_u());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=hu(),l=_u();return n.Gi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Yc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Xc(e.key,t,Xl(t.value.mapValue),Gc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:mu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.hc[e.currentUser.toKey()];r||(r=new $l(ra)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Am(r,e.changes),await Rp(r.remoteStore)}catch(e){const t=Hp(e,"Failed to persist write");n.reject(t)}}(await Sg(e),t,n))),n.promise}(Pg(e),t)}function By(e,t,n){const r=n.docs.get(t._key),i=new jy(e);return new Ry(e,i,t._key,r,new Oy(n.hasPendingWrites,n.fromCache),t.converter)}const Gy={maxAttempts:5};class $y{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$g(e)}set(e,t,n){this._verifyNotCommitted();const r=Wy(e,this._firestore),i=Ay(r.converter,t,n),s=Wg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Gc.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=Wy(e,this._firestore);let s;return s="string"==typeof(t=vt(t))||t instanceof Mg?ey(this._dataReader,"WriteBatch.update",i._key,t,n,r):Xg(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Gc.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wy(e,this._firestore);return this._mutations=this._mutations.concat(new ru(t._key,Gc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $o(Go.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wy(e,t){if((e=vt(e)).firestore!==t)throw new $o(Go.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Hy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$g(e)}get(e){const t=Wy(e,this._firestore),n=new Py(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return zo();const r=e[0];if(r.isFoundDocument())return new dy(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new dy(this._firestore,n,t._key,null,t.converter);throw zo()}))}set(e,t,n){const r=Wy(e,this._firestore),i=Ay(r.converter,t,n),s=Wg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=Wy(e,this._firestore);let s;return s="string"==typeof(t=vt(t))||t instanceof Mg?ey(this._dataReader,"Transaction.update",i._key,t,n,r):Xg(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=Wy(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wy(e,this._firestore),n=new jy(this._firestore);return super.get(e).then((e=>new Ry(this._firestore,n,t._key,e._document,new Oy(!1,!1),t.converter)))}}function Ky(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new $o("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function Qy(){if("undefined"==typeof Uint8Array)throw new $o("unimplemented","Uint8Arrays are not available in this environment.")}function Yy(){if("undefined"==typeof atob)throw new $o("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){!function(e){Lo=e}(ln),tn(new wt("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new Ag(new Yo(e.getProvider("auth-internal")),new ea(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new $o(Go.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),fn(Oo,"3.8.1",e),fn(Oo,"3.8.1","esm2017")}();class Jy{constructor(e){this._delegate=e}static fromBase64String(e){return Yy(),new Jy(Dg.fromBase64String(e))}static fromUint8Array(e){return Qy(),new Jy(Dg.fromUint8Array(e))}toBase64(){return Yy(),this._delegate.toBase64()}toUint8Array(){return Qy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Zy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class Xy{enableIndexedDbPersistence(e,t){return function(e,t){Lg(e=Zm(e,Ag));const n=Pg(e),r=e._freezeSettings(),i=new Wm;return Rg(n,i,new Gm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Lg(e=Zm(e,Ag));const t=Pg(e),n=e._freezeSettings(),r=new Wm;return Rg(t,r,new $m(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new $o(Go.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Wo;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ta.C())return Promise.resolve();const t=e+"main";await Ta.delete(t)}(Pf(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class ev{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ua||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Uo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=Zm(e,ng))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Uo("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ro.MOCK_USER;else{t=Ve(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new $o(Go.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ro(s)}e._authCredentials=new Qo(new Ho(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await bg(e),n=await Eg(e);return t.setNetworkEnabled(!0),function(e){const t=Bo(e);return t._u.delete(0),vp(t)}(n)}))}(Pg(e=Zm(e,Ag)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await bg(e),n=await Eg(e);return t.setNetworkEnabled(!1),async function(e){const t=Bo(e);t._u.add(0),await wp(t),t.gu.set("Offline")}(n)}))}(Pg(e=Zm(e,Ag)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Km("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new Wo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Bo(e);Ip(n.remoteStore)||Fo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Bo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.lc.get(e)||[];r.push(t),n.lc.set(e,r)}catch(e){const n=Hp(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Sg(e),t))),t.promise}(Pg(e=Zm(e,Ag)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new dg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Bo(e).Ru.add(t),t.next()}(await xg(e),n))),()=>{n.bc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Bo(e).Ru.delete(t)}(await xg(e),n)))}}(Pg(e=Zm(e,Ag)),Cg(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new $o("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pv(this,og(this._delegate,e))}catch(e){throw ov(e,"collection()","Firestore.collection()")}}doc(e){try{return new sv(this,ag(this._delegate,e))}catch(e){throw ov(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new dv(this,function(e,t){if(e=Zm(e,ng),Hm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new $o(Go.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ig(e,null,function(e){return new cc(ca.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw ov(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Zm(e,Ag);const r=Object.assign(Object.assign({},Gy),void 0);return function(e){if(e.maxAttempts<1)throw new $o(Go.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Wo;return e.asyncQueue.enqueueAndForget((async()=>{const i=await function(e){return wg(e).then((e=>e.datastore))}(e);new pg(e.asyncQueue,i,n,t,r).run()})),r.promise}(Pg(e),(n=>t(new Hy(e,n))),r)}(this._delegate,(t=>e(new nv(this,t))))}batch(){return Pg(this._delegate),new rv(new $y(this._delegate,(e=>qy(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Pg(e=Zm(e,Ag)),r=new Ng;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new hg(e,t)}(function(e,t){if(e instanceof Uint8Array)return ug(e,t);if(e instanceof ArrayBuffer)return ug(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,up(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Bo(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Bo(e),r=Vu(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Ns.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(lm(r));const i=new am(r,e.localStore,t.yt);let s=await t.mc();for(;s;){const e=await i.Fu(s);e&&n._updateProgress(e),s=await t.mc()}const o=await i.complete();return await Am(e,o.Lu,void 0),await function(e,t){const n=Bo(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Ns.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Bu)}catch(e){return Uo("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Sg(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Bo(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Ns.getNamedQuery(e,t)))}(await _g(e),t)))}(Pg(e=Zm(e,Ag)),t).then((t=>t?new ig(e,null,t.query):null))}(this._delegate,e).then((e=>e?new dv(this,e):null))}}class tv extends Ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jy(new Dg(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sv.forKey(t,this.firestore,null)}}class nv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tv(e)}get(e){const t=mv(e);return this._delegate.get(t).then((e=>new cv(this._firestore,new Ry(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=mv(e);return n?(Ky("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=mv(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=mv(e);return this._delegate.delete(t),this}}class rv{constructor(e){this._delegate=e}set(e,t,n){const r=mv(e);return n?(Ky("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=mv(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=mv(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class iv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Ly(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uv(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=iv.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new iv(e,new tv(e),t),r.set(t,i)),i}}iv.INSTANCES=new WeakMap;class sv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tv(e)}static forPath(e,t,n){if(e.length%2!=0)throw new $o("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sv(t,new rg(t._delegate,n,new ha(e)))}static forKey(e,t,n){return new sv(t,new rg(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new pv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pv(this.firestore,og(this._delegate,e))}catch(e){throw ov(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=vt(e))instanceof rg&&lg(this._delegate,e)}set(e,t){t=Ky("DocumentReference.set",t);try{return t?Uy(this._delegate,e,t):Uy(this._delegate,e)}catch(e){throw ov(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?Vy(this._delegate,e):Vy(this._delegate,e,t,...n)}catch(e){throw ov(e,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return qy(Zm(e.firestore,Ag),[new ru(e._key,Gc.none())])}(this._delegate)}onSnapshot(...e){const t=av(e),n=lv(e,(e=>new cv(this.firestore,new Ry(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return zy(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Zm(e,rg);const t=Zm(e.firestore,Ag),n=Pg(t),r=new jy(t);return function(e,t){const n=new Wo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Bo(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new $o(Go.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Hp(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await _g(e),t,n))),n.promise}(n,e._key).then((n=>new Ry(t,r,e._key,n,new Oy(null!==n&&n.hasLocalMutations,!0),e.converter)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Zm(e,rg);const t=Zm(e.firestore,Ag);return kg(Pg(t),e._key,{source:"server"}).then((n=>By(t,e,n)))}(this._delegate):function(e){e=Zm(e,rg);const t=Zm(e.firestore,Ag);return kg(Pg(t),e._key).then((n=>By(t,e,n)))}(this._delegate),t.then((e=>new cv(this.firestore,new Ry(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new sv(this.firestore,e?this._delegate.withConverter(iv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ov(e,t,n){return e.message=e.message.replace(t,n),e}function av(e){for(const t of e)if("object"==typeof t&&!Zy(t))return t;return{}}function lv(e,t){var n,r;let i;return i=Zy(e[0])?e[0]:Zy(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class cv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Fy(this._delegate,e._delegate)}}class uv extends cv{data(e){const t=this._delegate.data(e);return function(e,t){e||zo()}(void 0!==t),t}}class dv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tv(e)}where(e,t,n){try{return new dv(this.firestore,yy(this._delegate,function(e,t,n){const r=t,i=fy("where",e);return vy._create(i,r,n)}(e,t,n)))}catch(e){throw ov(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new dv(this.firestore,yy(this._delegate,function(e,t="asc"){const n=t,r=fy("orderBy",e);return by._create(r,n)}(e,t)))}catch(e){throw ov(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new dv(this.firestore,yy(this._delegate,function(e){return Xm("limit",e),_y._create("limit",e,"F")}(e)))}catch(e){throw ov(e,"limit()","Query.limit()")}}limitToLast(e){try{return new dv(this.firestore,yy(this._delegate,function(e){return Xm("limitToLast",e),_y._create("limitToLast",e,"L")}(e)))}catch(e){throw ov(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new dv(this.firestore,yy(this._delegate,function(...e){return Ey._create("startAt",e,!0)}(...e)))}catch(e){throw ov(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new dv(this.firestore,yy(this._delegate,function(...e){return Ey._create("startAfter",e,!1)}(...e)))}catch(e){throw ov(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new dv(this.firestore,yy(this._delegate,function(...e){return Sy._create("endBefore",e,!1)}(...e)))}catch(e){throw ov(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new dv(this.firestore,yy(this._delegate,function(...e){return Sy._create("endAt",e,!0)}(...e)))}catch(e){throw ov(e,"endAt()","Query.endAt()")}}isEqual(e){return cg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Zm(e,ig);const t=Zm(e.firestore,Ag),n=Pg(t),r=new jy(t);return function(e,t){const n=new Wo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await qf(e,t,!0),i=new dm(t,r.Hi),s=i.Wu(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Hp(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await _g(e),t,n))),n.promise}(n,e._query).then((n=>new Dy(t,r,e,n)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Zm(e,ig);const t=Zm(e.firestore,Ag),n=Pg(t),r=new jy(t);return Ig(n,e._query,{source:"server"}).then((n=>new Dy(t,r,e,n)))}(this._delegate):function(e){e=Zm(e,ig);const t=Zm(e.firestore,Ag),n=Pg(t),r=new jy(t);return py(e._query),Ig(n,e._query).then((n=>new Dy(t,r,e,n)))}(this._delegate),t.then((e=>new fv(this.firestore,new Dy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=av(e),n=lv(e,(e=>new fv(this.firestore,new Dy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return zy(this._delegate,t,n)}withConverter(e){return new dv(this.firestore,e?this._delegate.withConverter(iv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class hv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new uv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new dv(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new uv(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new hv(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new uv(this._firestore,n))}))}isEqual(e){return Fy(this._delegate,e._delegate)}}class pv extends dv{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sv(this.firestore,e):null}doc(e){try{return new sv(this.firestore,void 0===e?ag(this._delegate):ag(this._delegate,e))}catch(e){throw ov(e,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Zm(e.firestore,Ag),r=ag(e),i=Ay(e.converter,t);return qy(n,[Wg($g(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gc.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new sv(this.firestore,e)))}isEqual(e){return lg(this._delegate,e._delegate)}withConverter(e){return new pv(this.firestore,e?this._delegate.withConverter(iv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function mv(e){return Zm(e,rg)}class gv{constructor(...e){this._delegate=new Mg(...e)}static documentId(){return new gv(da.keyField().canonicalString())}isEqual(e){return(e=vt(e))instanceof Mg&&this._delegate._internalPath.isEqual(e._internalPath)}}class yv{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Qg("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new yv(e)}static delete(){const e=new Hg("deleteField");return e._methodName="FieldValue.delete",new yv(e)}static arrayUnion(...e){const t=function(...e){return new Yg("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new yv(t)}static arrayRemove(...e){const t=function(...e){return new Jg("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new yv(t)}static increment(e){const t=function(e){return new Zg("increment",e)}(e);return t._methodName="FieldValue.increment",new yv(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vv={Firestore:ev,GeoPoint:jg,Timestamp:oa,Blob:Jy,Transaction:nv,WriteBatch:rv,DocumentReference:sv,DocumentSnapshot:cv,Query:dv,QueryDocumentSnapshot:uv,QuerySnapshot:fv,CollectionReference:pv,FieldPath:gv,FieldValue:yv,setLogLevel:function(e){!function(e){Do.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};var wv;function bv(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(function(e,t){e.INTERNAL.registerComponent(new wt("firestore-compat",(e=>((e,t)=>new ev(e,t,new Xy))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())),"PUBLIC").setServiceProps(Object.assign({},vv)))})(wv=Nn),wv.registerVersion("@firebase/firestore-compat","0.3.1"),Object.create,Object.create;const _v=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ev=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Sv=new Qe("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xv=new Nt("@firebase/auth");function kv(e,...t){xv.logLevel<=xt.ERROR&&xv.error(`Auth (${ln}): ${e}`,...t)}function Iv(e,...t){throw Av(e,...t)}function Tv(e,...t){return Av(e,...t)}function Cv(e,t,n){const r=Object.assign(Object.assign({},Ev()),{[t]:n});return new Qe("auth","Firebase",r).create(t,{appName:e.name})}function Nv(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Iv(e,"argument-error"),Cv(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Av(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Sv.create(e,...t)}function Pv(e,t,...n){if(!e)throw Av(t,...n)}function Ov(e){const t="INTERNAL ASSERTION FAILED: "+e;throw kv(t),new Error(t)}function Rv(e,t){e||Ov(t)}const Lv=new Map;function Dv(e){Rv(e instanceof Function,"Expected a class definition");let t=Lv.get(e);return t?(Rv(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Lv.set(e,t),t)}function Mv(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Fv(){return"http:"===jv()||"https:"===jv()}function jv(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Uv{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rv(t>e,"Short delay should be less than long delay!"),this.isMobile=qe()||$e()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Fv()||Ge()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Vv(e,t){Rv(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class zv{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ov("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ov("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ov("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Bv=new Uv(3e4,6e4);function Gv(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function $v(e,t,n,r,i={}){return Wv(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=ot(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),zv.fetch()(Kv(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Wv(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},qv),t);try{const t=new Qv(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Yv(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Yv(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Yv(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Yv(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Cv(e,a,o);Iv(e,a)}}catch(t){if(t instanceof Ke)throw t;Iv(e,"network-request-failed")}}async function Hv(e,t,n,r,i={}){const s=await $v(e,t,n,r,i);return"mfaPendingCredential"in s&&Iv(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Kv(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Vv(e.config,i):`${e.config.apiScheme}://${i}`}class Qv{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Tv(this.auth,"network-request-failed"))),Bv.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yv(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Tv(e,t,r);return i.customData._tokenResponse=n,i}function Jv(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Zv(e){return 1e3*Number(e)}function Xv(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return kv("JWT malformed, contained fewer than 3 sections"),null;try{const e=Me(n);return e?JSON.parse(e):(kv("Failed to decode base64 JWT payload"),null)}catch(e){return kv("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function ew(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Ke&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class tw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class nw{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jv(this.lastLoginAt),this.creationTime=Jv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function rw(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ew(e,async function(e,t){return $v(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Pv(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=bv(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nw(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class iw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pv(e.idToken,"internal-error"),Pv(void 0!==e.idToken,"internal-error"),Pv(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Xv(e);return Pv(t,"internal-error"),Pv(void 0!==t.exp,"internal-error"),Pv(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Pv(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Wv(e,{},(async()=>{const n=ot({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Kv(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",zv.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new iw;return n&&(Pv("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Pv("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Pv("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new iw,this.toJSON())}_performRefresh(){return Ov("not implemented")}}function sw(e,t){Pv("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ow{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=bv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ew(this,this.stsTokenManager.getToken(this.auth,e));return Pv(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=vt(e),r=await n.getIdToken(t),i=Xv(r);Pv(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Jv(Zv(i.auth_time)),issuedAtTime:Jv(Zv(i.iat)),expirationTime:Jv(Zv(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=vt(e);await rw(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Pv(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ow(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Pv(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await rw(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ew(this,async function(e,t){return $v(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;Pv(v&&E,e,"internal-error");const S=iw.fromJSON(this.name,E);Pv("string"==typeof v,e,"internal-error"),sw(u,e.name),sw(d,e.name),Pv("boolean"==typeof w,e,"internal-error"),Pv("boolean"==typeof b,e,"internal-error"),sw(h,e.name),sw(f,e.name),sw(p,e.name),sw(m,e.name),sw(g,e.name),sw(y,e.name);const x=new ow({uid:v,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(x.providerData=_.map((e=>Object.assign({},e)))),m&&(x._redirectEventId=m),x}static async _fromIdTokenResponse(e,t,n=!1){const r=new iw;r.updateFromServerResponse(t);const i=new ow({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await rw(i),i}}class aw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}aw.type="NONE";const lw=aw;function cw(e,t,n){return`firebase:${e}:${t}:${n}`}class uw{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=cw(this.userKey,r.apiKey,i),this.fullPersistenceKey=cw("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ow._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new uw(Dv(lw),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Dv(lw);const s=cw(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=ow._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new uw(i,e,n)):new uw(i,e,n)}}function dw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(mw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(hw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(yw(t))return"Blackberry";if(vw(t))return"Webos";if(fw(t))return"Safari";if((t.includes("chrome/")||pw(t))&&!t.includes("edge/"))return"Chrome";if(gw(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function hw(e=ze()){return/firefox\//i.test(e)}function fw(e=ze()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function pw(e=ze()){return/crios\//i.test(e)}function mw(e=ze()){return/iemobile/i.test(e)}function gw(e=ze()){return/android/i.test(e)}function yw(e=ze()){return/blackberry/i.test(e)}function vw(e=ze()){return/webos/i.test(e)}function ww(e=ze()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function bw(e=ze()){return ww(e)||gw(e)||vw(e)||yw(e)||/windows phone/i.test(e)||mw(e)}function _w(e,t=[]){let n;switch(e){case"Browser":n=dw(ze());break;case"Worker":n=`${dw(ze())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ln}/${r}`}class Ew{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Sw{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kw(this),this.idTokenSubscription=new kw(this),this.beforeStateQueue=new Ew(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sv,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dv(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await uw.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pv(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rw(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?vt(e):null;return t&&Pv(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pv(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Dv(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qe("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Dv(e)||this._popupRedirectResolver;Pv(t,this,"argument-error"),this.redirectPersistenceManager=await uw.create(this,[Dv(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Pv(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pv(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_w(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function xw(e){return vt(e)}class kw{constructor(e){this.auth=e,this.observer=null,this.addObserver=ut((e=>this.observer=e))}get next(){return Pv(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Iw(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Tw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Cw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ov("not implemented")}_getIdTokenResponse(e){return Ov("not implemented")}_linkToIdToken(e,t){return Ov("not implemented")}_getReauthenticationResolver(e){return Ov("not implemented")}}async function Nw(e,t){return $v(e,"POST","/v1/accounts:resetPassword",Gv(e,t))}async function Aw(e,t){return $v(e,"POST","/v1/accounts:update",t)}async function Pw(e,t){return $v(e,"POST","/v1/accounts:sendOobCode",Gv(e,t))}class Ow extends Cw{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ow(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ow(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return Hv(e,"POST","/v1/accounts:signInWithPassword",Gv(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Hv(e,"POST","/v1/accounts:signInWithEmailLink",Gv(e,t))}(e,{email:this._email,oobCode:this._password});default:Iv(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Aw(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Hv(e,"POST","/v1/accounts:signInWithEmailLink",Gv(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Iv(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Rw(e,t){return Hv(e,"POST","/v1/accounts:signInWithIdp",Gv(e,t))}class Lw extends Cw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Lw(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Iv("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=bv(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Lw(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Rw(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Rw(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Rw(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ot(t)}return e}}const Dw={USER_NOT_FOUND:"user-not-found"};class Mw extends Cw{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Mw({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Mw({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Hv(e,"POST","/v1/accounts:signInWithPhoneNumber",Gv(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Hv(e,"POST","/v1/accounts:signInWithPhoneNumber",Gv(e,t));if(n.temporaryProof)throw Yv(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Hv(e,"POST","/v1/accounts:signInWithPhoneNumber",Gv(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Dw)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Mw({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Fw{constructor(e){var t,n,r,i,s,o;const a=at(lt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Pv(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=at(lt(e)).link,n=t?at(lt(t)).deep_link_id:null,r=at(lt(e)).deep_link_id;return(r?at(lt(r)).link:null)||r||n||t||e}(e);try{return new Fw(t)}catch(e){return null}}}class jw{constructor(){this.providerId=jw.PROVIDER_ID}static credential(e,t){return Ow._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Fw.parseLink(t);return Pv(n,"argument-error"),Ow._fromEmailAndCode(e,n.code,n.tenantId)}}jw.PROVIDER_ID="password",jw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",jw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Uw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Vw extends Uw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zw extends Vw{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return Pv("providerId"in t&&"signInMethod"in t,"argument-error"),Lw._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Pv(e.idToken||e.accessToken,"argument-error"),Lw._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return zw.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return zw.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new zw(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(e){return null}}}class qw extends Vw{constructor(){super("facebook.com")}static credential(e){return Lw._fromParams({providerId:qw.PROVIDER_ID,signInMethod:qw.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qw.credentialFromTaggedObject(e)}static credentialFromError(e){return qw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return qw.credential(e.oauthAccessToken)}catch(e){return null}}}qw.FACEBOOK_SIGN_IN_METHOD="facebook.com",qw.PROVIDER_ID="facebook.com";class Bw extends Vw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Lw._fromParams({providerId:Bw.PROVIDER_ID,signInMethod:Bw.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bw.credentialFromTaggedObject(e)}static credentialFromError(e){return Bw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Bw.credential(t,n)}catch(e){return null}}}Bw.GOOGLE_SIGN_IN_METHOD="google.com",Bw.PROVIDER_ID="google.com";class Gw extends Vw{constructor(){super("github.com")}static credential(e){return Lw._fromParams({providerId:Gw.PROVIDER_ID,signInMethod:Gw.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gw.credentialFromTaggedObject(e)}static credentialFromError(e){return Gw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Gw.credential(e.oauthAccessToken)}catch(e){return null}}}Gw.GITHUB_SIGN_IN_METHOD="github.com",Gw.PROVIDER_ID="github.com";class $w extends Cw{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Rw(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Rw(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Rw(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new $w(n,i):null}static _create(e,t){return new $w(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ww extends Uw{constructor(e){Pv(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Ww.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ww.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=$w.fromJSON(e);return Pv(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return $w._create(n,t)}catch(e){return null}}}class Hw extends Vw{constructor(){super("twitter.com")}static credential(e,t){return Lw._fromParams({providerId:Hw.PROVIDER_ID,signInMethod:Hw.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hw.credentialFromTaggedObject(e)}static credentialFromError(e){return Hw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Hw.credential(t,n)}catch(e){return null}}}async function Kw(e,t){return Hv(e,"POST","/v1/accounts:signUp",Gv(e,t))}Hw.TWITTER_SIGN_IN_METHOD="twitter.com",Hw.PROVIDER_ID="twitter.com";class Qw{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await ow._fromIdTokenResponse(e,n,r),s=Yw(n);return new Qw({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Yw(n);return new Qw({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Yw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Jw extends Ke{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Jw.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Jw(e,t,n,r)}}function Zw(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Jw._fromErrorAndOperation(e,n,t,r);throw n}))}function Xw(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}async function eb(e,t,n=!1){const r=await ew(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Qw._forOperation(e,"link",r)}async function tb(e,t,n){await rw(t);const r=!1===e?"provider-already-linked":"no-such-provider";Pv(Xw(t.providerData).has(n)===e,t.auth,r)}async function nb(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await ew(e,Zw(r,i,t,e),n);Pv(s.idToken,r,"internal-error");const o=Xv(s.idToken);Pv(o,r,"internal-error");const{sub:a}=o;return Pv(e.uid===a,r,"user-mismatch"),Qw._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Iv(r,"user-mismatch"),e}}async function rb(e,t,n=!1){const r="signIn",i=await Zw(e,r,t),s=await Qw._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ib(e,t){return rb(xw(e),t)}async function sb(e,t){const n=vt(e);return await tb(!1,n,t.providerId),eb(n,t)}async function ob(e,t){return nb(vt(e),t)}class ab{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?lb._fromServerResponse(e,t):Iv(e,"internal-error")}}class lb extends ab{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new lb(t)}}function cb(e,t,n){var r;Pv((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Pv(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Pv(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Pv(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ub(e,t){const n=vt(e),r=await Nw(n,{oobCode:t}),i=r.requestType;switch(Pv(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Pv(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Pv(r.mfaInfo,n,"internal-error");default:Pv(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=ab._fromServerResponse(xw(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function db(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await ew(e,Aw(r,i));await e._updateTokensIfNecessary(s,!0)}class hb{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class fb extends hb{constructor(e,t,n,r){super(e,t,n),this.username=r}}class pb extends hb{constructor(e,t){super(e,"facebook.com",t)}}class mb extends fb{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class gb extends hb{constructor(e,t){super(e,"google.com",t)}}class yb extends fb{constructor(e,t,n){super(e,"twitter.com",t,n)}}function vb(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Xv(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new hb(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new pb(s,i);case"github.com":return new mb(s,i);case"google.com":return new gb(s,i);case"twitter.com":return new yb(s,i,e.screenName||null);case"custom":case"anonymous":return new hb(s,null);default:return new hb(s,r,i)}}(n)}class wb{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new wb("enroll",e,t)}static _fromMfaPendingCredential(e){return new wb("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return wb._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return wb._fromIdtoken(e.multiFactorSession.idToken)}return null}}class bb{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=xw(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>ab._fromServerResponse(n,e)));Pv(r.mfaPendingCredential,n,"internal-error");const s=wb._fromMfaPendingCredential(r.mfaPendingCredential);return new bb(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Qw._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Pv(t.user,n,"internal-error"),Qw._forOperation(t.user,t.operationType,o);default:Iv(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class _b{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>ab._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new _b(e)}async getSession(){return wb._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,r=await this.getSession(),i=await ew(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken(),r=await ew(this.user,function(e,t){return $v(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Gv(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(e){if("auth/user-token-expired"!==(null==e?void 0:e.code))throw e}}}const Eb=new WeakMap,Sb="__sak";class xb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sb,"1"),this.storage.removeItem(Sb),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class kb extends xb{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=ze();return fw(e)||ww(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=bw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);We()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}kb.type="LOCAL";const Ib=kb;class Tb extends xb{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Tb.type="SESSION";const Cb=Tb;class Nb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Nb(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ab(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Nb.receivers=[];class Pb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Ab("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Ob(){return window}function Rb(){return void 0!==Ob().WorkerGlobalScope&&"function"==typeof Ob().importScripts}const Lb="firebaseLocalStorageDb",Db="firebaseLocalStorage",Mb="fbase_key";class Fb{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function jb(e,t){return e.transaction([Db],t?"readwrite":"readonly").objectStore(Db)}function Ub(){const e=indexedDB.open(Lb,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Db,{keyPath:Mb})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Db)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Lb);return new Fb(e).toPromise()}(),t(await Ub()))}))}))}async function Vb(e,t,n){const r=jb(e,!0).put({[Mb]:t,value:n});return new Fb(r).toPromise()}function zb(e,t){const n=jb(e,!0).delete(t);return new Fb(n).toPromise()}class qb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ub()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nb._getInstance(Rb()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Pb(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ub();return await Vb(e,Sb,"1"),await zb(e,Sb),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Vb(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=jb(e,!1).get(t),r=await new Fb(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>zb(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=jb(e,!1).getAll();return new Fb(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}qb.type="LOCAL";const Bb=qb;function Gb(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Tv("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function $b(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Wb=1e12;class Hb{constructor(e){this.auth=e,this.counter=Wb,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Kb(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Wb;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Wb;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Wb;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Kb{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;Pv(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qb=$b("rcb"),Yb=new Uv(3e4,6e4);class Jb{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Ob().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return Pv(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Ob().grecaptcha):new Promise(((n,r)=>{const i=Ob().setTimeout((()=>{r(Tv(e,"network-request-failed"))}),Yb.get());Ob()[Qb]=()=>{Ob().clearTimeout(i),delete Ob()[Qb];const s=Ob().grecaptcha;if(!s)return void r(Tv(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},Gb(`https://www.google.com/recaptcha/api.js??${ot({onload:Qb,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(i),r(Tv(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Ob().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Zb{async load(e){return new Hb(e)}clearedOneInstance(){}}const Xb="recaptcha",e_={theme:"light",type:"image"};class t_{constructor(e,t=Object.assign({},e_),n){this.parameters=t,this.type=Xb,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xw(n),this.isInvisible="invisible"===this.parameters.size,Pv("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;Pv(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zb:new Jb,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha();return t.getResponse(e)||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Pv(!this.parameters.sitekey,this.auth,"argument-error"),Pv(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pv("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=Ob()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){Pv(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Pv(Fv()&&!Rb(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await $v(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Pv(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Pv(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class n_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Mw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function r_(e,t,n){var r;const i=await n.verify();try{let s;if(Pv("string"==typeof i,e,"argument-error"),Pv(n.type===Xb,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Pv("enroll"===t.type,e,"internal-error");const n=await function(e,t){return $v(e,"POST","/v2/accounts/mfaEnrollment:start",Gv(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Pv("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Pv(n,e,"missing-multi-factor-info");const o=await function(e,t){return $v(e,"POST","/v2/accounts/mfaSignIn:start",Gv(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return $v(e,"POST","/v1/accounts:sendVerificationCode",Gv(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class i_{constructor(e){this.providerId=i_.PROVIDER_ID,this.auth=xw(e)}verifyPhoneNumber(e,t){return r_(this.auth,e,vt(t))}static credential(e,t){return Mw._fromVerification(e,t)}static credentialFromResult(e){const t=e;return i_.credentialFromTaggedObject(t)}static credentialFromError(e){return i_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Mw._fromTokenResponse(t,n):null}}function s_(e,t){return t?Dv(t):(Pv(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}i_.PROVIDER_ID="phone",i_.PHONE_SIGN_IN_METHOD="phone";class o_ extends Cw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Rw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Rw(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function a_(e){return rb(e.auth,new o_(e),e.bypassAuthState)}function l_(e){const{auth:t,user:n}=e;return Pv(n,t,"internal-error"),nb(n,new o_(e),e.bypassAuthState)}async function c_(e){const{auth:t,user:n}=e;return Pv(n,t,"internal-error"),eb(n,new o_(e),e.bypassAuthState)}class u_{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a_;case"linkViaPopup":case"linkViaRedirect":return c_;case"reauthViaPopup":case"reauthViaRedirect":return l_;default:Iv(this.auth,"internal-error")}}resolve(e){Rv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const d_=new Uv(2e3,1e4);class h_ extends u_{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,h_.currentPopupAction&&h_.currentPopupAction.cancel(),h_.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pv(e,this.auth,"internal-error"),e}async onExecution(){Rv(1===this.filter.length,"Popup operations only handle one event");const e=Ab();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Tv(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Tv(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h_.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Tv(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,d_.get())};e()}}h_.currentPopupAction=null;const f_=new Map;class p_ extends u_{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=f_.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=v_(t),r=y_(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}f_.set(this.auth._key(),e)}return this.bypassAuthState||f_.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function m_(e,t){return y_(e)._set(v_(t),"true")}function g_(e,t){f_.set(e._key(),t)}function y_(e){return Dv(e._redirectPersistence)}function v_(e){return cw("pendingRedirect",e.config.apiKey,e.name)}async function w_(e,t,n=!1){const r=xw(e),i=s_(r,t),s=new p_(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function b_(e){const t=Ab(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class __{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S_(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!S_(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Tv(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(E_(e))}saveEventToCache(e){this.cachedEventUids.add(E_(e)),this.lastProcessedEventTime=Date.now()}}function E_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function S_({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function x_(e,t={}){return $v(e,"GET","/v1/projects",t)}const k_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I_=/^https?/;function T_(e){const t=Mv(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!I_.test(n))return!1;if(k_.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const C_=new Uv(3e4,6e4);function N_(){const e=Ob().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let A_=null;function P_(e){return A_=A_||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){N_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{N_(),n(Tv(e,"network-request-failed"))},timeout:C_.get()})}if(null===(i=null===(r=Ob().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ob().gapi)||void 0===s?void 0:s.load)){const t=$b("iframefcb");return Ob()[t]=()=>{gapi.load?o():n(Tv(e,"network-request-failed"))},Gb(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw A_=null,e}))}(e),A_}const O_=new Uv(5e3,15e3),R_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D_(e){const t=e.config;Pv(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Vv(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:ln},i=L_.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ot(r).slice(1)}`}const M_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class F_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function j_(e,t,n,r,i,s){Pv(e.config.authDomain,e,"auth-domain-config-required"),Pv(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ln,eventId:i};if(t instanceof Uw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",nt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Vw){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?Vv(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${ot(a).slice(1)}`}const U_="webStorageSupport",V_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cb,this._completeRedirectFn=w_,this._overrideRedirectResult=g_}async _openPopup(e,t,n,r){var i;return Rv(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},M_),{width:r.toString(),height:i.toString(),top:s,left:o}),c=ze().toLowerCase();n&&(a=pw(c)?"_blank":n),hw(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=ze()){var t;return ww(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new F_(null);const d=window.open(t||"",a,u);Pv(d,e,"popup-blocked");try{d.focus()}catch(e){}return new F_(d)}(e,j_(e,t,n,Mv(),r),Ab())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=j_(e,t,n,Mv(),r),Ob().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Rv(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await P_(e),n=Ob().gapi;return Pv(n,e,"internal-error"),t.open({where:document.body,url:D_(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R_,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Tv(e,"network-request-failed"),s=Ob().setTimeout((()=>{r(i)}),O_.get());function o(){Ob().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new __(e);return t.register("authEvent",(t=>(Pv(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(U_,{type:U_},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Iv(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await x_(e);for(const e of t)try{if(T_(e))return}catch(e){}Iv(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bw()||fw()||ww()}};class z_{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ov("unexpected MultiFactorSessionType")}}}class q_ extends z_{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new q_(e)}_finalizeEnroll(e,t,n){return function(e,t){return $v(e,"POST","/v2/accounts/mfaEnrollment:finalize",Gv(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return $v(e,"POST","/v2/accounts/mfaSignIn:finalize",Gv(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class B_{constructor(){}static assertion(e){return q_._fromCredential(e)}}B_.FACTOR_ID="phone";var G_,$_="@firebase/auth",W_="0.21.1";class H_{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pv(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function K_(){return window}(e=>{var t;null===(t=je())||void 0===t||t._authIdTokenMaxAge})(),G_="Browser",tn(new wt("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:i,authDomain:s}=n.options;return((e,n)=>{Pv(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),Pv(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const r={apiKey:i,authDomain:s,clientPlatform:G_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_w(G_)},o=new Sw(e,n,r);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dv);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),tn(new wt("auth-internal",(e=>(e=>new H_(e))(xw(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),fn($_,W_,void 0),fn($_,W_,"esm2017");class Q_ extends __{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Y_(e){const t=await Z_()._get(X_(e));return t&&await Z_()._remove(X_(e)),t}function J_(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Z_(){return Dv(Ib)}function X_(e){return cw("authEvent",e.config.apiKey,e.name)}function eE(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return at(n.join("?"))}const tE=class{constructor(){this._redirectPersistence=Cb,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=w_,this._overrideRedirectResult=g_}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Q_(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Iv(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const d=K_();Pv("function"==typeof(null===(t=null==d?void 0:d.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pv(void 0!==(null===(n=null==d?void 0:d.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pv("function"==typeof(null===(s=null===(i=null===(r=null==d?void 0:d.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pv("function"==typeof(null===(l=null===(a=null===(o=null==d?void 0:d.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pv("function"==typeof(null===(u=null===(c=null==d?void 0:d.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),f_.clear(),await this._originValidation(e);const s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:J_(),postBody:null,tenantId:e.tenantId,error:Tv(e,"no-auth-event")}}(e,n,r);await function(e,t){return Z_()._set(X_(e),t)}(e,s);const o=await async function(e,t,n){var r;const{BuildInfo:i}=K_();Rv(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Rv(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return ww()?o.ibi=i.packageName:gw()?o.apn=i.packageName:Iv(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,j_(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}(e,s,t);return async function(e,t,n){const{cordova:r}=K_();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(Tv(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),gw()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await function(e){const{cordova:t}=K_();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=ze()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=K_(),n={};ww()?n.iosBundleId=t.packageName:gw()?n.androidPackageName=t.packageName:Iv(e,"operation-not-supported-in-this-environment"),await x_(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=K_(),s=setTimeout((async()=>{await Y_(e),t.onEvent(nE())}),500),o=async n=>{clearTimeout(s);const r=await Y_(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=eE(e),n=t.link?decodeURIComponent(t.link):void 0,r=eE(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return eE(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=eE(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Tv(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||nE())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);const a=r,l=`${i.packageName.toLowerCase()}://`;K_().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"==typeof a)try{a(e)}catch(e){console.error(e)}}}};function nE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Tv("no-auth-event")}}function rE(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function iE(e=ze()){return!("file:"!==rE()&&"ionic:"!==rE()&&"capacitor:"!==rE()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function sE(){try{const e=self.localStorage,t=Ab();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=ze()){return We()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=ze()){return/Edge\/\d+/.test(e)}(e)}()||He()}catch(e){return oE()&&He()}return!1}function oE(){return void 0!==i.g&&"WorkerGlobalScope"in i.g&&"importScripts"in i.g}function aE(){return("http:"===rE()||"https:"===rE()||Ge()||iE())&&!($e()||Be())&&sE()&&!oE()}function lE(){return iE()&&"undefined"!=typeof document}const cE={LOCAL:"local",NONE:"none",SESSION:"session"},uE=Pv,dE="persistence";async function hE(e){await e._initializationPromise;const t=fE(),n=cw(dE,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function fE(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}const pE=Pv;class mE{constructor(){this.browserResolver=Dv(V_),this.cordovaResolver=Dv(tE),this.underlyingResolver=null,this._redirectPersistence=Cb,this._completeRedirectFn=w_,this._overrideRedirectResult=g_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return lE()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pE(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!lE()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function gE(e){return e.unwrap()}function yE(e){const{_tokenResponse:t}=e instanceof Ke?e.customData:e;if(!t)return null;if(!(e instanceof Ke)&&"temporaryProof"in t&&"phoneNumber"in t)return i_.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=Bw;break;case"facebook.com":r=qw;break;case"github.com":r=Gw;break;case"twitter.com":r=Hw;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?$w._create(n,o):Lw._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new zw(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Ke?r.credentialFromError(e):r.credentialFromResult(e)}function vE(e,t){return t.catch((t=>{throw t instanceof Ke&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null==t?void 0:t.code))t.resolver=new bE(e,function(e,t){var n;const r=vt(e),i=t;return Pv(t.customData.operationType,r,"argument-error"),Pv(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bb._fromError(r,i)}(e,t));else if(r){const e=yE(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,yE(r)),additionalUserInfo:vb(e),user:_E.getOrCreate(n)};var r}))}async function wE(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>vE(e,n.confirm(t))}}class bE{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return vE(gE(this.auth),this.resolver.resolveSignIn(e))}}class _E{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=vt(e);return Eb.has(t)||Eb.set(t,_b._fromUser(t)),Eb.get(t)}(e)}static getOrCreate(e){return _E.USER_MAP.has(e)||_E.USER_MAP.set(e,new _E(e)),_E.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return vE(this.auth,sb(this._delegate,e))}async linkWithPhoneNumber(e,t){return wE(this.auth,async function(e,t,n){const r=vt(e);await tb(!1,r,"phone");const i=await r_(r.auth,t,vt(n));return new n_(i,(e=>sb(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return vE(this.auth,async function(e,t,n){const r=vt(e);Nv(r.auth,t,Uw);const i=s_(r.auth,n);return new h_(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,mE))}async linkWithRedirect(e){return await hE(xw(this.auth)),function(e,t,n){return async function(e,t,n){const r=vt(e);Nv(r.auth,t,Uw),await r.auth._initializationPromise;const i=s_(r.auth,n);await tb(!1,r,t.providerId),await m_(i,r.auth);const s=await b_(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}(this._delegate,e,mE)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return vE(this.auth,ob(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return wE(this.auth,async function(e,t,n){const r=vt(e),i=await r_(r.auth,t,vt(n));return new n_(i,(e=>ob(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return vE(this.auth,async function(e,t,n){const r=vt(e);Nv(r.auth,t,Uw);const i=s_(r.auth,n);return new h_(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,mE))}async reauthenticateWithRedirect(e){return await hE(xw(this.auth)),function(e,t,n){return async function(e,t,n){const r=vt(e);Nv(r.auth,t,Uw),await r.auth._initializationPromise;const i=s_(r.auth,n);await m_(i,r.auth);const s=await b_(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}(this._delegate,e,mE)}sendEmailVerification(e){return async function(e,t){const n=vt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&cb(n.auth,r,t);const{email:i}=await async function(e,t){return Pw(e,t)}(n.auth,r);i!==e.email&&await e.reload()}(this._delegate,e)}async unlink(e){return await async function(e,t){const n=vt(e);await tb(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return $v(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Xw(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}(this._delegate,e),this}updateEmail(e){return function(e,t){return db(vt(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return db(vt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await eb(vt(e),t)}(this._delegate,e)}updateProfile(e){return async function(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=vt(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=await ew(r,async function(e,t){return $v(e,"POST","/v1/accounts:update",t)}(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find((({providerId:e})=>"password"===e));o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return async function(e,t,n){const r=vt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&cb(r.auth,i,n);const{email:s}=await async function(e,t){return Pw(e,t)}(r.auth,i);s!==e.email&&await e.reload()}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_E.USER_MAP=new WeakMap;const EE=Pv;class SE{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;EE(n,"invalid-api-key",{appName:e.name}),EE(n,"invalid-api-key",{appName:e.name});const r="undefined"!=typeof window?mE:void 0;this._delegate=t.initialize({options:{persistence:kE(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(_v),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_E.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=xw(e);Pv(r._canInitEmulator,r,"emulator-config-failed"),Pv(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Iw(t),{host:o,port:a}=function(e){const t=Iw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Tw(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Tw(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return async function(e,t){await async function(e,t){return $v(e,"POST","/v1/accounts:update",Gv(e,t))}(vt(e),{oobCode:t})}(this._delegate,e)}checkActionCode(e){return ub(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Nw(vt(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return vE(this._delegate,async function(e,t,n){const r=xw(e),i=await Kw(r,{returnSecureToken:!0,email:t,password:n}),s=await Qw._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return async function(e,t){const n={identifier:t,continueUri:Fv()?Mv():"http://localhost"},{signinMethods:r}=await async function(e,t){return $v(e,"POST","/v1/accounts:createAuthUri",Gv(e,t))}(vt(e),n);return r||[]}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Fw.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){EE(aE(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await xw(e)._initializationPromise,w_(e,t,!1)}(this._delegate,mE);return e?vE(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){xw(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=xE(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=xE(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=vt(e),i={requestType:"EMAIL_SIGNIN",email:t};Pv(n.handleCodeInApp,r,"argument-error"),n&&cb(r,i,n),await async function(e,t){return Pw(e,t)}(r,i)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=vt(e),i={requestType:"PASSWORD_RESET",email:t};n&&cb(r,i,n),await async function(e,t){return Pw(e,t)}(r,i)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){uE(Object.values(cE).includes(t),e,"invalid-persistence-type"),$e()?uE(t!==cE.SESSION,e,"unsupported-persistence-type"):Be()?uE(t===cE.NONE,e,"unsupported-persistence-type"):oE()?uE(t===cE.NONE||t===cE.LOCAL&&He(),e,"unsupported-persistence-type"):uE(t===cE.NONE||sE(),e,"unsupported-persistence-type")}(this._delegate,e),e){case cE.SESSION:t=Cb;break;case cE.LOCAL:t=await Dv(Bb)._isAvailable()?Bb:Ib;break;case cE.NONE:t=lw;break;default:return Iv("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return vE(this._delegate,async function(e){var t;const n=xw(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Qw({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Kw(n,{returnSecureToken:!0}),i=await Qw._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return vE(this._delegate,ib(this._delegate,e))}signInWithCustomToken(e){return vE(this._delegate,async function(e,t){const n=xw(e),r=await async function(e,t){return Hv(e,"POST","/v1/accounts:signInWithCustomToken",Gv(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Qw._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}(this._delegate,e))}signInWithEmailAndPassword(e,t){return vE(this._delegate,function(e,t,n){return ib(vt(e),jw.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return vE(this._delegate,async function(e,t,n){const r=vt(e),i=jw.credentialWithLink(t,n||Mv());return Pv(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ib(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return wE(this._delegate,async function(e,t,n){const r=xw(e),i=await r_(r,t,vt(n));return new n_(i,(e=>ib(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return EE(aE(),this._delegate,"operation-not-supported-in-this-environment"),vE(this._delegate,async function(e,t,n){const r=xw(e);Nv(e,t,Uw);const i=s_(r,n);return new h_(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,mE))}async signInWithRedirect(e){return EE(aE(),this._delegate,"operation-not-supported-in-this-environment"),await hE(this._delegate),function(e,t,n){return async function(e,t,n){const r=xw(e);Nv(e,t,Uw),await r._initializationPromise;const i=s_(r,n);return await m_(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}(this._delegate,e,mE)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ub(vt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function xE(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&_E.getOrCreate(e)),error:t,complete:n}}function kE(e,t){const n=function(e,t){const n=fE();if(!n)return[];const r=cw(dE,e,t);switch(n.getItem(r)){case cE.NONE:return[lw];case cE.LOCAL:return[Bb,Cb];case cE.SESSION:return[Cb];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(Bb)||n.push(Bb),"undefined"!=typeof window)for(const e of[Ib,Cb])n.includes(e)||n.push(e);return n.includes(lw)||n.push(lw),n}SE.Persistence=cE;class IE{constructor(){this.providerId="phone",this._delegate=new i_(gE(Nn.auth()))}static credential(e,t){return i_.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}IE.PHONE_SIGN_IN_METHOD=i_.PHONE_SIGN_IN_METHOD,IE.PROVIDER_ID=i_.PROVIDER_ID;const TE=Pv;class CE{constructor(e,t,n=Nn.app()){var r;TE(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new t_(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new wt("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new SE(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:jw,FacebookAuthProvider:qw,GithubAuthProvider:Gw,GoogleAuthProvider:Bw,OAuthProvider:zw,SAMLAuthProvider:Ww,PhoneAuthProvider:IE,PhoneMultiFactorGenerator:B_,RecaptchaVerifier:CE,TwitterAuthProvider:Hw,Auth:SE,AuthCredential:Cw,Error:Ke}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.3.1")}(Nn);const NE="@firebase/database",AE="0.14.1";let PE="";function OE(e){PE=e}class RE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ze(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Je(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class LE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return et(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const DE=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new RE(t)}}catch(e){}return new LE},ME=DE("localStorage"),FE=DE("sessionStorage"),jE=new Nt("@firebase/database"),UE=function(){let e=1;return function(){return e++}}(),VE=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Ae(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ct;n.update(t);const r=n.digest();return Re.encodeByteArray(r)},zE=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=zE.apply(null,r):t+="object"==typeof r?Ze(r):r,t+=" "}return t};let qE=null,BE=!0;const GE=function(e,t){Ae(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(jE.logLevel=xt.VERBOSE,qE=jE.log.bind(jE),t&&FE.set("logging_enabled",!0)):"function"==typeof e?qE=e:(qE=null,FE.remove("logging_enabled"))},$E=function(...e){if(!0===BE&&(BE=!1,null===qE&&!0===FE.get("logging_enabled")&&GE(!0)),qE){const t=zE.apply(null,e);qE(t)}},WE=function(e){return function(...t){$E(e,...t)}},HE=function(...e){const t="FIREBASE INTERNAL ERROR: "+zE(...e);jE.error(t)},KE=function(...e){const t=`FIREBASE FATAL ERROR: ${zE(...e)}`;throw jE.error(t),new Error(t)},QE=function(...e){const t="FIREBASE WARNING: "+zE(...e);jE.warn(t)},YE=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},JE="[MIN_NAME]",ZE="[MAX_NAME]",XE=function(e,t){if(e===t)return 0;if(e===JE||t===ZE)return-1;if(t===JE||e===ZE)return 1;{const n=aS(e),r=aS(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},eS=function(e,t){return e===t?0:e<t?-1:1},tS=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ze(t))},nS=function(e){if("object"!=typeof e||null===e)return Ze(e);const t=[];for(const n in e)t.push(n);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Ze(t[r]),n+=":",n+=nS(e[t[r]]);return n+="}",n},rS=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function iS(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const sS=function(e){Ae(!YE(e),"Invalid JSON number");let t,n,r,i,s;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=i+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));const o=[];for(s=52;s;s-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();const a=o.join("");let l="";for(s=0;s<64;s+=8){let e=parseInt(a.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},oS=new RegExp("^-?(0*)\\d{1,10}$"),aS=function(e){if(oS.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},lS=function(e){try{e()}catch(e){setTimeout((()=>{const t=e.stack||"";throw QE("Exception was thrown by user callback.",t),e}),Math.floor(0))}},cS=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class uS{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){QE(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dS{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?($E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',QE(e)}}class hS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}hS.OWNER="owner";const fS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pS="websocket",mS="long_polling";class gS{constructor(e,t,n,r,i=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ME.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ME.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function yS(e,t,n){let r;if(Ae("string"==typeof t,"typeof type must == string"),Ae("object"==typeof n,"typeof params must == object"),t===pS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==mS)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return iS(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class vS{constructor(){this.counters_={}}incrementCounter(e,t=1){et(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Fe(void 0,this.counters_)}}const wS={},bS={};function _S(e){const t=e.toString();return wS[t]||(wS[t]=new vS),wS[t]}class ES{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&lS((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class SS{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=WE(e),this.stats_=_S(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),yS(t,mS,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ES(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new xS(((...e)=>{const[t,n,r,i,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&fS.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){SS.forceAllow_=!0}static forceDisallow(){SS.forceDisallow_=!0}static isAvailable(){return!(!SS.forceAllow_&&(SS.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Ze(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Le(t),r=rS(n,1840);for(let e=0;e<r.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Ze(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class xS{constructor(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=UE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=xS.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(e){$E("frame writing exception"),e.stack&&$E(e.stack),$E(e)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||$E("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{$E("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}}),Math.floor(1))}}let kS=null;"undefined"!=typeof MozWebSocket?kS=MozWebSocket:"undefined"!=typeof WebSocket&&(kS=WebSocket);class IS{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=WE(this.connId),this.stats_=_S(t),this.connURL=IS.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={v:"5"};return"undefined"!=typeof location&&location.hostname&&fS.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s.ac=r),i&&(s.p=i),yS(e,pS,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ME.set("previous_websocket_failure",!0);try{let e;0,this.mySock=new kS(this.connURL,[],e)}catch(e){this.log_("Error instantiating WebSocket.");const t=e.message||e.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){IS.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==kS&&!IS.forceDisallow_}static previouslyFailed(){return ME.isInMemoryStorage||!0===ME.get("previous_websocket_failure")}markConnectionHealthy(){ME.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Je(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ae(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Ze(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=rS(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}IS.responsesRequiredToBeHealthy=2,IS.healthyTimeout=3e4;class TS{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[SS,IS]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=IS&&IS.isAvailable();let n=t&&!IS.previouslyFailed();if(e.webSocketOnly&&(t||QE("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[IS];else{const e=this.transports_=[];for(const t of TS.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);TS.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TS.globalTransportInitialized_=!1;class CS{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=WE("c:"+this.id+":"),this.transportManager_=new TS(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=cS((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=tS("t",e),n=tS("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=tS("t",e),n=tS("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=tS("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?HE("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):HE("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&QE("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),cS((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cS((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ME.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class NS{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class AS{constructor(e){this.allowedEvents_=e,this.listeners_={},Ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context))return void r.splice(e,1)}validateEventType_(e){Ae(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class PS extends AS{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||qe()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new PS}getInitialEvent(e){return Ae("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class OS{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function RS(){return new OS("")}function LS(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function DS(e){return e.pieces_.length-e.pieceNum_}function MS(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new OS(e.pieces_,t)}function FS(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function jS(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function US(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new OS(t,0)}function VS(e,t){const n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof OS)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new OS(n,0)}function zS(e){return e.pieceNum_>=e.pieces_.length}function qS(e,t){const n=LS(e),r=LS(t);if(null===n)return t;if(n===r)return qS(MS(e),MS(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function BS(e,t){const n=jS(e,0),r=jS(t,0);for(let e=0;e<n.length&&e<r.length;e++){const t=XE(n[e],r[e]);if(0!==t)return t}return n.length===r.length?0:n.length<r.length?-1:1}function GS(e,t){if(DS(e)!==DS(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function $S(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(DS(e)>DS(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class WS{constructor(e,t){this.errorPrefix_=t,this.parts_=jS(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=yt(this.parts_[e]);HS(this)}}function HS(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+KS(e))}function KS(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class QS extends AS{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new QS}getInitialEvent(e){return Ae("visible"===e,"Unknown event type: "+e),[this.visible_]}}const YS=1e3;class JS extends NS{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=JS.nextPersistentConnectionId_++,this.log_=WE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=YS,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");QS.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&PS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r,a:e,b:t};this.log_(Ze(i)),Ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Ue,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ae(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;JS.warnOnListenWarnings_(s,t),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&et(e,"w")){const n=tt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();QE(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Xe(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Xe(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ze(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):HE("Unrecognized action received from server: "+Ze(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=YS,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=YS,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=YS),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+JS.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Ae(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?$E("getToken() completed but was canceled"):($E("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new CS(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{QE(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(e){this.log_("Failed to get token: "+e),s||(this.repoInfo_.nodeAdmin&&QE(e),a())}}}interrupt(e){$E("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){$E("Resuming connection for reason: "+e),delete this.interruptReasons_[e],nt(this.interruptReasons_)&&(this.reconnectDelay_=YS,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>nS(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new OS(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){$E("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){$E("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+PE.replace(/\./g,"-")]=1,qe()?e["framework.cordova"]=1:$e()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=PS.getInstance().currentlyOnline();return nt(this.interruptReasons_)&&e}}JS.nextPersistentConnectionId_=0,JS.nextConnectionId_=0;class ZS{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ZS(e,t)}}class XS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new ZS(JE,e),r=new ZS(JE,t);return 0!==this.compare(n,r)}minPost(){return ZS.MIN}}let ex;class tx extends XS{static get __EMPTY_NODE(){return ex}static set __EMPTY_NODE(e){ex=e}compare(e,t){return XE(e.name,t.name)}isDefinedOn(e){throw Pe("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ZS.MIN}maxPost(){return new ZS(ZE,ex)}makePost(e,t){return Ae("string"==typeof e,"KeyIndex indexValue must always be a string."),new ZS(e,ex)}toString(){return".key"}}const nx=new tx;class rx{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ix{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ix.RED,this.left=null!=r?r:sx.EMPTY_NODE,this.right=null!=i?i:sx.EMPTY_NODE}copy(e,t,n,r,i){return new ix(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return sx.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return sx.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ix.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ix.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ix.RED=!0,ix.BLACK=!1;class sx{constructor(e,t=sx.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new sx(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ix.BLACK,null,null))}remove(e){return new sx(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ix.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rx(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new rx(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new rx(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new rx(this.root_,null,this.comparator_,!0,e)}}function ox(e,t){return XE(e.name,t.name)}function ax(e,t){return XE(e,t)}let lx;sx.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new ix(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const cx=function(e){return"number"==typeof e?"number:"+sS(e):"string:"+e},ux=function(e){if(e.isLeafNode()){const t=e.val();Ae("string"==typeof t||"number"==typeof t||"object"==typeof t&&et(t,".sv"),"Priority must be a string or number.")}else Ae(e===lx||e.isEmpty(),"priority of unexpected type.");Ae(e===lx||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let dx,hx,fx;class px{constructor(e,t=px.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ae(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ux(this.priorityNode_)}static set __childrenNodeConstructor(e){dx=e}static get __childrenNodeConstructor(){return dx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new px(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:px.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return zS(e)?this:".priority"===LS(e)?this.priorityNode_:px.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:px.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=LS(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Ae(".priority"!==n||1===DS(e),".priority must be the last token in a path"),this.updateImmediateChild(n,px.__childrenNodeConstructor.EMPTY_NODE.updateChild(MS(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+cx(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?sS(this.value_):this.value_,this.lazyHash_=VE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===px.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof px.__childrenNodeConstructor?-1:(Ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=px.VALUE_TYPE_ORDER.indexOf(t),i=px.VALUE_TYPE_ORDER.indexOf(n);return Ae(r>=0,"Unknown leaf type: "+t),Ae(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}px.VALUE_TYPE_ORDER=["object","boolean","number","string"];const mx=new class extends XS{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?XE(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ZS.MIN}maxPost(){return new ZS(ZE,new px("[PRIORITY-POST]",fx))}makePost(e,t){const n=hx(e);return new ZS(t,new px("[PRIORITY-POST]",n))}toString(){return".priority"}},gx=Math.log(2);class yx{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/gx,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const vx=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new ix(a,o.node,ix.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new ix(a,o.node,ix.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],d=n?n(u):u;l(new ix(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,ix.BLACK):(a(r,ix.BLACK),a(r,ix.RED))}return s}(new yx(e.length));return new sx(r||t,s)};let wx;const bx={};class _x{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Ae(bx&&mx,"ChildrenNode.ts has not been loaded"),wx=wx||new _x({".priority":bx},{".priority":mx}),wx}get(e){const t=tt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof sx?t:null}hasIndex(e){return et(this.indexSet_,e.toString())}addIndex(e,t){Ae(e!==nx,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(ZS.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?vx(n,e.getCompare()):bx;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new _x(c,l)}addToIndexes(e,t){const n=rt(this.indexes_,((n,r)=>{const i=tt(this.indexSet_,r);if(Ae(i,"Missing index implementation for "+r),n===bx){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(ZS.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),vx(n,i.getCompare())}return bx}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new ZS(e.name,r))),i.insert(e,e.node)}}));return new _x(n,this.indexSet_)}removeFromIndexes(e,t){const n=rt(this.indexes_,(n=>{if(n===bx)return n;{const r=t.get(e.name);return r?n.remove(new ZS(e.name,r)):n}}));return new _x(n,this.indexSet_)}}let Ex;class Sx{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ux(this.priorityNode_),this.children_.isEmpty()&&Ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ex||(Ex=new Sx(new sx(ax),null,_x.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ex}updatePriority(e){return this.children_.isEmpty()?this:new Sx(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Ex:t}}getChild(e){const t=LS(e);return null===t?this:this.getImmediateChild(t).getChild(MS(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Ae(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new ZS(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Ex:this.priorityNode_;return new Sx(r,s,i)}}updateChild(e,t){const n=LS(e);if(null===n)return t;{Ae(".priority"!==LS(e)||1===DS(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(MS(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(mx,((s,o)=>{t[s]=o.val(e),n++,i&&Sx.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+cx(this.getPriority().val())+":"),this.forEachChild(mx,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":VE(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new ZS(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ZS(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ZS(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,ZS.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,ZS.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===xx?-1:0}withIndex(e){if(e===nx||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Sx(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===nx||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(mx),n=t.getIterator(mx);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===nx?null:this.indexMap_.get(e.toString())}}Sx.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const xx=new class extends Sx{constructor(){super(new sx(ax),Sx.EMPTY_NODE,_x.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Sx.EMPTY_NODE}isEmpty(){return!1}};function kx(e,t=null){if(null===e)return Sx.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),Ae(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new px(e,kx(t));if(e instanceof Array){let n=Sx.EMPTY_NODE;return iS(e,((t,r)=>{if(et(e,t)&&"."!==t.substring(0,1)){const e=kx(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(kx(t))}{const n=[];let r=!1;if(iS(e,((e,t)=>{if("."!==e.substring(0,1)){const i=kx(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new ZS(e,i)))}})),0===n.length)return Sx.EMPTY_NODE;const i=vx(n,ox,(e=>e.name),ax);if(r){const e=vx(n,mx.getCompare());return new Sx(i,kx(t),new _x({".priority":e},{".priority":mx}))}return new Sx(i,kx(t),_x.Default)}}Object.defineProperties(ZS,{MIN:{value:new ZS(JE,Sx.EMPTY_NODE)},MAX:{value:new ZS(ZE,xx)}}),tx.__EMPTY_NODE=Sx.EMPTY_NODE,px.__childrenNodeConstructor=Sx,lx=xx,function(e){fx=e}(xx),function(e){hx=e}(kx);class Ix extends XS{constructor(e){super(),this.indexPath_=e,Ae(!zS(e)&&".priority"!==LS(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?XE(e.name,t.name):i}makePost(e,t){const n=kx(e),r=Sx.EMPTY_NODE.updateChild(this.indexPath_,n);return new ZS(t,r)}maxPost(){const e=Sx.EMPTY_NODE.updateChild(this.indexPath_,xx);return new ZS(ZE,e)}toString(){return jS(this.indexPath_,0).join("/")}}const Tx=new class extends XS{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?XE(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ZS.MIN}maxPost(){return ZS.MAX}makePost(e,t){const n=kx(e);return new ZS(t,n)}toString(){return".value"}};function Cx(e){return{type:"value",snapshotNode:e}}function Nx(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ax(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Px(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Ox{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Ax(t,o)):Ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Nx(t,n)):s.trackChildChange(Px(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(mx,((e,r)=>{t.hasChild(e)||n.trackChildChange(Ax(e,r))})),t.isLeafNode()||t.forEachChild(mx,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Px(t,r,i))}else n.trackChildChange(Nx(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Sx.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Rx{constructor(e){this.indexedFilter_=new Ox(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Rx.getStartPost_(e),this.endPost_=Rx.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new ZS(t,n))||(n=Sx.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Sx.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Sx.EMPTY_NODE);const i=this;return t.forEachChild(mx,((e,t)=>{i.matches(new ZS(e,t))||(r=r.updateImmediateChild(e,Sx.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Lx{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Rx(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new ZS(t,n))||(n=Sx.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Sx.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Sx.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Sx.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Sx.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Ae(o.numChildren()===this.limit_,"");const a=new ZS(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:s(u,a);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Px(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Ax(t,e));const n=o.updateImmediateChild(t,Sx.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Nx(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(Ax(l.name,l.node)),i.trackChildChange(Nx(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,Sx.EMPTY_NODE)):e}}class Dx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mx}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:JE}hasEnd(){return this.endSet_}getIndexEndValue(){return Ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ZE}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mx}copy(){const e=new Dx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Mx(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Fx(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function jx(e,t){const n=e.copy();return n.index_=t,n}function Ux(e){const t={};if(e.isDefault())return t;let n;if(e.index_===mx?n="$priority":e.index_===Tx?n="$value":e.index_===nx?n="$key":(Ae(e.index_ instanceof Ix,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ze(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Ze(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Ze(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Ze(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Ze(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Vx(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==mx&&(t.i=e.index_.toString()),t}class zx extends NS{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=WE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=zx.getListenId_(e,n),o={};this.listens_[s]=o;const a=Ux(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),tt(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=zx.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Ux(e._queryParams),n=e._path.toString(),r=new Ue;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ot(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=Je(o.responseText)}catch(e){QE("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&QE("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()}))}}class qx{constructor(){this.rootNode_=Sx.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Bx(){return{value:null,children:new Map}}function Gx(e,t,n){if(zS(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=LS(t);e.children.has(r)||e.children.set(r,Bx()),Gx(e.children.get(r),t=MS(t),n)}}function $x(e,t){if(zS(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(mx,((t,n)=>{Gx(e,new OS(t),n)})),$x(e,t)}}if(e.children.size>0){const n=LS(t);return t=MS(t),e.children.has(n)&&$x(e.children.get(n),t)&&e.children.delete(n),0===e.children.size}return!0}function Wx(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{Wx(r,new OS(t.toString()+"/"+e),n)}))}class Hx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&iS(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Kx{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Hx(e);const n=1e4+2e4*Math.random();cS(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;iS(e,((e,r)=>{r>0&&et(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),cS(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qx,Yx;function Jx(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(Yx=Qx||(Qx={}))[Yx.OVERWRITE=0]="OVERWRITE",Yx[Yx.MERGE=1]="MERGE",Yx[Yx.ACK_USER_WRITE=2]="ACK_USER_WRITE",Yx[Yx.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class Zx{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Qx.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(zS(this.path)){if(null!=this.affectedTree.value)return Ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new OS(e));return new Zx(RS(),t,this.revert)}}return Ae(LS(this.path)===e,"operationForChild called for unrelated child."),new Zx(MS(this.path),this.affectedTree,this.revert)}}class Xx{constructor(e,t){this.source=e,this.path=t,this.type=Qx.LISTEN_COMPLETE}operationForChild(e){return zS(this.path)?new Xx(this.source,RS()):new Xx(this.source,MS(this.path))}}class ek{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Qx.OVERWRITE}operationForChild(e){return zS(this.path)?new ek(this.source,RS(),this.snap.getImmediateChild(e)):new ek(this.source,MS(this.path),this.snap)}}class tk{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Qx.MERGE}operationForChild(e){if(zS(this.path)){const t=this.children.subtree(new OS(e));return t.isEmpty()?null:t.value?new ek(this.source,RS(),t.value):new tk(this.source,RS(),t)}return Ae(LS(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new tk(this.source,MS(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class nk{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(zS(e))return this.isFullyInitialized()&&!this.filtered_;const t=LS(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class rk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ik(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Pe("Should only compare child_ events.");const r=new ZS(t.childName,t.snapshotNode),i=new ZS(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function sk(e,t){return{eventCache:e,serverCache:t}}function ok(e,t,n,r){return sk(new nk(t,n,r),e.serverCache)}function ak(e,t,n,r){return sk(e.eventCache,new nk(t,n,r))}function lk(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ck(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let uk;class dk{constructor(e,t=(()=>(uk||(uk=new sx(eS)),uk))()){this.value=e,this.children=t}static fromObject(e){let t=new dk(null);return iS(e,((e,n)=>{t=t.set(new OS(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:RS(),value:this.value};if(zS(e))return null;{const n=LS(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(MS(e),t);return null!=i?{path:VS(new OS(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(zS(e))return this;{const t=LS(e),n=this.children.get(t);return null!==n?n.subtree(MS(e)):new dk(null)}}set(e,t){if(zS(e))return new dk(t,this.children);{const n=LS(e),r=(this.children.get(n)||new dk(null)).set(MS(e),t),i=this.children.insert(n,r);return new dk(this.value,i)}}remove(e){if(zS(e))return this.children.isEmpty()?new dk(null):new dk(null,this.children);{const t=LS(e),n=this.children.get(t);if(n){const r=n.remove(MS(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new dk(null):new dk(this.value,i)}return this}}get(e){if(zS(e))return this.value;{const t=LS(e),n=this.children.get(t);return n?n.get(MS(e)):null}}setTree(e,t){if(zS(e))return t;{const n=LS(e),r=(this.children.get(n)||new dk(null)).setTree(MS(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new dk(this.value,i)}}fold(e){return this.fold_(RS(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(VS(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,RS(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(zS(e))return null;{const r=LS(e),i=this.children.get(r);return i?i.findOnPath_(MS(e),VS(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,RS(),t)}foreachOnPath_(e,t,n){if(zS(e))return this;{this.value&&n(t,this.value);const r=LS(e),i=this.children.get(r);return i?i.foreachOnPath_(MS(e),VS(t,r),n):new dk(null)}}foreach(e){this.foreach_(RS(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(VS(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class hk{constructor(e){this.writeTree_=e}static empty(){return new hk(new dk(null))}}function fk(e,t,n){if(zS(t))return new hk(new dk(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=qS(i,t);return s=s.updateChild(o,n),new hk(e.writeTree_.set(i,s))}{const r=new dk(n),i=e.writeTree_.setTree(t,r);return new hk(i)}}}function pk(e,t,n){let r=e;return iS(n,((e,n)=>{r=fk(r,VS(t,e),n)})),r}function mk(e,t){if(zS(t))return hk.empty();{const n=e.writeTree_.setTree(t,new dk(null));return new hk(n)}}function gk(e,t){return null!=yk(e,t)}function yk(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(qS(n.path,t)):null}function vk(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(mx,((e,n)=>{t.push(new ZS(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new ZS(e,n.value))})),t}function wk(e,t){if(zS(t))return e;{const n=yk(e,t);return new hk(null!=n?new dk(n):e.writeTree_.subtree(t))}}function bk(e){return e.writeTree_.isEmpty()}function _k(e,t){return Ek(RS(),e.writeTree_,t)}function Ek(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Ae(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ek(VS(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(VS(e,".priority"),r)),n}}function Sk(e,t){return Lk(t,e)}function xk(e,t){if(e.snap)return $S(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&$S(VS(e.path,n),t))return!0;return!1}function kk(e){return e.visible}function Ik(e,t,n){let r=hk.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)$S(n,e)?(t=qS(n,e),r=fk(r,t,s.snap)):$S(e,n)&&(t=qS(e,n),r=fk(r,RS(),s.snap.getChild(t)));else{if(!s.children)throw Pe("WriteRecord should have .snap or .children");if($S(n,e))t=qS(n,e),r=pk(r,t,s.children);else if($S(e,n))if(t=qS(e,n),zS(t))r=pk(r,RS(),s.children);else{const e=tt(s.children,LS(t));if(e){const n=e.getChild(MS(t));r=fk(r,RS(),n)}}}}}return r}function Tk(e,t,n,r,i){if(r||i){const s=wk(e.visibleWrites,t);if(!i&&bk(s))return n;if(i||null!=n||gk(s,RS())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&($S(e.path,t)||$S(t,e.path))};return _k(Ik(e.allWrites,s,t),n||Sx.EMPTY_NODE)}return null}{const r=yk(e.visibleWrites,t);if(null!=r)return r;{const r=wk(e.visibleWrites,t);return bk(r)?n:null!=n||gk(r,RS())?_k(r,n||Sx.EMPTY_NODE):null}}}function Ck(e,t,n,r){return Tk(e.writeTree,e.treePath,t,n,r)}function Nk(e,t){return function(e,t,n){let r=Sx.EMPTY_NODE;const i=yk(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(mx,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=wk(e.visibleWrites,t);return n.forEachChild(mx,((e,t)=>{const n=_k(wk(i,new OS(e)),t);r=r.updateImmediateChild(e,n)})),vk(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return vk(wk(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Ak(e,t,n,r){return function(e,t,n,r,i){Ae(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=VS(t,n);if(gk(e.visibleWrites,s))return null;{const t=wk(e.visibleWrites,s);return bk(t)?i.getChild(n):_k(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Pk(e,t){return function(e,t){return yk(e.visibleWrites,t)}(e.writeTree,VS(e.treePath,t))}function Ok(e,t,n){return function(e,t,n,r){const i=VS(t,n),s=yk(e.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?_k(wk(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Rk(e,t){return Lk(VS(e.treePath,t),e.writeTree)}function Lk(e,t){return{treePath:e,writeTree:t}}class Dk{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Ae("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ae(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Px(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ax(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Nx(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Pe("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Px(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Mk=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Fk{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new nk(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ok(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ck(this.viewCache_),i=function(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=wk(e.visibleWrites,t),c=yk(l,RS());if(null!=c)a=c;else{if(null==n)return[];a=_k(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function jk(e,t,n,r,i,s){const o=t.eventCache;if(null!=Pk(r,n))return t;{let a,l;if(zS(n))if(Ae(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ck(t),i=Nk(r,n instanceof Sx?n:Sx.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Ck(r,ck(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=LS(n);if(".priority"===c){Ae(1===DS(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=Ak(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=MS(n);let d;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Ak(r,n,o.getNode(),l);d=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else d=Ok(r,c,t.serverCache);a=null!=d?e.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return ok(t,a,o.isFullyInitialized()||zS(n),e.filter.filtersNodes())}}function Uk(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(zS(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=LS(n);if(!l.isCompleteForPath(n)&&DS(n)>1)return t;const i=MS(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,Mk,null)}const d=ak(t,c,l.isFullyInitialized()||zS(n),u.filtersNodes());return jk(e,d,n,i,new Fk(i,d,s),a)}function Vk(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new Fk(i,t,s);if(zS(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=ok(t,c,!0,e.filter.filtersNodes());else{const i=LS(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=ok(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=MS(n),c=a.getNode().getImmediateChild(i);let d;if(zS(s))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===FS(s)&&e.getChild(US(s)).isEmpty()?e:e.updateChild(s,r):Sx.EMPTY_NODE}l=c.equals(d)?t:ok(t,e.filter.updateChild(a.getNode(),i,d,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function zk(e,t){return e.eventCache.isCompleteForChild(t)}function qk(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Bk(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=zS(n)?r:new dk(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=qk(0,t.serverCache.getNode().getImmediateChild(n),r);c=Uk(e,c,new OS(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=qk(0,t.serverCache.getNode().getImmediateChild(n),r);c=Uk(e,c,new OS(n),l,i,s,o,a)}})),c}class Gk{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Ox(n.getIndex()),i=(s=n).loadsAllData()?new Ox(s.getIndex()):s.hasLimit()?new Lx(s):new Rx(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(Sx.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(Sx.EMPTY_NODE,a.getNode(),null),u=new nk(l,o.isFullyInitialized(),r.filtersNodes()),d=new nk(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=sk(d,u),this.eventGenerator_=new rk(this.query_)}get query(){return this.query_}}function $k(e,t){const n=ck(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!zS(t)&&!n.getImmediateChild(LS(t)).isEmpty())?n.getChild(t):null}function Wk(e){return 0===e.eventRegistrations_.length}function Hk(e,t,n){const r=[];if(n){Ae(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Kk(e,t,n,r){t.type===Qx.MERGE&&null!==t.source.queryId&&(Ae(ck(e.viewCache_),"We should always have a full cache before handling merges"),Ae(lk(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=function(e,t,n,r,i){const s=new Dk;let o,a;if(n.type===Qx.OVERWRITE){const l=n;l.source.fromUser?o=Vk(e,t,l.path,l.snap,r,i,s):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!zS(l.path),o=Uk(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===Qx.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=VS(n,r);zk(t,LS(c))&&(a=Vk(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=VS(n,r);zk(t,LS(c))||(a=Vk(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Bk(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Qx.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=Pk(r,n))return t;{const a=new Fk(r,t,i),l=t.eventCache.getNode();let c;if(zS(n)||".priority"===LS(n)){let n;if(t.serverCache.isFullyInitialized())n=Ck(r,ck(t));else{const e=t.serverCache.getNode();Ae(e instanceof Sx,"serverChildren would be complete if leaf node"),n=Nk(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=LS(n);let u=Ok(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,MS(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Sx.EMPTY_NODE,MS(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Ck(r,ck(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Pk(r,RS()),ok(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=Pk(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(zS(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Uk(e,t,n,l.getNode().getChild(n),i,s,a,o);if(zS(n)){let r=new dk(null);return l.getNode().forEachChild(nx,((e,t)=>{r=r.set(new OS(e),t)})),Bk(e,t,n,r,i,s,a,o)}return t}{let c=new dk(null);return r.foreach(((e,t)=>{const r=VS(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),Bk(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Qx.LISTEN_COMPLETE)throw Pe("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache;return jk(e,ak(t,s.getNode(),s.isFullyInitialized()||zS(n),s.isFiltered()),n,r,Mk,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=lk(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Cx(lk(t)))}}(t,o,l),{viewCache:o,changes:l}}(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Ae(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Ae(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Ae(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Qk(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Qk(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),ik(e,i,"child_removed",t,r,n),ik(e,i,"child_added",t,r,n),ik(e,i,"child_moved",s,r,n),ik(e,i,"child_changed",t,r,n),ik(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Yk,Jk;class Zk{constructor(){this.views=new Map}}function Xk(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Ae(null!=s,"SyncTree gave us an op for an invalid query."),Kk(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Kk(s,t,n,r));return i}}function eI(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=Ck(n,i?r:null),s=!1;e?s=!0:r instanceof Sx?(e=Nk(n,r),s=!1):(e=Sx.EMPTY_NODE,s=!1);const o=sk(new nk(e,s,!1),new nk(r,i,!1));return new Gk(t,o)}return o}function tI(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function nI(e,t){let n=null;for(const r of e.views.values())n=n||$k(r,t);return n}function rI(e,t){if(t._queryParams.loadsAllData())return oI(e);{const n=t._queryIdentifier;return e.views.get(n)}}function iI(e,t){return null!=rI(e,t)}function sI(e){return null!=oI(e)}function oI(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let aI=1;class lI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new dk(null),this.pendingWriteTree_={visibleWrites:hk.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function cI(e,t,n,r,i){return function(e,t,n,r,i){Ae(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=fk(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?gI(e,new ek({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function uI(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Ae(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&xk(t,r.path)?i=!1:$S(r.path,t.path)&&(s=!0)),o--}return!!i&&(s?(function(e){e.visibleWrites=Ik(e.allWrites,kk,RS()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0):(r.snap?e.visibleWrites=mk(e.visibleWrites,r.path):iS(r.children,(t=>{e.visibleWrites=mk(e.visibleWrites,VS(r.path,t))})),!0))}(e.pendingWriteTree_,t)){let t=new dk(null);return null!=r.snap?t=t.set(RS(),!0):iS(r.children,(e=>{t=t.set(new OS(e),!0)})),gI(e,new Zx(r.path,t,n))}return[]}function dI(e,t,n){return gI(e,new ek({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function hI(e,t,n,r,i=!1){const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||iI(o,t))){const l=function(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=sI(e);if("default"===i)for(const[t,i]of e.views.entries())o=o.concat(Hk(i,n,r)),Wk(i)&&(e.views.delete(t),i.query._queryParams.loadsAllData()||s.push(i.query));else{const t=e.views.get(i);t&&(o=o.concat(Hk(t,n,r)),Wk(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!sI(e)&&s.push(new(Ae(Yk,"Reference.ts has not been loaded"),Yk)(t._repo,t._path)),{removed:s,events:o}}(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>sI(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&sI(t))return[oI(t)];{let e=[];return t&&(e=tI(t)),iS(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=wI(e,r);e.listenProvider_.startListening(kI(i),bI(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(kI(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(_I(t));e.listenProvider_.stopListening(kI(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=_I(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function fI(e,t,n,r){const i=EI(e,r);if(null!=i){const r=SI(i),s=r.path,o=r.queryId,a=qS(s,t);return xI(e,s,new ek(Jx(o),a,n))}return[]}function pI(e,t,n,r=!1){const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=qS(e,i);s=s||nI(t,n),o=o||sI(t)}));let a,l=e.syncPointTree_.get(i);l?(o=o||sI(l),s=s||nI(l,RS())):(l=new Zk,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s?a=!0:(a=!1,s=Sx.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=nI(t,RS());n&&(s=s.updateImmediateChild(e,n))})));const c=iI(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=_I(t);Ae(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=aI++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=function(e,t,n,r,i,s){const o=eI(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(mx,((e,t)=>{r.push(Nx(e,t))})),n.isFullyInitialized()&&r.push(Cx(n.getNode())),Qk(e,r,n.getNode(),t)}(o,n)}(l,t,n,Sk(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=rI(l,t);u=u.concat(function(e,t,n){const r=t._path,i=bI(e,t),s=wI(e,n),o=e.listenProvider_.startListening(kI(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Ae(!sI(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!zS(e)&&t&&sI(t))return[oI(t).query];{let e=[];return t&&(e=e.concat(tI(t).map((e=>e.query)))),iS(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(kI(r),bI(e,r))}}return o}(e,t,n))}return u}function mI(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=nI(n,qS(e,t));if(r)return r}));return Tk(r,t,i,n,!0)}function gI(e,t){return yI(t,e.syncPointTree_,null,Sk(e.pendingWriteTree_,RS()))}function yI(e,t,n,r){if(zS(e.path))return vI(e,t,n,r);{const i=t.get(RS());null==n&&null!=i&&(n=nI(i,RS()));let s=[];const o=LS(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Rk(r,o);s=s.concat(yI(a,l,e,t))}return i&&(s=s.concat(Xk(i,e,r,n))),s}}function vI(e,t,n,r){const i=t.get(RS());null==n&&null!=i&&(n=nI(i,RS()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=Rk(r,t),l=e.operationForChild(t);l&&(s=s.concat(vI(l,i,o,a)))})),i&&(s=s.concat(Xk(i,e,r,n))),s}function wI(e,t){const n=t.query,r=bI(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Sx.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=EI(e,n);if(r){const n=SI(r),i=n.path,s=n.queryId,o=qS(i,t);return xI(e,i,new Xx(Jx(s),o))}return[]}(e,n._path,r):function(e,t){return gI(e,new Xx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return hI(e,n,null,r)}}}}function bI(e,t){const n=_I(t);return e.queryToTagMap.get(n)}function _I(e){return e._path.toString()+"$"+e._queryIdentifier}function EI(e,t){return e.tagToQueryMap.get(t)}function SI(e){const t=e.indexOf("$");return Ae(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new OS(e.substr(0,t))}}function xI(e,t,n){const r=e.syncPointTree_.get(t);return Ae(r,"Missing sync point for query tag that we're tracking"),Xk(r,n,Sk(e.pendingWriteTree_,t),null)}function kI(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ae(Jk,"Reference.ts has not been loaded"),Jk)(e._repo,e._path):e}class II{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new II(t)}node(){return this.node_}}class TI{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=VS(this.path_,e);return new TI(this.syncTree_,t)}node(){return mI(this.syncTree_,this.path_)}}const CI=function(e,t,n){return e&&"object"==typeof e?(Ae(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?NI(e[".sv"],t,n):"object"==typeof e[".sv"]?AI(e[".sv"],t):void Ae(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},NI=function(e,t,n){if("timestamp"===e)return n.timestamp;Ae(!1,"Unexpected server value: "+e)},AI=function(e,t,n){e.hasOwnProperty("increment")||Ae(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&Ae(!1,"Unexpected increment value: "+r);const i=t.node();if(Ae(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},PI=function(e,t,n,r){return RI(t,new TI(n,e),r)},OI=function(e,t,n){return RI(e,new II(t),n)};function RI(e,t,n){const r=e.getPriority().val(),i=CI(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=CI(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new px(s,kx(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new px(i))),r.forEachChild(mx,((e,r)=>{const i=RI(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class LI{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function DI(e,t){let n=t instanceof OS?t:new OS(t),r=e,i=LS(n);for(;null!==i;){const e=tt(r.node.children,i)||{children:{},childCount:0};r=new LI(i,r,e),n=MS(n),i=LS(n)}return r}function MI(e){return e.node.value}function FI(e,t){e.node.value=t,qI(e)}function jI(e){return e.node.childCount>0}function UI(e,t){iS(e.node.children,((n,r)=>{t(new LI(n,e,r))}))}function VI(e,t,n,r){n&&!r&&t(e),UI(e,(e=>{VI(e,t,!0,r)})),n&&r&&t(e)}function zI(e){return new OS(null===e.parent?e.name:zI(e.parent)+"/"+e.name)}function qI(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===MI(e)&&!jI(e)}(n),i=et(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,qI(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,qI(e))}(e.parent,e.name,e)}const BI=/[\[\].#$\/\u0000-\u001F\u007F]/,GI=/[\[\].#$\u0000-\u001F\u007F]/,$I=10485760,WI=function(e){return"string"==typeof e&&0!==e.length&&!BI.test(e)},HI=function(e){return"string"==typeof e&&0!==e.length&&!GI.test(e)},KI=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!YE(e)||e&&"object"==typeof e&&et(e,".sv")},QI=function(e,t,n,r){r&&void 0===t||YI(pt(e,"value"),t,n)},YI=function(e,t,n){const r=n instanceof OS?new WS(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+KS(r));if("function"==typeof t)throw new Error(e+"contains a function "+KS(r)+" with contents = "+t.toString());if(YE(t))throw new Error(e+"contains "+t.toString()+" "+KS(r));if("string"==typeof t&&t.length>$I/3&&yt(t)>$I)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+KS(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(iS(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!WI(t)))throw new Error(e+" contains an invalid key ("+t+") "+KS(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=yt(t),HS(e)}(r,t),YI(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=yt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+KS(r)+" in addition to actual children.")}},JI=function(e,t,n,r){if(r&&void 0===t)return;const i=pt(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];iS(t,((e,t)=>{const r=new OS(e);if(YI(i,t,VS(n,r)),".priority"===FS(r)&&!KI(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=jS(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!WI(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(BS);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&$S(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},ZI=function(e,t,n){if(!n||void 0!==t){if(YE(t))throw new Error(pt(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!KI(t))throw new Error(pt(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},XI=function(e,t,n,r){if(!(r&&void 0===n||WI(n)))throw new Error(pt(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},eT=function(e,t,n,r){if(!(r&&void 0===n||HI(n)))throw new Error(pt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},tT=function(e,t){if(".info"===LS(t))throw new Error(e+" failed = Can't modify data under /.info/")},nT=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!WI(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),HI(e)}(n))throw new Error(pt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function iT(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||GS(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function sT(e,t,n){iT(e,n),aT(e,(e=>GS(e,t)))}function oT(e,t,n){iT(e,n),aT(e,(e=>$S(e,t)||$S(t,e)))}function aT(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(lT(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function lT(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();qE&&$E("event: "+n.toString()),lS(r)}}}const cT="repo_interrupt";class uT{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Bx(),this.transactionQueueTree_=new LI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dT(e,t,n){if(e.stats_=_S(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new zx(e.repoInfo_,((t,n,r,i)=>{pT(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>mT(e,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ze(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new JS(e.repoInfo_,t,((t,n,r,i)=>{pT(e,t,n,r,i)}),(t=>{mT(e,t)}),(t=>{!function(e,t){iS(t,((t,n)=>{gT(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(t,n){const r=t.toString();return bS[r]||(bS[r]=new Kx(e.stats_,e.server_)),bS[r]}(e.repoInfo_),e.infoData_=new qx,e.infoSyncTree_=new lI({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=dI(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),gT(e,"connected",!1),e.serverSyncTree_=new lI({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);oT(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function hT(e){const t=e.infoData_.getNode(new OS(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function fT(e){return(t=(t={timestamp:hT(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function pT(e,t,n,r,i){e.dataUpdateCount++;const s=new OS(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=rt(n,(e=>kx(e)));o=function(e,t,n,r){const i=EI(e,r);if(i){const r=SI(i),s=r.path,o=r.queryId,a=qS(s,t),l=dk.fromObject(n);return xI(e,s,new tk(Jx(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=kx(n);o=fI(e.serverSyncTree_,s,t,i)}else if(r){const t=rt(n,(e=>kx(e)));o=function(e,t,n){const r=dk.fromObject(n);return gI(e,new tk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=kx(n);o=dI(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=TT(e,s)),oT(e.eventQueue_,a,o)}function mT(e,t){gT(e,"connected",t),!1===t&&function(e){ST(e,"onDisconnectEvents");const t=fT(e),n=Bx();Wx(e.onDisconnect_,RS(),((r,i)=>{const s=PI(r,i,e.serverSyncTree_,t);Gx(n,r,s)}));let r=[];Wx(n,RS(),((t,n)=>{r=r.concat(dI(e.serverSyncTree_,t,n));const i=OT(e,t);TT(e,i)})),e.onDisconnect_=Bx(),oT(e.eventQueue_,RS(),r)}(e)}function gT(e,t,n){const r=new OS("/.info/"+t),i=kx(n);e.infoData_.updateSnapshot(r,i);const s=dI(e.infoSyncTree_,r,i);oT(e.eventQueue_,r,s)}function yT(e){return e.nextWriteId_++}function vT(e,t,n,r,i){ST(e,"set",{path:t.toString(),value:n,priority:r});const s=fT(e),o=kx(n,r),a=mI(e.serverSyncTree_,t),l=OI(o,a,s),c=yT(e),u=cI(e.serverSyncTree_,t,l,c,!0);iT(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||QE("set at "+t+" failed: "+n);const o=uI(e.serverSyncTree_,c,!s);oT(e.eventQueue_,t,o),xT(0,i,n,r)}));const d=OT(e,t);TT(e,d),oT(e.eventQueue_,d,[])}function wT(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&$x(e.onDisconnect_,t),xT(0,n,r,i)}))}function bT(e,t,n,r){const i=kx(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&Gx(e.onDisconnect_,t,i),xT(0,r,n,s)}))}function _T(e,t,n){let r;r=".info"===LS(t._path)?hI(e.infoSyncTree_,t,n):hI(e.serverSyncTree_,t,n),sT(e.eventQueue_,t._path,r)}function ET(e){e.persistentConnection_&&e.persistentConnection_.interrupt(cT)}function ST(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),$E(n,...t)}function xT(e,t,n,r){t&&lS((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function kT(e,t,n){return mI(e.serverSyncTree_,t,n)||Sx.EMPTY_NODE}function IT(e,t=e.transactionQueueTree_){if(t||PT(e,t),MI(t)){const n=NT(e,t);Ae(n.length>0,"Sending zero length transaction queue"),n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=kT(e,t,r);let s=i;const o=i.hash();for(let e=0;e<n.length;e++){const r=n[e];Ae(0===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=1,r.retryCount++;const i=qS(t,r.path);s=s.updateChild(i,r.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{ST(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(uI(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();PT(e,DI(e.transactionQueueTree_,t)),IT(e,e.transactionQueueTree_),oT(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)lS(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{QE("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}TT(e,t)}}),o)}(e,zI(t),n)}else jI(t)&&UI(t,(t=>{IT(e,t)}))}function TT(e,t){const n=CT(e,t),r=zI(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let s=0;s<t.length;s++){const l=t[s],c=qS(n,l.path);let u,d=!1;if(Ae(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,u=l.abortReason,i=i.concat(uI(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)d=!0,u="maxretry",i=i.concat(uI(e.serverSyncTree_,l.currentWriteId,!0));else{const n=kT(e,l.path,o);l.currentInputSnapshot=n;const r=t[s].update(n.val());if(void 0!==r){YI("transaction failed: Data returned ",r,l.path);let t=kx(r);"object"==typeof r&&null!=r&&et(r,".priority")||(t=t.updatePriority(n.getPriority()));const s=l.currentWriteId,a=fT(e),c=OI(t,n,a);l.currentOutputSnapshotRaw=t,l.currentOutputSnapshotResolved=c,l.currentWriteId=yT(e),o.splice(o.indexOf(s),1),i=i.concat(cI(e.serverSyncTree_,l.path,c,l.currentWriteId,l.applyLocally)),i=i.concat(uI(e.serverSyncTree_,s,!0))}else d=!0,u="nodata",i=i.concat(uI(e.serverSyncTree_,l.currentWriteId,!0))}oT(e.eventQueue_,n,i),i=[],d&&(t[s].status=2,a=t[s].unwatcher,setTimeout(a,Math.floor(0)),t[s].onComplete&&("nodata"===u?r.push((()=>t[s].onComplete(null,!1,t[s].currentInputSnapshot))):r.push((()=>t[s].onComplete(new Error(u),!1,null)))))}var a;PT(e,e.transactionQueueTree_);for(let e=0;e<r.length;e++)lS(r[e]);IT(e,e.transactionQueueTree_)}(e,NT(e,n),r),r}function CT(e,t){let n,r=e.transactionQueueTree_;for(n=LS(t);null!==n&&void 0===MI(r);)r=DI(r,n),n=LS(t=MS(t));return r}function NT(e,t){const n=[];return AT(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function AT(e,t,n){const r=MI(t);if(r)for(let e=0;e<r.length;e++)n.push(r[e]);UI(t,(t=>{AT(e,t,n)}))}function PT(e,t){const n=MI(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,FI(t,n.length>0?n:void 0)}UI(t,(t=>{PT(e,t)}))}function OT(e,t){const n=zI(CT(e,t)),r=DI(e.transactionQueueTree_,t);return function(e,t,n){let r=e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{RT(e,t)})),RT(e,r),VI(r,(t=>{RT(e,t)})),n}function RT(e,t){const n=MI(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Ae(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Ae(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(uI(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?FI(t,void 0):n.length=s+1,oT(e.eventQueue_,zI(t),i);for(let e=0;e<r.length;e++)lS(r[e])}}const LT=function(e,t){const n=DT(e),r=n.namespace;"firebase.com"===n.domain&&KE(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||KE("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&QE("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new gS(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new OS(n.pathString)}},DT=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let r=n[e];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(e){}t+="/"+r}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):QE(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},MT="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",FT=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=MT.charAt(n%64),n=Math.floor(n/64);Ae(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=MT.charAt(t[i]);return Ae(20===o.length,"nextPushId: Length should be 20."),o}}();class jT{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ze(this.snapshot.exportVal())}}class UT{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class VT{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class zT{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Ue;return wT(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){tT("OnDisconnect.remove",this._path);const e=new Ue;return bT(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){tT("OnDisconnect.set",this._path),QI("OnDisconnect.set",e,this._path,!1);const t=new Ue;return bT(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){tT("OnDisconnect.setWithPriority",this._path),QI("OnDisconnect.setWithPriority",e,this._path,!1),ZI("OnDisconnect.setWithPriority",t,!1);const n=new Ue;return function(e,t,n,r,i){const s=kx(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&Gx(e.onDisconnect_,t,s),xT(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){tT("OnDisconnect.update",this._path),JI("OnDisconnect.update",e,this._path,!1);const t=new Ue;return function(e,t,n,r){if(nt(n))return $E("onDisconnect().update() called with empty data.  Don't do anything."),void xT(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&iS(n,((n,r)=>{const i=kx(r);Gx(e.onDisconnect_,VS(t,n),i)})),xT(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class qT{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return zS(this._path)?null:FS(this._path)}get ref(){return new WT(this._repo,this._path)}get _queryIdentifier(){const e=Vx(this._queryParams),t=nS(e);return"{}"===t?"default":t}get _queryObject(){return Vx(this._queryParams)}isEqual(e){if(!((e=vt(e))instanceof qT))return!1;const t=this._repo===e._repo,n=GS(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function BT(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function GT(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===nx){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==JE)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==ZE)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===mx){if(null!=t&&!KI(t)||null!=n&&!KI(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ae(e.getIndex()instanceof Ix||e.getIndex()===Tx,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function $T(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class WT extends qT{constructor(e,t){super(e,t,new Dx,!1)}get parent(){const e=US(this._path);return null===e?null:new WT(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class HT{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new OS(e),n=YT(this.ref,e);return new HT(this._node.getChild(t),n,mx)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((t,n)=>e(new HT(n,YT(this.ref,t),mx))))}hasChild(e){const t=new OS(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function KT(e,t){return(e=vt(e))._checkNotDeleted("ref"),void 0!==t?YT(e._root,t):e._root}function QT(e,t){(e=vt(e))._checkNotDeleted("refFromURL");const n=LT(t,e._repo.repoInfo_.nodeAdmin);nT("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||KE("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),KT(e,n.path.toString())}function YT(e,t){var n;return null===LS((e=vt(e))._path)?("child","path",!1,(n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),eT("child","path",n,false)):eT("child","path",t,!1),new WT(e._repo,VS(e._path,t))}function JT(e,t){e=vt(e),tT("set",e._path),QI("set",t,e._path,!1);const n=new Ue;return vT(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function ZT(e,t){JI("update",t,e._path,!1);const n=new Ue;return function(e,t,n,r){ST(e,"update",{path:t.toString(),value:n});let i=!0;const s=fT(e),o={};if(iS(n,((n,r)=>{i=!1,o[n]=PI(VS(t,n),kx(r),e.serverSyncTree_,s)})),i)$E("update() called with empty data.  Don't do anything."),xT(0,r,"ok",void 0);else{const i=yT(e),s=function(e,t,n,r){!function(e,t,n,r){Ae(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=pk(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=dk.fromObject(n);return gI(e,new tk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,t,o,i);iT(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||QE("update at "+t+" failed: "+n);const a=uI(e.serverSyncTree_,i,!o),l=a.length>0?TT(e,t):t;oT(e.eventQueue_,l,a),xT(0,r,n,s)})),iS(n,(n=>{const r=OT(e,VS(t,n));TT(e,r)})),oT(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function XT(e){e=vt(e);const t=new VT((()=>{})),n=new eC(t);return function(e,t,n){const r=function(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=qS(e,n);r=r||nI(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||nI(i,RS()):(i=new Zk,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new nk(r,!0,!1):null;return lk(eI(i,t,Sk(e.pendingWriteTree_,t._path),s?o.getNode():Sx.EMPTY_NODE,s).viewCache_)}(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=kx(r).withIndex(t._queryParams.getIndex());let s;if(pI(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=dI(e.serverSyncTree_,t._path,i);else{const n=bI(e.serverSyncTree_,t);s=fI(e.serverSyncTree_,t._path,i,n)}return oT(e.eventQueue_,t._path,s),hI(e.serverSyncTree_,t,n,null,!0),i}),(n=>(ST(e,"get for query "+Ze(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new HT(t,new WT(e._repo,e._path),e._queryParams.getIndex())))}class eC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new jT("value",this,new HT(e.snapshotNode,new WT(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new UT(this,e,t):null}matches(e){return e instanceof eC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tC{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new UT(this,e,t):null}createEvent(e,t){Ae(null!=e.childName,"Child events should have a childName.");const n=YT(new WT(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new jT(e.type,this,new HT(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof tC&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function nC(e,t,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{_T(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new VT(n,s||void 0),a="value"===t?new eC(o):new tC(t,o);return function(e,t,n){let r;r=".info"===LS(t._path)?pI(e.infoSyncTree_,t,n):pI(e.serverSyncTree_,t,n),sT(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>_T(e._repo,e,a)}function rC(e,t,n,r){return nC(e,"value",t,n,r)}function iC(e,t,n,r){return nC(e,"child_added",t,n,r)}function sC(e,t,n,r){return nC(e,"child_changed",t,n,r)}function oC(e,t,n,r){return nC(e,"child_moved",t,n,r)}function aC(e,t,n,r){return nC(e,"child_removed",t,n,r)}function lC(e,t,n){let r=null;const i=n?new VT(n):null;"value"===t?r=new eC(i):t&&(r=new tC(t,i)),_T(e._repo,e,r)}class cC{}class uC extends cC{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){QI("endAt",this._value,e._path,!0);const t=Fx(e._queryParams,this._value,this._key);if($T(t),GT(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qT(e._repo,e._path,t,e._orderByCalled)}}class dC extends cC{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){QI("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===nx||n?Fx(e,t,n):Fx(e,t,JE),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if($T(t),GT(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qT(e._repo,e._path,t,e._orderByCalled)}}class hC extends cC{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){QI("startAt",this._value,e._path,!0);const t=Mx(e._queryParams,this._value,this._key);if($T(t),GT(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qT(e._repo,e._path,t,e._orderByCalled)}}class fC extends cC{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){QI("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===nx||n?Mx(e,t,n):Mx(e,t,ZE),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if($T(t),GT(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qT(e._repo,e._path,t,e._orderByCalled)}}class pC extends cC{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qT(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class mC extends cC{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qT(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class gC extends cC{constructor(e){super(),this._path=e}_apply(e){BT(e,"orderByChild");const t=new OS(this._path);if(zS(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Ix(t),r=jx(e._queryParams,n);return GT(r),new qT(e._repo,e._path,r,!0)}}class yC extends cC{_apply(e){BT(e,"orderByKey");const t=jx(e._queryParams,nx);return GT(t),new qT(e._repo,e._path,t,!0)}}class vC extends cC{_apply(e){BT(e,"orderByPriority");const t=jx(e._queryParams,mx);return GT(t),new qT(e._repo,e._path,t,!0)}}class wC extends cC{_apply(e){BT(e,"orderByValue");const t=jx(e._queryParams,Tx);return GT(t),new qT(e._repo,e._path,t,!0)}}class bC extends cC{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(QI("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uC(this._value,this._key)._apply(new hC(this._value,this._key)._apply(e))}}function _C(e,...t){let n=vt(e);for(const e of t)n=e._apply(n);return n}!function(e){Ae(!Yk,"__referenceConstructor has already been defined"),Yk=e}(WT),function(e){Ae(!Jk,"__referenceConstructor has already been defined"),Jk=e}(WT);const EC={};function SC(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||KE("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$E("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=LT(s,i),c=l.repoInfo;"undefined"!=typeof process&&(a="MISSING_ENV_VAR".FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,l=LT(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new hS(hS.OWNER):new dS(e.name,e.options,t);nT("Invalid Firebase Database URL",l),zS(l.path)||KE("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=EC[t.name];i||(i={},EC[t.name]=i);let s=i[e.toURLString()];return s&&KE("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new uT(e,false,n,r),i[e.toURLString()]=s,s}(c,e,u,new uS(e.name,n));return new xC(d,e)}class xC{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new WT(this._repo,RS())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=EC[t];n&&n[e.key]===e||KE(`Database ${t}(${e.repoInfo_}) has already been deleted.`),ET(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&KE("Cannot call "+e+" on a deleted database.")}}function kC(){TS.IS_TRANSPORT_INITIALIZED&&QE("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function IC(){kC(),SS.forceDisallow()}function TC(){kC(),IS.forceDisallow(),SS.forceAllow()}function CC(e,t){GE(e,t)}class NC{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function AC(e,t,n){var r;if(e=vt(e),tT("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new Ue,o=rC(e,(()=>{}));return function(t,n,r,i,o,a){ST(t,"transaction on "+n);const l={path:n,update:r,onComplete:(t,n,r)=>{let i=null;t?s.reject(t):(i=new HT(r,new WT(e._repo,e._path),mx),s.resolve(new NC(n,i)))},status:null,order:UE(),applyLocally:a,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=kT(t,n,void 0);l.currentInputSnapshot=c;const u=l.update(c.val());if(void 0===u)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{YI("transaction failed: Data returned ",u,l.path),l.status=0;const e=DI(t.transactionQueueTree_,n),r=MI(e)||[];let i;r.push(l),FI(e,r),"object"==typeof u&&null!==u&&et(u,".priority")?(i=tt(u,".priority"),Ae(KI(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(mI(t.serverSyncTree_,n)||Sx.EMPTY_NODE).getPriority().val();const s=fT(t),o=kx(u,i),a=OI(o,c,s);l.currentOutputSnapshotRaw=o,l.currentOutputSnapshotResolved=a,l.currentWriteId=yT(t);const d=cI(t.serverSyncTree_,n,a,l.currentWriteId,l.applyLocally);oT(t.eventQueue_,n,d),IT(t,t.transactionQueueTree_)}}(e._repo,e._path,t,0,o,i),s.promise}JS.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},JS.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},OE(ln),tn(new wt("database",((e,{instanceIdentifier:t})=>SC(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t)),"PUBLIC").setMultipleInstances(!0)),fn(NE,AE,void 0),fn(NE,AE,"esm2017");const PC=new Nt("@firebase/database-compat"),OC=function(e){const t="FIREBASE WARNING: "+e;PC.warn(t)};class RC{constructor(e){this._delegate=e}cancel(e){ft("OnDisconnect.cancel",0,1,arguments.length),mt("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){ft("OnDisconnect.remove",0,1,arguments.length),mt("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){ft("OnDisconnect.set",1,2,arguments.length),mt("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){ft("OnDisconnect.setWithPriority",2,3,arguments.length),mt("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(ft("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,OC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}mt("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class LC{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return ft("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class DC{constructor(e,t){this._database=e,this._delegate=t}val(){return ft("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return ft("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return ft("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return ft("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return ft("DataSnapshot.child",0,1,arguments.length),e=String(e),eT("DataSnapshot.child","path",e,!1),new DC(this._database,this._delegate.child(e))}hasChild(e){return ft("DataSnapshot.hasChild",1,1,arguments.length),eT("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return ft("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return ft("DataSnapshot.forEach",1,1,arguments.length),mt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new DC(this._database,t))))}hasChildren(){return ft("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return ft("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return ft("DataSnapshot.ref",0,0,arguments.length),new FC(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class MC{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;ft("Query.on",2,4,arguments.length),mt("Query.on","callback",t,!1);const s=MC.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(s.context,new DC(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return rC(this._delegate,o,a),t;case"child_added":return iC(this._delegate,o,a),t;case"child_removed":return aC(this._delegate,o,a),t;case"child_changed":return sC(this._delegate,o,a),t;case"child_moved":return oC(this._delegate,o,a),t;default:throw new Error(pt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(ft("Query.off",0,3,arguments.length),function(e,t,n){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(pt("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),mt("Query.off","callback",t,!0),gt("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,lC(this._delegate,e,r)}else lC(this._delegate,e)}get(){return XT(this._delegate).then((e=>new DC(this.database,e)))}once(e,t,n,r){ft("Query.once",1,4,arguments.length),mt("Query.once","callback",t,!0);const i=MC.getCancelAndContextArgs_("Query.once",n,r),s=new Ue,o=(e,n)=>{const r=new DC(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};o.userCallback=t,o.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":rC(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":iC(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":aC(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":sC(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":oC(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error(pt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return ft("Query.limitToFirst",1,1,arguments.length),new MC(this.database,_C(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new pC(e)}(e)))}limitToLast(e){return ft("Query.limitToLast",1,1,arguments.length),new MC(this.database,_C(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new mC(e)}(e)))}orderByChild(e){return ft("Query.orderByChild",1,1,arguments.length),new MC(this.database,_C(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return eT("orderByChild","path",e,!1),new gC(e)}(e)))}orderByKey(){return ft("Query.orderByKey",0,0,arguments.length),new MC(this.database,_C(this._delegate,new yC))}orderByPriority(){return ft("Query.orderByPriority",0,0,arguments.length),new MC(this.database,_C(this._delegate,new vC))}orderByValue(){return ft("Query.orderByValue",0,0,arguments.length),new MC(this.database,_C(this._delegate,new wC))}startAt(e=null,t){return ft("Query.startAt",0,2,arguments.length),new MC(this.database,_C(this._delegate,function(e=null,t){return XI("startAt","key",t,!0),new hC(e,t)}(e,t)))}startAfter(e=null,t){return ft("Query.startAfter",0,2,arguments.length),new MC(this.database,_C(this._delegate,function(e,t){return XI("startAfter","key",t,!0),new fC(e,t)}(e,t)))}endAt(e=null,t){return ft("Query.endAt",0,2,arguments.length),new MC(this.database,_C(this._delegate,function(e,t){return XI("endAt","key",t,!0),new uC(e,t)}(e,t)))}endBefore(e=null,t){return ft("Query.endBefore",0,2,arguments.length),new MC(this.database,_C(this._delegate,function(e,t){return XI("endBefore","key",t,!0),new dC(e,t)}(e,t)))}equalTo(e,t){return ft("Query.equalTo",1,2,arguments.length),new MC(this.database,_C(this._delegate,function(e,t){return XI("equalTo","key",t,!0),new bC(e,t)}(e,t)))}toString(){return ft("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return ft("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(ft("Query.isEqual",1,1,arguments.length),!(e instanceof MC))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,mt(e,"cancel",r.cancel,!0),r.context=n,gt(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(pt(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new FC(this.database,new WT(this._delegate._repo,this._delegate._path))}}class FC extends MC{constructor(e,t){super(e,new qT(t._repo,t._path,new Dx,!1)),this.database=e,this._delegate=t}getKey(){return ft("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return ft("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new FC(this.database,YT(this._delegate,e))}getParent(){ft("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new FC(this.database,e):null}getRoot(){return ft("Reference.root",0,0,arguments.length),new FC(this.database,this._delegate.root)}set(e,t){ft("Reference.set",1,2,arguments.length),mt("Reference.set","onComplete",t,!0);const n=JT(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(ft("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,OC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tT("Reference.update",this._delegate._path),mt("Reference.update","onComplete",t,!0);const n=ZT(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){ft("Reference.setWithPriority",2,3,arguments.length),mt("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(tT("setWithPriority",e._path),QI("setWithPriority",t,e._path,!1),ZI("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new Ue;return vT(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){ft("Reference.remove",0,1,arguments.length),mt("Reference.remove","onComplete",e,!0);const t=function(e){return tT("remove",e._path),JT(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){ft("Reference.transaction",1,3,arguments.length),mt("Reference.transaction","transactionUpdate",e,!1),mt("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(pt("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n);const r=AC(this._delegate,e,{applyLocally:n}).then((e=>new LC(e.committed,new DC(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){ft("Reference.setPriority",1,2,arguments.length),mt("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=vt(e),tT("setPriority",e._path),ZI("setPriority",t,!1);const n=new Ue;return vT(e._repo,VS(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){ft("Reference.push",0,2,arguments.length),mt("Reference.push","onComplete",t,!0);const n=function(e,t){e=vt(e),tT("push",e._path),QI("push",t,e._path,!0);const n=hT(e._repo),r=FT(n),i=YT(e,r),s=YT(e,r);let o;return o=null!=t?JT(s,t).then((()=>s)):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),r=n.then((e=>new FC(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new FC(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return tT("Reference.onDisconnect",this._delegate._path),new RC(new zT(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class jC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:IC,forceLongPolling:TC}}useEmulator(e,t,n={}){!function(e,t,n,r={}){(e=vt(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&KE("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&KE('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new hS(hS.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:Ve(r.mockUserToken,e.app.options.projectId);s=new hS(t)}!function(e,t,n,r){e.repoInfo_=new gS(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(this._delegate,e,t,n)}ref(e){if(ft("database.ref",0,1,arguments.length),e instanceof FC){const t=QT(this._delegate,e.toString());return new FC(this,t)}{const t=KT(this._delegate,e);return new FC(this,t)}}refFromURL(e){ft("database.refFromURL",1,1,arguments.length);const t=QT(this._delegate,e);return new FC(this,t)}goOffline(){return ft("database.goOffline",0,0,arguments.length),function(e){(e=vt(e))._checkNotDeleted("goOffline"),ET(e._repo)}(this._delegate)}goOnline(){return ft("database.goOnline",0,0,arguments.length),function(e){var t;(e=vt(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(cT)}(this._delegate)}}jC.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:e=>function(e){return{".sv":{increment:e}}}(e)};var UC=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){OE(n);const o=new _t("auth-internal",new Et("database-standalone"));return o.setComponent(new wt("auth-internal",(()=>r),"PRIVATE")),{instance:new jC(SC(e,o,void 0,t,s),e),namespace:i}}});const VC=jC.ServerValue;!function(e){e.INTERNAL.registerComponent(new wt("database-compat",((e,{instanceIdentifier:t})=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new jC(r,n)}),"PUBLIC").setServiceProps({Reference:FC,Query:MC,Database:jC,DataSnapshot:DC,enableLogging:CC,INTERNAL:UC,ServerValue:VC}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.3.1")}(Nn);var zC=Nn.initializeApp({apiKey:"AIzaSyDF9Mgh-OysxHhFgM27-KC1TBR9NUyuRJs",authDomain:"drippy-e-commerce.firebaseapp.com",projectId:"drippy-e-commerce",storageBucket:"drippy-e-commerce.appspot.com",messagingSenderId:"372470063558",appId:"1:372470063558:web:a963e21996c73e32dd12c7"}),qC=zC.auth(),BC=new Nn.auth.GoogleAuthProvider,GC=(Nn.database(),zC.firestore());function $C(e){return $C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$C(e)}function WC(){WC=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==$C(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),l(v,a,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function HC(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function KC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return QC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QC(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var YC=n.createContext();function JC(){return(0,n.useContext)(YC)}const ZC=function(e){var t=e.children,r=KC((0,n.useState)(!1),2),i=r[0],s=r[1],o=KC((0,n.useState)(!0),2),a=o[0],l=o[1],c=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){HC(s,r,i,o,a,"next",e)}function a(e){HC(s,r,i,o,a,"throw",e)}o(void 0)}))}}(WC().mark((function e(){return WC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qC.signInWithPopup(BC));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){return qC.onAuthStateChanged((function(e){s(e),l(!1)}))}),[]);var u={currentUser:i,signin:function(e,t){return qC.signInWithEmailAndPassword(e,t)},signup:function(e,t,n){return qC.createUserWithEmailAndPassword(t,n).then((function(t){t.user.updateProfile({displayName:e}).then((function(){})).catch((function(e){console.error("Error adding username to displayName: ",e)}))})).catch((function(e){console.error("Error creating user: ",e)}))},SignInWithGoogle:c};return n.createElement(YC.Provider,{value:u},!a&&t)},XC=i.p+"images/sneaker.jpg",eN=i.p+"images/bag.jpg",tN=i.p+"images/jacket.jpg",nN=i.p+"images/sunglasses.jpg",rN=i.p+"images/second-coat.jpg",iN=i.p+"images/second-denim.jpg",sN=i.p+"images/second-jacket.jpg";var oN=[{title:"dior sneakers",price:1450,img:XC,category:"shoes",id:"1"},{title:"nike sneakers",price:40,img:i.p+"images/second-sneakers.jpg",category:"shoes",id:"2",secondHand:!0},{title:"gucci bag",price:1500,salePrice:900,img:eN,category:"accessories",id:"3"},{title:"nike jacket",price:1670,img:tN,category:"jackets",id:"4"},{title:"coat",price:20,salePrice:10,img:rN,category:"jackets",id:"5",secondHand:!0},{title:"leather jacket",price:30,img:sN,category:"jackets",id:"6",secondHand:!0},{title:"dior sunglasses",price:750,img:nN,category:"accessories",id:"7"},{title:"denim jacket",price:15,img:iN,category:"jackets",id:"8",secondHand:!0}];function aN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aN(Object(n),!0).forEach((function(t){cN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uN(e){return function(e){if(Array.isArray(e))return fN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||hN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||hN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hN(e,t){if(e){if("string"==typeof e)return fN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fN(e,t):void 0}}function fN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pN=n.createContext();function mN(){return(0,n.useContext)(pN)}const gN=function(e){var t=e.children,r=dN((0,n.useState)(oN),2),i=r[0],s=r[1],o=JSON.parse(localStorage.getItem("productsInCart")||"[]"),a=dN((0,n.useState)(o),2),l=a[0],c=a[1],u=dN((0,n.useState)(),2),d=(u[0],u[1]),h=dN((0,n.useState)(!0),2),f=(h[0],h[1]),p=dN((0,n.useState)(!0),2),m=(p[0],p[1]),g=JSON.parse(localStorage.getItem("productsInFavs")||"[]"),y=dN((0,n.useState)(g||[]),2),v=y[0],w=y[1],b=JC().currentUser,_=K();function E(e,t){if(0===e.length)t.forEach((function(e){return e.carted=!1}));else for(var n=0;n<t.length;n++)for(var r=0;r<e.length;r++){if(t[n].id===e[r].id){t[n].carted=!0;break}t[n].carted=!1}return uN(t)}(0,n.useEffect)((function(){s(E(l,i)),localStorage.setItem("productsInCart",JSON.stringify(l))}),[l]);var S=function(e,t,n){return x(t,E(e,n))};function x(e,t){if(0===e.length)t.forEach((function(e){return e.faved=!1}));else for(var n=0;n<t.length;n++)for(var r=0;r<e.length;r++){if(t[n].id===e[r].id){t[n].faved=!0;break}t[n].faved=!1}return uN(t)}(0,n.useEffect)((function(){s(S(l,v,i))}),[]),(0,n.useEffect)((function(){s(x(v,i)),localStorage.setItem("productsInFavs",JSON.stringify(v))}),[v]);var k=function(){var e=JSON.parse(localStorage.getItem("productsInCart")||"[]"),t=0;e.forEach((function(e){e.hasOwnProperty("salePrice")?t+=e.salePrice*e.quantity:t+=e.price*e.quantity})),d(t)};return n.createElement(pN.Provider,{value:{setProducts:s,products:i,cart:l,setCart:c,favorites:v,setFavorites:w,increaseQuantity:function(e){var t=JSON.parse(localStorage.getItem("productsInCart")||"[]"),n=t.findIndex((function(t){return t.id===e.id})),r=uN(t);r[n].quantity+=1,c(r),localStorage.setItem("productsInCart",JSON.stringify(r)||"[]"),k()},decreaseQuantity:function(e){var t=JSON.parse(localStorage.getItem("productsInCart")||"[]"),n=t.findIndex((function(t){return t.id===e.id}));if(1===t[n].quantity)if(1===t.length){localStorage.setItem("productsInCart",JSON.stringify([])),f(!0);var r=JSON.parse(localStorage.getItem("productsInCart")||"[]");c(r),k()}else{var i=JSON.parse(localStorage.getItem("productsInCart")||"[]");i.splice(n,1),localStorage.setItem("productsInCart",JSON.stringify(i));var s=JSON.parse(localStorage.getItem("productsInCart"));c(s),k()}else{var o=JSON.parse(localStorage.getItem("productsInCart")||"[]");o[n].quantity-=1,localStorage.setItem("productsInCart",JSON.stringify(o));var a=JSON.parse(localStorage.getItem("productsInCart")||"[]");c(a),k()}},checkCarted:E,addToCart:function(e,t){if(t.preventDefault(),b){var n=JSON.parse(localStorage.getItem("productsInCart")||"[]"),r=n.findIndex((function(t){return t.id===e.id}));if(function(e){s((function(t){return t.map((function(t){return t.id===e.id?lN(lN({},t),{},{carted:!t.carted}):t}))}))}(e),r<0){var i=[].concat(uN(n),[lN(lN({},e),{},{quantity:1,carted:!0})]);c(i),localStorage.setItem("productsInCart",JSON.stringify(i))}else if(1===n.length){localStorage.setItem("productsInCart",JSON.stringify([]));var o=JSON.parse(localStorage.getItem("productsInCart"));c(o)}else{var a=JSON.parse(localStorage.getItem("productsInCart")||"[]");a.splice(r,1),localStorage.setItem("productsInCart",JSON.stringify(a));var l=JSON.parse(localStorage.getItem("productsInCart"));c(l)}}else _("/signin")},removeFromCart:function(e){var t=JSON.parse(localStorage.getItem("productsInCart")||"[]"),n=t.findIndex((function(t){return t.id===e.id}));if(1===t.length){localStorage.setItem("productsInCart",JSON.stringify([])),f(!0);var r=JSON.parse(localStorage.getItem("productsInCart"));c(r)}else{var i=JSON.parse(localStorage.getItem("productsInCart")||"[]");i.splice(n,1),localStorage.setItem("productsInCart",JSON.stringify(i));var s=JSON.parse(localStorage.getItem("productsInCart"));c(s),k()}},addToFavs:function(e,t){if(t.preventDefault(),b){var n=JSON.parse(localStorage.getItem("productsInFavs")||"[]"),r=n.findIndex((function(t){return t.id===e.id}));if(function(e){s((function(t){return t.map((function(t){return t.id===e.id?lN(lN({},t),{},{faved:!t.faved}):t}))}))}(e),r<0){var i=[].concat(uN(n),[lN(lN({},e),{},{faved:!0})]);w(i),localStorage.setItem("productsInFavs",JSON.stringify(i))}else if(1===n.length){localStorage.setItem("productsInFavs",JSON.stringify([]));var o=JSON.parse(localStorage.getItem("productsInFavs"));w(o)}else{var a=JSON.parse(localStorage.getItem("productsInFavs")||"[]");a.splice(r,1),localStorage.setItem("productsInFavs",JSON.stringify(a));var l=JSON.parse(localStorage.getItem("productsInFavs"));w(l)}}else _("/signin")},removeFromFavs:function(e){var t=JSON.parse(localStorage.getItem("productsInFavs")),n=t.findIndex((function(t){return t.id===e.id}));if(1===t.length){localStorage.setItem("productsInFavs",JSON.stringify([]));var r=JSON.parse(localStorage.getItem("productsInFavs"));m(!0),w(r)}else{v.splice(n,1),localStorage.setItem("productsInFavs",JSON.stringify(v));var i=JSON.parse(localStorage.getItem("productsInFavs"));w(i)}},checkFaved:x,productCheck:S}},t)};function yN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vN(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wN=n.forwardRef((function(e,t){var r=e.className,i=K(),s=mN(),o=s.cart,a=s.decreaseQuantity,l=s.removeFromCart,c=s.increaseQuantity,u=yN((0,n.useState)(),2),d=u[0],h=u[1],f=yN((0,n.useState)(!0),2),p=f[0],m=f[1];(0,n.useEffect)((function(){g(),0!==o.length?m(!1):m(!0)}),[o]);var g=function(){var e=JSON.parse(localStorage.getItem("productsInCart")||"[]"),t=0;e.forEach((function(e){e.hasOwnProperty("salePrice")?t+=e.salePrice*e.quantity:t+=e.price*e.quantity})),h(t)};return n.createElement("div",{ref:t,className:"cart ".concat(r)},n.createElement("div",null,p?n.createElement("span",{className:"d-flex justify-content-center"},"your cart is empty!!"):n.createElement(n.Fragment,null,n.createElement("div",{className:"cart-table d-flex col-12 align-items-center justify-content-start"},n.createElement("span",{className:"col-7 p-0 mr-1"},"product:"),n.createElement("span",{className:"col-2 p-0 mr-1"},"price:"),n.createElement("span",{className:"col-2 p-0"},"qty:")),o.map((function(e){return n.createElement(de,{to:"/products/".concat(e.id),key:e.id},n.createElement("div",{className:"cart-item d-flex col-12 align-items-center justify-content-start"},n.createElement("div",{className:"d-flex align-items-center col-7 p-0 mr-1"},n.createElement("img",{className:"cart-img",src:e.img,alt:e.title}),n.createElement("span",{className:"cart-title"},e.title)),n.createElement("span",{className:"cart-price col-2 p-0 mr-1"},"EGP ",e.salePrice?e.salePrice:e.price),n.createElement("div",{className:"cart-quantity d-flex algin-items-center justify-content-center col-2 p-0"},n.createElement("button",{onClick:function(t){t.preventDefault(),c(e)},className:"btn-plus"},"+"),n.createElement("span",{className:""},e.quantity),n.createElement("button",{onClick:function(t){t.preventDefault(),a(e)},className:"btn-minus"},"−")),n.createElement("div",{className:"col-1 p-0"},n.createElement("button",{onClick:function(t){t.preventDefault(),l(e)},className:"remove-item-btn"},"✕"))))})),n.createElement("p",{className:"my-1"},"total: egp ",d),n.createElement("button",{onClick:function(){i("/checkout")},className:"checkout-btn btn btn-success d-flex justify-content-center mx-auto"},"checkout"))))}));const bN=wN;var _N=i(8497),EN={};function SN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}EN.styleTagTransform=ke(),EN.setAttributes=_e(),EN.insert=we().bind(null,"head"),EN.domAPI=ye(),EN.insertStyleElement=Se(),me()(_N.Z,EN),_N.Z&&_N.Z.locals&&_N.Z.locals;var xN=n.forwardRef((function(e,t){var r,i,s=e.className,o=mN(),a=o.favorites,l=o.removeFromFavs,c=(r=(0,n.useState)(!0),i=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(r,i)||function(e,t){if(e){if("string"==typeof e)return SN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SN(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1];return(0,n.useEffect)((function(){0!==a.length?d(!1):d(!0)}),[a]),n.createElement("div",{ref:t,className:"favs ".concat(s)},n.createElement("div",null,u?n.createElement("span",{className:"d-flex justify-content-center"},"your favs is empty!!"):n.createElement("div",null,n.createElement("div",{className:"favs-table d-flex col-12 align-items-center justify-content-start"},n.createElement("span",{className:"col-7 p-0 mr-1"},"product:"),n.createElement("span",{className:"col-3 p-0 mr-1"},"price:")),a.map((function(e){return n.createElement(de,{to:"/products/".concat(e.id),key:e.id},n.createElement("div",{className:"favs-item d-flex col-12 align-items-center justify-content-start",key:e.id},n.createElement("div",{className:"d-flex align-items-center col-7 p-0 mr-1"},n.createElement("img",{className:"favs-img",src:e.img,alt:e.title}),n.createElement("span",{className:"favs-title"},e.title)),n.createElement("span",{className:"favs-price col-3 p-0 mr-1"},"EGP ",e.salePrice?e.salePrice:e.price),n.createElement("div",{className:"col-1 p-0"},n.createElement("button",{onClick:function(t){t.preventDefault(),l(e)},className:"remove-item-btn"},"✕"))))})))))}));const kN=xN,IN=i.p+"images/logo.png",TN=i.p+"images/white-logo.png",CN=i.p+"images/search.png",NN=i.p+"images/white-search.png",AN=i.p+"images/heart.png",PN=i.p+"images/white-heart.png",ON=i.p+"images/shopping-bag.png",RN=i.p+"images/white-shopping-bag.png",LN=i.p+"images/sidebar.png",DN=i.p+"images/white-sidebar.png",MN=i.p+"images/white-user.png",FN=i.p+"images/user.png";function jN(e){return jN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jN(e)}function UN(){UN=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==jN(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),l(v,a,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function VN(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function zN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qN(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const BN=function(){var e=mN(),t=e.cart,r=e.favorites,i=JC().currentUser,s=zN((0,n.useState)(!1),2),o=s[0],a=s[1],l=H().pathname;(0,n.useEffect)((function(){a("/"===l)}),[l]);var c=zN((0,n.useState)(!1),2),u=c[0],d=c[1];(0,n.useEffect)((function(){var e=function(){o?window.scrollY>10?d(!0):d(!1):d(!0)};e(),window.addEventListener("scroll",e)}),[o]);var h=zN((0,n.useState)(!0),2),f=h[0],p=h[1];(0,n.useEffect)((function(){0!==t.length?p(!1):p(!0)}),[t]);var m=zN((0,n.useState)(!0),2),g=m[0],y=m[1];(0,n.useEffect)((function(){0!==r.length?y(!1):y(!0)}),[r]);var v=zN((0,n.useState)(!1),2),w=v[0],b=v[1],_=(0,n.useRef)(null),E=(0,n.useRef)(null),S=(0,n.useRef)(!1);(0,n.useEffect)((function(){S.current=w}),[w]),(0,n.useEffect)((function(){function e(e){!_.current||_.current.contains(e.target)||E.current.contains(e.target)||e.target.classList.contains("remove-item-btn")||S.current&&b(!1)}return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}));var x=zN((0,n.useState)(!1),2),k=x[0],I=x[1],T=(0,n.useRef)(null),C=(0,n.useRef)(null),N=(0,n.useRef)(!1);(0,n.useEffect)((function(){N.current=k}),[k]),(0,n.useEffect)((function(){function e(e){!T.current||T.current.contains(e.target)||!C.current||C.current.contains(e.target)||e.target.classList.contains("remove-item-btn")||N.current&&I(!1)}return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}));var A=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){VN(s,r,i,o,a,"next",e)}function a(e){VN(s,r,i,o,a,"throw",e)}o(void 0)}))}}(UN().mark((function e(){return UN().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise((function(e,t){var n=i,r={cart:JSON.parse(localStorage.getItem("productsInCart")||"[]"),favs:JSON.parse(localStorage.getItem("productsInFavs")||"[]")};GC.collection("users").doc(n.uid).set(r,{merge:!0}).then((function(){e()})).catch((function(e){t(e)}))})).then((function(){return localStorage.setItem("productsInCart",JSON.stringify([])),localStorage.setItem("productsInFavs",JSON.stringify([])),qC.signOut()})).then((function(){window.location.reload()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=zN((0,n.useState)(""),2),O=P[0],R=P[1];return(0,n.useEffect)((function(){i&&R(i.displayName)}),[i]),n.createElement("div",{className:u?"navbar-section bg-light nav-shadow":"navbar-section"},n.createElement("div",{className:"section-container"},n.createElement("nav",{className:"d-flex align-items-center navbar navbar-expand-lg d-flex justify-content-between align-items-center row col-12 p-0 m-0"},n.createElement(de,{to:"/",className:"nav-brand col-2 justify-content-start align-items-center p-0"},n.createElement("img",{className:"nav-logo",src:u?IN:TN})),n.createElement("div",{className:"collapse navbar-collapse justify-content-center width",id:"collapseWidthExample"},n.createElement("button",{className:"close-sidebar","data-toggle":"collapse","data-target":"#collapseWidthExample","aria-controls":"collapseWidthExample","aria-expanded":"false","aria-label":"Toggle navigation"},"X"),n.createElement("div",{className:"nav-sidebar-logo d-none justify-content-center p-0"},n.createElement("img",{className:"nav-logo",src:IN})),n.createElement("ul",{className:"navbar-nav d-flex mt-4"},n.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#collapseWidthExample","aria-controls":"collapseWidthExample","aria-expanded":"false","aria-label":"Toggle navigation"},n.createElement(de,{to:"/jackets",className:u?"nav-link":"nav-link text-white"},"jackets")),n.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#collapseWidthExample","aria-controls":"collapseWidthExample","aria-expanded":"false","aria-label":"Toggle navigation"},n.createElement(de,{to:"/shoes",className:u?"nav-link":"nav-link text-white"},"shoes")),n.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#collapseWidthExample","aria-controls":"collapseWidthExample","aria-expanded":"false","aria-label":"Toggle navigation"},n.createElement(de,{to:"/accessories",className:u?"nav-link":"nav-link text-white"},"accessories")),n.createElement("li",{className:"nav-item","data-toggle":"collapse","data-target":"#collapseWidthExample","aria-controls":"collapseWidthExample","aria-expanded":"false","aria-label":"Toggle navigation"},n.createElement(de,{to:"/sales",className:u?"nav-link nav-sales":"nav-link text-white nav-sales"},"sales")))),n.createElement("div",{className:"d-flex justify-content-end align-items-center nav-icons col-4"},n.createElement("div",{className:"search-input-container d-flex align-items-center justify-content-start"},n.createElement("input",{className:u?"nav-search-input":"nav-search-input-white",placeholder:"Search...",type:"text"}),n.createElement("img",{className:"nav-search-icon",src:u?CN:NN})),n.createElement("button",{ref:E,onClick:function(){b((function(e){return!e}))},className:"nav-btn bag-btn"},n.createElement("img",{className:"nav-bag-icon nav-icon",src:u?ON:RN}),n.createElement("span",{className:f?"d-none ":"cart-number"},t.length)),n.createElement(bN,{ref:_,className:w?"":"d-none"}),n.createElement("button",{ref:C,onClick:function(){I((function(e){return!e}))},className:"nav-btn heart-btn"},n.createElement("img",{className:"nav-fav-icon nav-icon",src:u?AN:PN}),n.createElement("span",{className:g?"d-none ":"fav-number"},r.length)),n.createElement(kN,{ref:T,className:k?"":"d-none"}),n.createElement("div",{className:"dropdown"},n.createElement("button",{className:"nav-btn p-0",type:"button","data-toggle":"dropdown","aria-expanded":"false"},n.createElement("img",{className:"nav-user-icon nav-icon",src:u?FN:MN})),n.createElement("div",{className:"dropdown-menu"},n.createElement(de,{className:i?"dropdown-item":"d-none",to:"#"},"Hello ",O," :)"),n.createElement(de,{className:i?"dropdown-item":"d-none",to:"#",onClick:function(){A()}},"Logout"),n.createElement(de,{className:i?"d-none":"dropdown-item",to:"/signup"},"sign up"),n.createElement(de,{className:i?"d-none":"dropdown-item",to:"/signin"},"sign in")))),n.createElement("div",{className:"nav-sidebar navbar-toggler col-2","data-toggle":"collapse","data-target":"#collapseWidthExample","aria-controls":"collapseWidthExample","aria-expanded":"false","aria-label":"Toggle navigation"},n.createElement("img",{className:"nav-sidebar-icon nav-icon navbar-toggler-icon p-1",src:u?LN:DN})))))};var GN=i(1247),$N={};$N.styleTagTransform=ke(),$N.setAttributes=_e(),$N.insert=we().bind(null,"head"),$N.domAPI=ye(),$N.insertStyleElement=Se(),me()(GN.Z,$N),GN.Z&&GN.Z.locals&&GN.Z.locals;var WN=i(9047),HN={};HN.styleTagTransform=ke(),HN.setAttributes=_e(),HN.insert=we().bind(null,"head"),HN.domAPI=ye(),HN.insertStyleElement=Se(),me()(WN.Z,HN),WN.Z&&WN.Z.locals&&WN.Z.locals;const KN=i.p+"images/men.jpg",QN=i.p+"images/women.jpg",YN=i.p+"images/kids.jpg",JN=function(){return(0,n.useEffect)((function(){document.querySelector(".carousel-control-next-icon").click()}),[]),n.createElement("div",{id:"carouselExampleFade",className:"carousel slide carousel-fade","data-ride":"carousel"},n.createElement("div",{className:"carousel-inner"},n.createElement("div",{className:"carousel-item active"},n.createElement("div",{className:"hero-carousel-img-container"},n.createElement("img",{src:QN,className:"hero-carousel-img d-block w-100",alt:"..."})),n.createElement("div",{className:"carousel-form"},n.createElement("span",{className:"carousel-title"},"women collection"),n.createElement("p",{className:"carousel-desc"},"we are in the industry since 1890."),n.createElement("button",{className:"btn carousel-btn-shop"},"shop now"))),n.createElement("div",{className:"carousel-item"},n.createElement("div",{className:"hero-carousel-img-container"},n.createElement("img",{src:KN,className:"hero-carousel-img d-block w-100",alt:"..."})),n.createElement("div",{className:"carousel-form"},n.createElement("span",{className:"carousel-title"},"men collection"),n.createElement("p",{className:"carousel-desc"},"we are in the industry since 1890."),n.createElement("button",{className:"btn carousel-btn-shop"},"shop now"))),n.createElement("div",{className:"carousel-item"},n.createElement("div",{className:"hero-carousel-img-container"},n.createElement("img",{src:YN,className:"hero-carousel-img d-block w-100",alt:"..."})),n.createElement("div",{className:"carousel-form"},n.createElement("span",{className:"carousel-title"},"kids collection"),n.createElement("p",{className:"carousel-desc"},"we are in the industry since 1890."),n.createElement("button",{className:"btn carousel-btn-shop"},"shop now")))),n.createElement("button",{className:"carousel-control-prev",type:"button","data-target":"#carouselExampleFade","data-slide":"prev"},n.createElement("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),n.createElement("span",{className:"sr-only"},"Previous")),n.createElement("button",{className:"carousel-control-next",type:"button","data-target":"#carouselExampleFade","data-slide":"next"},n.createElement("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),n.createElement("span",{className:"sr-only"},"Next")))};var ZN=i(484),XN={};XN.styleTagTransform=ke(),XN.setAttributes=_e(),XN.insert=we().bind(null,"head"),XN.domAPI=ye(),XN.insertStyleElement=Se(),me()(ZN.Z,XN),ZN.Z&&ZN.Z.locals&&ZN.Z.locals;const eA=function(){return n.createElement("div",{className:"looking-drippy-section section d-flex align-items-center justify-content-center"},n.createElement("h2",{className:"text-uppercase text-center font-weight-bold"},"what is stopping you from being drippy?"))};var tA=i(5323),nA={};nA.styleTagTransform=ke(),nA.setAttributes=_e(),nA.insert=we().bind(null,"head"),nA.domAPI=ye(),nA.insertStyleElement=Se(),me()(tA.Z,nA),tA.Z&&tA.Z.locals&&tA.Z.locals;var rA=i(1574),iA={};function sA(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function oA(e={},t={}){Object.keys(t).forEach((n=>{void 0===e[n]?e[n]=t[n]:sA(t[n])&&sA(e[n])&&Object.keys(t[n]).length>0&&oA(e[n],t[n])}))}iA.styleTagTransform=ke(),iA.setAttributes=_e(),iA.insert=we().bind(null,"head"),iA.domAPI=ye(),iA.insertStyleElement=Se(),me()(rA.Z,iA),rA.Z&&rA.Z.locals&&rA.Z.locals;const aA={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function lA(){const e="undefined"!=typeof document?document:{};return oA(e,aA),e}const cA={document:aA,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function uA(){const e="undefined"!=typeof window?window:{};return oA(e,cA),e}class dA extends Array{constructor(e){"number"==typeof e?super(e):(super(...e||[]),function(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get:()=>t,set(e){t.__proto__=e}})}(this))}}function hA(e=[]){const t=[];return e.forEach((e=>{Array.isArray(e)?t.push(...hA(e)):t.push(e)})),t}function fA(e,t){return Array.prototype.filter.call(e,t)}function pA(e,t){const n=uA(),r=lA();let i=[];if(!t&&e instanceof dA)return e;if(!e)return new dA(i);if("string"==typeof e){const n=e.trim();if(n.indexOf("<")>=0&&n.indexOf(">")>=0){let e="div";0===n.indexOf("<li")&&(e="ul"),0===n.indexOf("<tr")&&(e="tbody"),0!==n.indexOf("<td")&&0!==n.indexOf("<th")||(e="tr"),0===n.indexOf("<tbody")&&(e="table"),0===n.indexOf("<option")&&(e="select");const t=r.createElement(e);t.innerHTML=n;for(let e=0;e<t.childNodes.length;e+=1)i.push(t.childNodes[e])}else i=function(e,t){if("string"!=typeof e)return[e];const n=[],r=t.querySelectorAll(e);for(let e=0;e<r.length;e+=1)n.push(r[e]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)i.push(e);else if(Array.isArray(e)){if(e instanceof dA)return e;i=e}return new dA(function(e){const t=[];for(let n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(i))}pA.fn=dA.prototype;const mA="resize scroll".split(" ");function gA(e){return function(...t){if(void 0===t[0]){for(let t=0;t<this.length;t+=1)mA.indexOf(e)<0&&(e in this[t]?this[t][e]():pA(this[t]).trigger(e));return this}return this.on(e,...t)}}gA("click"),gA("blur"),gA("focus"),gA("focusin"),gA("focusout"),gA("keyup"),gA("keydown"),gA("keypress"),gA("submit"),gA("change"),gA("mousedown"),gA("mousemove"),gA("mouseup"),gA("mouseenter"),gA("mouseleave"),gA("mouseout"),gA("mouseover"),gA("touchstart"),gA("touchend"),gA("touchmove"),gA("resize"),gA("scroll");const yA={addClass:function(...e){const t=hA(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.add(...t)})),this},removeClass:function(...e){const t=hA(e.map((e=>e.split(" "))));return this.forEach((e=>{e.classList.remove(...t)})),this},hasClass:function(...e){const t=hA(e.map((e=>e.split(" "))));return fA(this,(e=>t.filter((t=>e.classList.contains(t))).length>0)).length>0},toggleClass:function(...e){const t=hA(e.map((e=>e.split(" "))));this.forEach((e=>{t.forEach((t=>{e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(let n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(const t in e)this[n][t]=e[t],this[n].setAttribute(t,e[t]);return this},removeAttr:function(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?`${e}ms`:e;return this},on:function(...e){let[t,n,r,i]=e;function s(e){const t=e.target;if(!t)return;const i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),pA(t).is(n))r.apply(t,i);else{const e=pA(t).parents();for(let t=0;t<e.length;t+=1)pA(e[t]).is(n)&&r.apply(e[t],i)}}function o(e){const t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),r.apply(this,t)}"function"==typeof e[1]&&([t,r,i]=e,n=void 0),i||(i=!1);const a=t.split(" ");let l;for(let e=0;e<this.length;e+=1){const t=this[e];if(n)for(l=0;l<a.length;l+=1){const e=a[l];t.dom7LiveListeners||(t.dom7LiveListeners={}),t.dom7LiveListeners[e]||(t.dom7LiveListeners[e]=[]),t.dom7LiveListeners[e].push({listener:r,proxyListener:s}),t.addEventListener(e,s,i)}else for(l=0;l<a.length;l+=1){const e=a[l];t.dom7Listeners||(t.dom7Listeners={}),t.dom7Listeners[e]||(t.dom7Listeners[e]=[]),t.dom7Listeners[e].push({listener:r,proxyListener:o}),t.addEventListener(e,o,i)}}return this},off:function(...e){let[t,n,r,i]=e;"function"==typeof e[1]&&([t,r,i]=e,n=void 0),i||(i=!1);const s=t.split(" ");for(let e=0;e<s.length;e+=1){const t=s[e];for(let e=0;e<this.length;e+=1){const s=this[e];let o;if(!n&&s.dom7Listeners?o=s.dom7Listeners[t]:n&&s.dom7LiveListeners&&(o=s.dom7LiveListeners[t]),o&&o.length)for(let e=o.length-1;e>=0;e-=1){const n=o[e];r&&n.listener===r||r&&n.listener&&n.listener.dom7proxy&&n.listener.dom7proxy===r?(s.removeEventListener(t,n.proxyListener,i),o.splice(e,1)):r||(s.removeEventListener(t,n.proxyListener,i),o.splice(e,1))}}}return this},trigger:function(...e){const t=uA(),n=e[0].split(" "),r=e[1];for(let i=0;i<n.length;i+=1){const s=n[i];for(let n=0;n<this.length;n+=1){const i=this[n];if(t.CustomEvent){const n=new t.CustomEvent(s,{detail:r,bubbles:!0,cancelable:!0});i.dom7EventData=e.filter(((e,t)=>t>0)),i.dispatchEvent(n),i.dom7EventData=[],delete i.dom7EventData}}}return this},transitionEnd:function(e){const t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){const e=uA();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){const e=uA(),t=lA(),n=this[0],r=n.getBoundingClientRect(),i=t.body,s=n.clientTop||i.clientTop||0,o=n.clientLeft||i.clientLeft||0,a=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:r.top+a-s,left:r.left+l-o}}return null},css:function(e,t){const n=uA();let r;if(1===arguments.length){if("string"!=typeof e){for(r=0;r<this.length;r+=1)for(const t in e)this[r].style[t]=e[t];return this}if(this[0])return n.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(r=0;r<this.length;r+=1)this[r].style[e]=t;return this}return this},each:function(e){return e?(this.forEach(((t,n)=>{e.apply(t,[t,n])})),this):this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){const t=uA(),n=lA(),r=this[0];let i,s;if(!r||void 0===e)return!1;if("string"==typeof e){if(r.matches)return r.matches(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);for(i=pA(e),s=0;s<i.length;s+=1)if(i[s]===r)return!0;return!1}if(e===n)return r===n;if(e===t)return r===t;if(e.nodeType||e instanceof dA){for(i=e.nodeType?[e]:e,s=0;s<i.length;s+=1)if(i[s]===r)return!0;return!1}return!1},index:function(){let e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;const t=this.length;if(e>t-1)return pA([]);if(e<0){const n=t+e;return pA(n<0?[]:[this[n]])}return pA([this[e]])},append:function(...e){let t;const n=lA();for(let r=0;r<e.length;r+=1){t=e[r];for(let e=0;e<this.length;e+=1)if("string"==typeof t){const r=n.createElement("div");for(r.innerHTML=t;r.firstChild;)this[e].appendChild(r.firstChild)}else if(t instanceof dA)for(let n=0;n<t.length;n+=1)this[e].appendChild(t[n]);else this[e].appendChild(t)}return this},prepend:function(e){const t=lA();let n,r;for(n=0;n<this.length;n+=1)if("string"==typeof e){const i=t.createElement("div");for(i.innerHTML=e,r=i.childNodes.length-1;r>=0;r-=1)this[n].insertBefore(i.childNodes[r],this[n].childNodes[0])}else if(e instanceof dA)for(r=0;r<e.length;r+=1)this[n].insertBefore(e[r],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&pA(this[0].nextElementSibling).is(e)?pA([this[0].nextElementSibling]):pA([]):this[0].nextElementSibling?pA([this[0].nextElementSibling]):pA([]):pA([])},nextAll:function(e){const t=[];let n=this[0];if(!n)return pA([]);for(;n.nextElementSibling;){const r=n.nextElementSibling;e?pA(r).is(e)&&t.push(r):t.push(r),n=r}return pA(t)},prev:function(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&pA(t.previousElementSibling).is(e)?pA([t.previousElementSibling]):pA([]):t.previousElementSibling?pA([t.previousElementSibling]):pA([])}return pA([])},prevAll:function(e){const t=[];let n=this[0];if(!n)return pA([]);for(;n.previousElementSibling;){const r=n.previousElementSibling;e?pA(r).is(e)&&t.push(r):t.push(r),n=r}return pA(t)},parent:function(e){const t=[];for(let n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?pA(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return pA(t)},parents:function(e){const t=[];for(let n=0;n<this.length;n+=1){let r=this[n].parentNode;for(;r;)e?pA(r).is(e)&&t.push(r):t.push(r),r=r.parentNode}return pA(t)},closest:function(e){let t=this;return void 0===e?pA([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].querySelectorAll(e);for(let e=0;e<r.length;e+=1)t.push(r[e])}return pA(t)},children:function(e){const t=[];for(let n=0;n<this.length;n+=1){const r=this[n].children;for(let n=0;n<r.length;n+=1)e&&!pA(r[n]).is(e)||t.push(r[n])}return pA(t)},filter:function(e){return pA(fA(this,e))},remove:function(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(yA).forEach((e=>{Object.defineProperty(pA.fn,e,{value:yA[e],writable:!0})}));const vA=pA;function wA(e,t=0){return setTimeout(e,t)}function bA(){return Date.now()}function _A(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function EA(...e){const t=Object(e[0]),n=["__proto__","constructor","prototype"];for(let i=1;i<e.length;i+=1){const s=e[i];if(null!=s&&(r=s,!("undefined"!=typeof window&&void 0!==window.HTMLElement?r instanceof HTMLElement:r&&(1===r.nodeType||11===r.nodeType)))){const e=Object.keys(Object(s)).filter((e=>n.indexOf(e)<0));for(let n=0,r=e.length;n<r;n+=1){const r=e[n],i=Object.getOwnPropertyDescriptor(s,r);void 0!==i&&i.enumerable&&(_A(t[r])&&_A(s[r])?s[r].__swiper__?t[r]=s[r]:EA(t[r],s[r]):!_A(t[r])&&_A(s[r])?(t[r]={},s[r].__swiper__?t[r]=s[r]:EA(t[r],s[r])):t[r]=s[r])}}}var r;return t}function SA(e,t,n){e.style.setProperty(t,n)}function xA({swiper:e,targetPosition:t,side:n}){const r=uA(),i=-e.translate;let s,o=null;const a=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const l=t>i?"next":"prev",c=(e,t)=>"next"===l&&e>=t||"prev"===l&&e<=t,u=()=>{s=(new Date).getTime(),null===o&&(o=s);const l=Math.max(Math.min((s-o)/a,1),0),d=.5-Math.cos(l*Math.PI)/2;let h=i+d*(t-i);if(c(h,t)&&(h=t),e.wrapperEl.scrollTo({[n]:h}),c(h,t))return e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout((()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:h})})),void r.cancelAnimationFrame(e.cssModeFrameID);e.cssModeFrameID=r.requestAnimationFrame(u)};u()}let kA,IA,TA;function CA(){return kA||(kA=function(){const e=uA(),t=lA();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let t=!1;try{const n=Object.defineProperty({},"passive",{get(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),kA}const NA={on(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof t)return r;const i=n?"unshift":"push";return e.split(" ").forEach((e=>{r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][i](t)})),r},once(e,t,n){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof t)return r;function i(...n){r.off(e,i),i.__emitterProxy&&delete i.__emitterProxy,t.apply(r,n)}return i.__emitterProxy=t,r.on(e,i,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof e)return n;const r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((e=>{void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((r,i)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(i,1)}))})),n):n},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsListeners)return t;let n,r,i;return"string"==typeof e[0]||Array.isArray(e[0])?(n=e[0],r=e.slice(1,e.length),i=t):(n=e[0].events,r=e[0].data,i=e[0].context||t),r.unshift(i),(Array.isArray(n)?n:n.split(" ")).forEach((e=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach((t=>{t.apply(i,[e,...r])})),t.eventsListeners&&t.eventsListeners[e]&&t.eventsListeners[e].forEach((e=>{e.apply(i,r)}))})),t}},AA={updateSize:function(){const e=this;let t,n;const r=e.$el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:r[0].clientWidth,n=void 0!==e.params.height&&null!==e.params.height?e.params.height:r[0].clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),n=n-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}const r=e.params,{$wrapperEl:i,size:s,rtlTranslate:o,wrongRTL:a}=e,l=e.virtual&&r.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,u=i.children(`.${e.params.slideClass}`),d=l?e.virtual.slides.length:u.length;let h=[];const f=[],p=[];let m=r.slidesOffsetBefore;"function"==typeof m&&(m=r.slidesOffsetBefore.call(e));let g=r.slidesOffsetAfter;"function"==typeof g&&(g=r.slidesOffsetAfter.call(e));const y=e.snapGrid.length,v=e.slidesGrid.length;let w=r.spaceBetween,b=-m,_=0,E=0;if(void 0===s)return;"string"==typeof w&&w.indexOf("%")>=0&&(w=parseFloat(w.replace("%",""))/100*s),e.virtualSize=-w,o?u.css({marginLeft:"",marginBottom:"",marginTop:""}):u.css({marginRight:"",marginBottom:"",marginTop:""}),r.centeredSlides&&r.cssMode&&(SA(e.wrapperEl,"--swiper-centered-offset-before",""),SA(e.wrapperEl,"--swiper-centered-offset-after",""));const S=r.grid&&r.grid.rows>1&&e.grid;let x;S&&e.grid.initSlides(d);const k="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((e=>void 0!==r.breakpoints[e].slidesPerView)).length>0;for(let i=0;i<d;i+=1){x=0;const o=u.eq(i);if(S&&e.grid.updateSlide(i,o,d,t),"none"!==o.css("display")){if("auto"===r.slidesPerView){k&&(u[i].style[t("width")]="");const s=getComputedStyle(o[0]),a=o[0].style.transform,l=o[0].style.webkitTransform;if(a&&(o[0].style.transform="none"),l&&(o[0].style.webkitTransform="none"),r.roundLengths)x=e.isHorizontal()?o.outerWidth(!0):o.outerHeight(!0);else{const e=n(s,"width"),t=n(s,"padding-left"),r=n(s,"padding-right"),i=n(s,"margin-left"),a=n(s,"margin-right"),l=s.getPropertyValue("box-sizing");if(l&&"border-box"===l)x=e+i+a;else{const{clientWidth:n,offsetWidth:s}=o[0];x=e+t+r+i+a+(s-n)}}a&&(o[0].style.transform=a),l&&(o[0].style.webkitTransform=l),r.roundLengths&&(x=Math.floor(x))}else x=(s-(r.slidesPerView-1)*w)/r.slidesPerView,r.roundLengths&&(x=Math.floor(x)),u[i]&&(u[i].style[t("width")]=`${x}px`);u[i]&&(u[i].swiperSlideSize=x),p.push(x),r.centeredSlides?(b=b+x/2+_/2+w,0===_&&0!==i&&(b=b-s/2-w),0===i&&(b=b-s/2-w),Math.abs(b)<.001&&(b=0),r.roundLengths&&(b=Math.floor(b)),E%r.slidesPerGroup==0&&h.push(b),f.push(b)):(r.roundLengths&&(b=Math.floor(b)),(E-Math.min(e.params.slidesPerGroupSkip,E))%e.params.slidesPerGroup==0&&h.push(b),f.push(b),b=b+x+w),e.virtualSize+=x+w,_=x,E+=1}}if(e.virtualSize=Math.max(e.virtualSize,s)+g,o&&a&&("slide"===r.effect||"coverflow"===r.effect)&&i.css({width:`${e.virtualSize+r.spaceBetween}px`}),r.setWrapperSize&&i.css({[t("width")]:`${e.virtualSize+r.spaceBetween}px`}),S&&e.grid.updateWrapperSize(x,h,t),!r.centeredSlides){const t=[];for(let n=0;n<h.length;n+=1){let i=h[n];r.roundLengths&&(i=Math.floor(i)),h[n]<=e.virtualSize-s&&t.push(i)}h=t,Math.floor(e.virtualSize-s)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-s)}if(0===h.length&&(h=[0]),0!==r.spaceBetween){const n=e.isHorizontal()&&o?"marginLeft":t("marginRight");u.filter(((e,t)=>!r.cssMode||t!==u.length-1)).css({[n]:`${w}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let e=0;p.forEach((t=>{e+=t+(r.spaceBetween?r.spaceBetween:0)})),e-=r.spaceBetween;const t=e-s;h=h.map((e=>e<0?-m:e>t?t+g:e))}if(r.centerInsufficientSlides){let e=0;if(p.forEach((t=>{e+=t+(r.spaceBetween?r.spaceBetween:0)})),e-=r.spaceBetween,e<s){const t=(s-e)/2;h.forEach(((e,n)=>{h[n]=e-t})),f.forEach(((e,n)=>{f[n]=e+t}))}}if(Object.assign(e,{slides:u,snapGrid:h,slidesGrid:f,slidesSizesGrid:p}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){SA(e.wrapperEl,"--swiper-centered-offset-before",-h[0]+"px"),SA(e.wrapperEl,"--swiper-centered-offset-after",e.size/2-p[p.length-1]/2+"px");const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(d!==c&&e.emit("slidesLengthChange"),h.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==v&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!(l||r.cssMode||"slide"!==r.effect&&"fade"!==r.effect)){const t=`${r.containerModifierClass}backface-hidden`,n=e.$el.hasClass(t);d<=r.maxBackfaceHiddenSlides?n||e.$el.addClass(t):n&&e.$el.removeClass(t)}},updateAutoHeight:function(e){const t=this,n=[],r=t.virtual&&t.params.virtual.enabled;let i,s=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const o=e=>r?t.slides.filter((t=>parseInt(t.getAttribute("data-swiper-slide-index"),10)===e))[0]:t.slides.eq(e)[0];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||vA([])).each((e=>{n.push(e)}));else for(i=0;i<Math.ceil(t.params.slidesPerView);i+=1){const e=t.activeIndex+i;if(e>t.slides.length&&!r)break;n.push(o(e))}else n.push(o(t.activeIndex));for(i=0;i<n.length;i+=1)if(void 0!==n[i]){const e=n[i].offsetHeight;s=e>s?e:s}(s||0===s)&&t.$wrapperEl.css("height",`${s}px`)},updateSlidesOffset:function(){const e=this,t=e.slides;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=e.isHorizontal()?t[n].offsetLeft:t[n].offsetTop},updateSlidesProgress:function(e=this&&this.translate||0){const t=this,n=t.params,{slides:r,rtlTranslate:i,snapGrid:s}=t;if(0===r.length)return;void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();let o=-e;i&&(o=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let e=0;e<r.length;e+=1){const a=r[e];let l=a.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);const c=(o+(n.centeredSlides?t.minTranslate():0)-l)/(a.swiperSlideSize+n.spaceBetween),u=(o-s[0]+(n.centeredSlides?t.minTranslate():0)-l)/(a.swiperSlideSize+n.spaceBetween),d=-(o-l),h=d+t.slidesSizesGrid[e];(d>=0&&d<t.size-1||h>1&&h<=t.size||d<=0&&h>=t.size)&&(t.visibleSlides.push(a),t.visibleSlidesIndexes.push(e),r.eq(e).addClass(n.slideVisibleClass)),a.progress=i?-c:c,a.originalProgress=i?-u:u}t.visibleSlides=vA(t.visibleSlides)},updateProgress:function(e){const t=this;if(void 0===e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,r=t.maxTranslate()-t.minTranslate();let{progress:i,isBeginning:s,isEnd:o}=t;const a=s,l=o;0===r?(i=0,s=!0,o=!0):(i=(e-t.minTranslate())/r,s=i<=0,o=i>=1),Object.assign(t,{progress:i,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),s&&!a&&t.emit("reachBeginning toEdge"),o&&!l&&t.emit("reachEnd toEdge"),(a&&!s||l&&!o)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,$wrapperEl:r,activeIndex:i,realIndex:s}=e,o=e.virtual&&n.virtual.enabled;let a;t.removeClass(`${n.slideActiveClass} ${n.slideNextClass} ${n.slidePrevClass} ${n.slideDuplicateActiveClass} ${n.slideDuplicateNextClass} ${n.slideDuplicatePrevClass}`),a=o?e.$wrapperEl.find(`.${n.slideClass}[data-swiper-slide-index="${i}"]`):t.eq(i),a.addClass(n.slideActiveClass),n.loop&&(a.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${s}"]`).addClass(n.slideDuplicateActiveClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${s}"]`).addClass(n.slideDuplicateActiveClass));let l=a.nextAll(`.${n.slideClass}`).eq(0).addClass(n.slideNextClass);n.loop&&0===l.length&&(l=t.eq(0),l.addClass(n.slideNextClass));let c=a.prevAll(`.${n.slideClass}`).eq(0).addClass(n.slidePrevClass);n.loop&&0===c.length&&(c=t.eq(-1),c.addClass(n.slidePrevClass)),n.loop&&(l.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicateNextClass),c.hasClass(n.slideDuplicateClass)?r.children(`.${n.slideClass}:not(.${n.slideDuplicateClass})[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass):r.children(`.${n.slideClass}.${n.slideDuplicateClass}[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(n.slideDuplicatePrevClass)),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:r,snapGrid:i,params:s,activeIndex:o,realIndex:a,snapIndex:l}=t;let c,u=e;if(void 0===u){for(let e=0;e<r.length;e+=1)void 0!==r[e+1]?n>=r[e]&&n<r[e+1]-(r[e+1]-r[e])/2?u=e:n>=r[e]&&n<r[e+1]&&(u=e+1):n>=r[e]&&(u=e);s.normalizeSlideIndex&&(u<0||void 0===u)&&(u=0)}if(i.indexOf(n)>=0)c=i.indexOf(n);else{const e=Math.min(s.slidesPerGroupSkip,u);c=e+Math.floor((u-e)/s.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),u===o)return void(c!==l&&(t.snapIndex=c,t.emit("snapIndexChange")));const d=parseInt(t.slides.eq(u).attr("data-swiper-slide-index")||u,10);Object.assign(t,{snapIndex:c,realIndex:d,previousIndex:o,activeIndex:u}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),a!==d&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")},updateClickedSlide:function(e){const t=this,n=t.params,r=vA(e).closest(`.${n.slideClass}`)[0];let i,s=!1;if(r)for(let e=0;e<t.slides.length;e+=1)if(t.slides[e]===r){s=!0,i=e;break}if(!r||!s)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(vA(r).attr("data-swiper-slide-index"),10):t.clickedIndex=i,n.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}},PA={getTranslate:function(e=(this.isHorizontal()?"x":"y")){const{params:t,rtlTranslate:n,translate:r,$wrapperEl:i}=this;if(t.virtualTranslate)return n?-r:r;if(t.cssMode)return r;let s=function(e,t="x"){const n=uA();let r,i,s;const o=function(e){const t=uA();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map((e=>e.replace(",","."))).join(", ")),s=new n.WebKitCSSMatrix("none"===i?"":i)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),"x"===t&&(i=n.WebKitCSSMatrix?s.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(i=n.WebKitCSSMatrix?s.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0}(i[0],e);return n&&(s=-s),s||0},setTranslate:function(e,t){const n=this,{rtlTranslate:r,params:i,$wrapperEl:s,wrapperEl:o,progress:a}=n;let l,c=0,u=0;n.isHorizontal()?c=r?-e:e:u=e,i.roundLengths&&(c=Math.floor(c),u=Math.floor(u)),i.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-c:-u:i.virtualTranslate||s.transform(`translate3d(${c}px, ${u}px, 0px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?c:u;const d=n.maxTranslate()-n.minTranslate();l=0===d?0:(e-n.minTranslate())/d,l!==a&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e=0,t=this.params.speed,n=!0,r=!0,i){const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(u=r&&e>l?l:r&&e<c?c:e,s.updateProgress(u),o.cssMode){const e=s.isHorizontal();if(0===t)a[e?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return xA({swiper:s,targetPosition:-u,side:e?"left":"top"}),!0;a.scrollTo({[e?"left":"top"]:-u,behavior:"smooth"})}return!0}return 0===t?(s.setTransition(0),s.setTranslate(u),n&&(s.emit("beforeTransitionStart",t,i),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(u),n&&(s.emit("beforeTransitionStart",t,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}};function OA({swiper:e,runCallbacks:t,direction:n,step:r}){const{activeIndex:i,previousIndex:s}=e;let o=n;if(o||(o=i>s?"next":i<s?"prev":"reset"),e.emit(`transition${r}`),t&&i!==s){if("reset"===o)return void e.emit(`slideResetTransition${r}`);e.emit(`slideChangeTransition${r}`),"next"===o?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}const RA={slideTo:function(e=0,t=this.params.speed,n=!0,r,i){if("number"!=typeof e&&"string"!=typeof e)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const s=this;let o=e;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=s;if(s.animating&&a.preventInteractionOnTransition||!p&&!r&&!i)return!1;const m=Math.min(s.params.slidesPerGroupSkip,o);let g=m+Math.floor((o-m)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const y=-l[g];if(a.normalizeSlideIndex)for(let e=0;e<c.length;e+=1){const t=-Math.floor(100*y),n=Math.floor(100*c[e]),r=Math.floor(100*c[e+1]);void 0!==c[e+1]?t>=n&&t<r-(r-n)/2?o=e:t>=n&&t<r&&(o=e+1):t>=n&&(o=e)}if(s.initialized&&o!==d){if(!s.allowSlideNext&&y<s.translate&&y<s.minTranslate())return!1;if(!s.allowSlidePrev&&y>s.translate&&y>s.maxTranslate()&&(d||0)!==o)return!1}let v;if(o!==(u||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(y),v=o>d?"next":o<d?"prev":"reset",h&&-y===s.translate||!h&&y===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==a.effect&&s.setTranslate(y),"reset"!==v&&(s.transitionStart(n,v),s.transitionEnd(n,v)),!1;if(a.cssMode){const e=s.isHorizontal(),n=h?y:-y;if(0===t){const t=s.virtual&&s.params.virtual.enabled;t&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),f[e?"scrollLeft":"scrollTop"]=n,t&&requestAnimationFrame((()=>{s.wrapperEl.style.scrollSnapType="",s._swiperImmediateVirtual=!1}))}else{if(!s.support.smoothScroll)return xA({swiper:s,targetPosition:n,side:e?"left":"top"}),!0;f.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return s.setTransition(t),s.setTranslate(y),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,r),s.transitionStart(n,v),0===t?s.transitionEnd(n,v):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,v))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e=0,t=this.params.speed,n=!0,r){if("string"==typeof e){const t=parseInt(e,10);if(!isFinite(t))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=t}const i=this;let s=e;return i.params.loop&&(s+=i.loopedSlides),i.slideTo(s,t,n,r)},slideNext:function(e=this.params.speed,t=!0,n){const r=this,{animating:i,enabled:s,params:o}=r;if(!s)return r;let a=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<o.slidesPerGroupSkip?1:a;if(o.loop){if(i&&o.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return o.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+l,e,t,n)},slidePrev:function(e=this.params.speed,t=!0,n){const r=this,{params:i,animating:s,snapGrid:o,slidesGrid:a,rtlTranslate:l,enabled:c}=r;if(!c)return r;if(i.loop){if(s&&i.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const d=u(l?r.translate:-r.translate),h=o.map((e=>u(e)));let f=o[h.indexOf(d)-1];if(void 0===f&&i.cssMode){let e;o.forEach(((t,n)=>{d>=t&&(e=n)})),void 0!==e&&(f=o[e>0?e-1:e])}let p=0;if(void 0!==f&&(p=a.indexOf(f),p<0&&(p=r.activeIndex-1),"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(p=p-r.slidesPerViewDynamic("previous",!0)+1,p=Math.max(p,0))),i.rewind&&r.isBeginning){const i=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(i,e,t,n)}return r.slideTo(p,e,t,n)},slideReset:function(e=this.params.speed,t=!0,n){return this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e=this.params.speed,t=!0,n,r=.5){const i=this;let s=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[a]){const e=i.snapGrid[a];l-e>(i.snapGrid[a+1]-e)*r&&(s+=i.params.slidesPerGroup)}else{const e=i.snapGrid[a-1];l-e<=(i.snapGrid[a]-e)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,e,t,n)},slideToClickedSlide:function(){const e=this,{params:t,$wrapperEl:n}=e,r="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let i,s=e.clickedIndex;if(t.loop){if(e.animating)return;i=parseInt(vA(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-r/2||s>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),s=n.children(`.${t.slideClass}[data-swiper-slide-index="${i}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),wA((()=>{e.slideTo(s)}))):e.slideTo(s):s>e.slides.length-r?(e.loopFix(),s=n.children(`.${t.slideClass}[data-swiper-slide-index="${i}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),wA((()=>{e.slideTo(s)}))):e.slideTo(s)}else e.slideTo(s)}},LA={loopCreate:function(){const e=this,t=lA(),{params:n,$wrapperEl:r}=e,i=r.children().length>0?vA(r.children()[0].parentNode):r;i.children(`.${n.slideClass}.${n.slideDuplicateClass}`).remove();let s=i.children(`.${n.slideClass}`);if(n.loopFillGroupWithBlank){const e=n.slidesPerGroup-s.length%n.slidesPerGroup;if(e!==n.slidesPerGroup){for(let r=0;r<e;r+=1){const e=vA(t.createElement("div")).addClass(`${n.slideClass} ${n.slideBlankClass}`);i.append(e)}s=i.children(`.${n.slideClass}`)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=s.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>s.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=s.length);const o=[],a=[];s.each(((e,t)=>{vA(e).attr("data-swiper-slide-index",t)}));for(let t=0;t<e.loopedSlides;t+=1){const e=t-Math.floor(t/s.length)*s.length;a.push(s.eq(e)[0]),o.unshift(s.eq(s.length-e-1)[0])}for(let e=0;e<a.length;e+=1)i.append(vA(a[e].cloneNode(!0)).addClass(n.slideDuplicateClass));for(let e=o.length-1;e>=0;e-=1)i.prepend(vA(o[e].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:n,loopedSlides:r,allowSlidePrev:i,allowSlideNext:s,snapGrid:o,rtlTranslate:a}=e;let l;e.allowSlidePrev=!0,e.allowSlideNext=!0;const c=-o[t]-e.getTranslate();t<r?(l=n.length-3*r+t,l+=r,e.slideTo(l,0,!1,!0)&&0!==c&&e.setTranslate((a?-e.translate:e.translate)-c)):t>=n.length-r&&(l=-n.length+t+r,l+=r,e.slideTo(l,0,!1,!0)&&0!==c&&e.setTranslate((a?-e.translate:e.translate)-c)),e.allowSlidePrev=i,e.allowSlideNext=s,e.emit("loopFix")},loopDestroy:function(){const{$wrapperEl:e,params:t,slides:n}=this;e.children(`.${t.slideClass}.${t.slideDuplicateClass},.${t.slideClass}.${t.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}};function DA(e){const t=this,n=lA(),r=uA(),i=t.touchEventsData,{params:s,touches:o,enabled:a}=t;if(!a)return;if(t.animating&&s.preventInteractionOnTransition)return;!t.animating&&s.cssMode&&s.loop&&t.loopFix();let l=e;l.originalEvent&&(l=l.originalEvent);let c=vA(l.target);if("wrapper"===s.touchEventsTarget&&!c.closest(t.wrapperEl).length)return;if(i.isTouchEvent="touchstart"===l.type,!i.isTouchEvent&&"which"in l&&3===l.which)return;if(!i.isTouchEvent&&"button"in l&&l.button>0)return;if(i.isTouched&&i.isMoved)return;const u=!!s.noSwipingClass&&""!==s.noSwipingClass,d=e.composedPath?e.composedPath():e.path;u&&l.target&&l.target.shadowRoot&&d&&(c=vA(d[0]));const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!(!l.target||!l.target.shadowRoot);if(s.noSwiping&&(f?function(e,t=this){return function t(n){if(!n||n===lA()||n===uA())return null;n.assignedSlot&&(n=n.assignedSlot);const r=n.closest(e);return r||n.getRootNode?r||t(n.getRootNode().host):null}(t)}(h,c[0]):c.closest(h)[0]))return void(t.allowClick=!0);if(s.swipeHandler&&!c.closest(s.swipeHandler)[0])return;o.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,o.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;const p=o.currentX,m=o.currentY,g=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,y=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(g&&(p<=y||p>=r.innerWidth-y)){if("prevent"!==g)return;e.preventDefault()}if(Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=m,i.touchStartTime=bA(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1),"touchstart"!==l.type){let e=!0;c.is(i.focusableElements)&&(e=!1,"SELECT"===c[0].nodeName&&(i.isTouched=!1)),n.activeElement&&vA(n.activeElement).is(i.focusableElements)&&n.activeElement!==c[0]&&n.activeElement.blur();const r=e&&t.allowTouchMove&&s.touchStartPreventDefault;!s.touchStartForcePreventDefault&&!r||c[0].isContentEditable||l.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!s.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",l)}function MA(e){const t=lA(),n=this,r=n.touchEventsData,{params:i,touches:s,rtlTranslate:o,enabled:a}=n;if(!a)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched)return void(r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l));if(r.isTouchEvent&&"touchmove"!==l.type)return;const c="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),u="touchmove"===l.type?c.pageX:l.pageX,d="touchmove"===l.type?c.pageY:l.pageY;if(l.preventedByNestedSwiper)return s.startX=u,void(s.startY=d);if(!n.allowTouchMove)return vA(l.target).is(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(s,{startX:u,startY:d,currentX:u,currentY:d}),r.touchStartTime=bA()));if(r.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(n.isVertical()){if(d<s.startY&&n.translate<=n.maxTranslate()||d>s.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(u<s.startX&&n.translate<=n.maxTranslate()||u>s.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&vA(l.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=u,s.currentY=d;const h=s.currentX-s.startX,f=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(h**2+f**2)<n.params.threshold)return;if(void 0===r.isScrolling){let e;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:h*h+f*f>=25&&(e=180*Math.atan2(Math.abs(f),Math.abs(h))/Math.PI,r.isScrolling=n.isHorizontal()?e>i.touchAngle:90-e>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),void 0===r.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(r.startMoving=!0)),r.isScrolling)return void(r.isTouched=!1);if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation(),r.isMoved||(i.loop&&!i.cssMode&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!i.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)),n.emit("sliderMove",l),r.isMoved=!0;let p=n.isHorizontal()?h:f;s.diff=p,p*=i.touchRatio,o&&(p=-p),n.swipeDirection=p>0?"prev":"next",r.currentTranslate=p+r.startTranslate;let m=!0,g=i.resistanceRatio;if(i.touchReleaseOnEdges&&(g=0),p>0&&r.currentTranslate>n.minTranslate()?(m=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+p)**g)):p<0&&r.currentTranslate<n.maxTranslate()&&(m=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-p)**g)),m&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),i.threshold>0){if(!(Math.abs(p)>i.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,void(s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}i.followFinger&&!i.cssMode&&((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function FA(e){const t=this,n=t.touchEventsData,{params:r,touches:i,rtlTranslate:s,slidesGrid:o,enabled:a}=t;if(!a)return;let l=e;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const c=bA(),u=c-n.touchStartTime;if(t.allowClick){const e=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(e&&e[0]||l.target),t.emit("tap click",l),u<300&&c-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(n.lastClickTime=bA(),wA((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===i.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let d;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,d=r.followFinger?s?t.translate:-t.translate:-n.currentTranslate,r.cssMode)return;if(t.params.freeMode&&r.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:d});let h=0,f=t.slidesSizesGrid[0];for(let e=0;e<o.length;e+=e<r.slidesPerGroupSkip?1:r.slidesPerGroup){const t=e<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==o[e+t]?d>=o[e]&&d<o[e+t]&&(h=e,f=o[e+t]-o[e]):d>=o[e]&&(h=e,f=o[o.length-1]-o[o.length-2])}let p=null,m=null;r.rewind&&(t.isBeginning?m=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(p=0));const g=(d-o[h])/f,y=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(u>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(g>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?p:h+y):t.slideTo(h)),"prev"===t.swipeDirection&&(g>1-r.longSwipesRatio?t.slideTo(h+y):null!==m&&g<0&&Math.abs(g)>r.longSwipesRatio?t.slideTo(m):t.slideTo(h))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);!t.navigation||l.target!==t.navigation.nextEl&&l.target!==t.navigation.prevEl?("next"===t.swipeDirection&&t.slideTo(null!==p?p:h+y),"prev"===t.swipeDirection&&t.slideTo(null!==m?m:h)):l.target===t.navigation.nextEl?t.slideTo(h+y):t.slideTo(h)}}function jA(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=i,e.allowSlideNext=r,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function UA(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function VA(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:r}=e;if(!r)return;let i;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const s=e.maxTranslate()-e.minTranslate();i=0===s?0:(e.translate-e.minTranslate())/s,i!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let zA=!1;function qA(){}const BA=(e,t)=>{const n=lA(),{params:r,touchEvents:i,el:s,wrapperEl:o,device:a,support:l}=e,c=!!r.nested,u="on"===t?"addEventListener":"removeEventListener",d=t;if(l.touch){const t=!("touchstart"!==i.start||!l.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};s[u](i.start,e.onTouchStart,t),s[u](i.move,e.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),s[u](i.end,e.onTouchEnd,t),i.cancel&&s[u](i.cancel,e.onTouchEnd,t)}else s[u](i.start,e.onTouchStart,!1),n[u](i.move,e.onTouchMove,c),n[u](i.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&s[u]("click",e.onClick,!0),r.cssMode&&o[u]("scroll",e.onScroll),r.updateOnWindowResize?e[d](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",jA,!0):e[d]("observerUpdate",jA,!0)},GA={attachEvents:function(){const e=this,t=lA(),{params:n,support:r}=e;e.onTouchStart=DA.bind(e),e.onTouchMove=MA.bind(e),e.onTouchEnd=FA.bind(e),n.cssMode&&(e.onScroll=VA.bind(e)),e.onClick=UA.bind(e),r.touch&&!zA&&(t.addEventListener("touchstart",qA),zA=!0),BA(e,"on")},detachEvents:function(){BA(this,"off")}},$A=(e,t)=>e.grid&&t.grid&&t.grid.rows>1,WA={setBreakpoint:function(){const e=this,{activeIndex:t,initialized:n,loopedSlides:r=0,params:i,$el:s}=e,o=i.breakpoints;if(!o||o&&0===Object.keys(o).length)return;const a=e.getBreakpoint(o,e.params.breakpointsBase,e.el);if(!a||e.currentBreakpoint===a)return;const l=(a in o?o[a]:void 0)||e.originalParams,c=$A(e,i),u=$A(e,l),d=i.enabled;c&&!u?(s.removeClass(`${i.containerModifierClass}grid ${i.containerModifierClass}grid-column`),e.emitContainerClasses()):!c&&u&&(s.addClass(`${i.containerModifierClass}grid`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===i.grid.fill)&&s.addClass(`${i.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((t=>{const n=i[t]&&i[t].enabled,r=l[t]&&l[t].enabled;n&&!r&&e[t].disable(),!n&&r&&e[t].enable()}));const h=l.direction&&l.direction!==i.direction,f=i.loop&&(l.slidesPerView!==i.slidesPerView||h);h&&n&&e.changeDirection(),EA(e.params,l);const p=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),d&&!p?e.disable():!d&&p&&e.enable(),e.currentBreakpoint=a,e.emit("_beforeBreakpoint",l),f&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-r+e.loopedSlides,0,!1)),e.emit("breakpoint",l)},getBreakpoint:function(e,t="window",n){if(!e||"container"===t&&!n)return;let r=!1;const i=uA(),s="window"===t?i.innerHeight:n.clientHeight,o=Object.keys(e).map((e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:s*t,point:e}}return{value:e,point:e}}));o.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let e=0;e<o.length;e+=1){const{point:s,value:a}=o[e];"window"===t?i.matchMedia(`(min-width: ${a}px)`).matches&&(r=s):a<=n.clientWidth&&(r=s)}return r||"max"}},HA={addClasses:function(){const e=this,{classNames:t,params:n,rtl:r,$el:i,device:s,support:o}=e,a=function(e,t){const n=[];return e.forEach((e=>{"object"==typeof e?Object.keys(e).forEach((r=>{e[r]&&n.push(t+r)})):"string"==typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!o.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...a),i.addClass([...t].join(" ")),e.emitContainerClasses()},removeClasses:function(){const{$el:e,classNames:t}=this;e.removeClass(t.join(" ")),this.emitContainerClasses()}},KA={loadImage:function(e,t,n,r,i,s){const o=uA();let a;function l(){s&&s()}vA(e).parent("picture")[0]||e.complete&&i?l():t?(a=new o.Image,a.onload=l,a.onerror=l,r&&(a.sizes=r),n&&(a.srcset=n),t&&(a.src=t)):l()},preloadImages:function(){const e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(let n=0;n<e.imagesToLoad.length;n+=1){const r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}},QA={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function YA(e,t){return function(n={}){const r=Object.keys(n)[0],i=n[r];"object"==typeof i&&null!==i?(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===e[r]&&(e[r]={auto:!0}),r in e&&"enabled"in i?(!0===e[r]&&(e[r]={enabled:!0}),"object"!=typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),EA(t,n)):EA(t,n)):EA(t,n)}}const JA={eventsEmitter:NA,update:AA,translate:PA,transition:{setTransition:function(e,t){const n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e=!0,t){const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),OA({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e=!0,t){const n=this,{params:r}=n;n.animating=!1,r.cssMode||(n.setTransition(0),OA({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:RA,loop:LA,grabCursor:{setGrabCursor:function(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"},unsetGrabCursor:function(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:GA,breakpoints:WA,checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:r}=n;if(r){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*r;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:HA,images:KA},ZA={};class XA{constructor(...e){let t,n;if(1===e.length&&e[0].constructor&&"Object"===Object.prototype.toString.call(e[0]).slice(8,-1)?n=e[0]:[t,n]=e,n||(n={}),n=EA({},n),t&&!n.el&&(n.el=t),n.el&&vA(n.el).length>1){const e=[];return vA(n.el).each((t=>{const r=EA({},n,{el:t});e.push(new XA(r))})),e}const r=this;r.__swiper__=!0,r.support=CA(),r.device=function(e={}){return IA||(IA=function({userAgent:e}={}){const t=CA(),n=uA(),r=n.navigator.platform,i=e||n.navigator.userAgent,s={ios:!1,android:!1},o=n.screen.width,a=n.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let c=i.match(/(iPad).*OS\s([\d_]+)/);const u=i.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h="Win32"===r;let f="MacIntel"===r;return!c&&f&&t.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${o}x${a}`)>=0&&(c=i.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),f=!1),l&&!h&&(s.os="android",s.android=!0),(c||d||u)&&(s.os="ios",s.ios=!0),s}(e)),IA}({userAgent:n.userAgent}),r.browser=(TA||(TA=function(){const e=uA();return{isSafari:function(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),TA),r.eventsListeners={},r.eventsAnyListeners=[],r.modules=[...r.__modules__],n.modules&&Array.isArray(n.modules)&&r.modules.push(...n.modules);const i={};r.modules.forEach((e=>{e({swiper:r,extendParams:YA(n,i),on:r.on.bind(r),once:r.once.bind(r),off:r.off.bind(r),emit:r.emit.bind(r)})}));const s=EA({},QA,i);return r.params=EA({},s,ZA,n),r.originalParams=EA({},r.params),r.passedParams=EA({},n),r.params&&r.params.on&&Object.keys(r.params.on).forEach((e=>{r.on(e,r.params.on[e])})),r.params&&r.params.onAny&&r.onAny(r.params.onAny),r.$=vA,Object.assign(r,{enabled:r.params.enabled,el:t,classNames:[],slides:vA(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===r.params.direction,isVertical:()=>"vertical"===r.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev,touchEvents:function(){const e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return r.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},r.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},r.support.touch||!r.params.simulateTouch?r.touchEventsTouch:r.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:r.params.focusableElements,lastClickTime:bA(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:r.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),r.emit("_swiper"),r.params.init&&r.init(),r}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const r=n.minTranslate(),i=(n.maxTranslate()-r)*e+r;n.translateTo(i,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.each((n=>{const r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e="current",t=!1){const{params:n,slides:r,slidesGrid:i,slidesSizesGrid:s,size:o,activeIndex:a}=this;let l=1;if(n.centeredSlides){let e,t=r[a].swiperSlideSize;for(let n=a+1;n<r.length;n+=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>o&&(e=!0));for(let n=a-1;n>=0;n-=1)r[n]&&!e&&(t+=r[n].swiperSlideSize,l+=1,t>o&&(e=!0))}else if("current"===e)for(let e=a+1;e<r.length;e+=1)(t?i[e]+s[e]-i[a]<o:i[e]-i[a]<o)&&(l+=1);else for(let e=a-1;e>=0;e-=1)i[a]-i[e]<o&&(l+=1);return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function r(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let i;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):(i=("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),i||r()),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t=!0){const n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(`${n.params.containerModifierClass}${r}`).addClass(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.each((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.$el.addClass(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.$el.removeClass(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;const n=vA(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let i=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const t=vA(e.shadowRoot.querySelector(r()));return t.children=e=>n.children(e),t}return n.children?n.children(r()):vA(n).children(r())})();if(0===i.length&&t.params.createElements){const e=lA().createElement("div");i=vA(e),e.className=t.params.wrapperClass,n.append(e),n.children(`.${t.params.slideClass}`).each((e=>{i.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:i,wrapperEl:i[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===i.css("display")}),!0}init(e){const t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}destroy(e=!0,t=!0){const n=this,{params:r,$el:i,$wrapperEl:s,slides:o}=n;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),i.removeAttr("style"),s.removeAttr("style"),o&&o.length&&o.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((e=>{n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}(n)),n.destroyed=!0),null}static extendDefaults(e){EA(ZA,e)}static get extendedDefaults(){return ZA}static get defaults(){return QA}static installModule(e){XA.prototype.__modules__||(XA.prototype.__modules__=[]);const t=XA.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>XA.installModule(e))),XA):(XA.installModule(e),XA)}}Object.keys(JA).forEach((e=>{Object.keys(JA[e]).forEach((t=>{XA.prototype[t]=JA[e][t]}))})),XA.use([function({swiper:e,on:t,emit:n}){const r=uA();let i=null,s=null;const o=()=>{e&&!e.destroyed&&e.initialized&&(n("beforeResize"),n("resize"))},a=()=>{e&&!e.destroyed&&e.initialized&&n("orientationchange")};t("init",(()=>{e.params.resizeObserver&&void 0!==r.ResizeObserver?e&&!e.destroyed&&e.initialized&&(i=new ResizeObserver((t=>{s=r.requestAnimationFrame((()=>{const{width:n,height:r}=e;let i=n,s=r;t.forEach((({contentBoxSize:t,contentRect:n,target:r})=>{r&&r!==e.el||(i=n?n.width:(t[0]||t).inlineSize,s=n?n.height:(t[0]||t).blockSize)})),i===n&&s===r||o()}))})),i.observe(e.el)):(r.addEventListener("resize",o),r.addEventListener("orientationchange",a))})),t("destroy",(()=>{s&&r.cancelAnimationFrame(s),i&&i.unobserve&&e.el&&(i.unobserve(e.el),i=null),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",a)}))},function({swiper:e,extendParams:t,on:n,emit:r}){const i=[],s=uA(),o=(e,t={})=>{const n=new(s.MutationObserver||s.WebkitMutationObserver)((e=>{if(1===e.length)return void r("observerUpdate",e[0]);const t=function(){r("observerUpdate",e[0])};s.requestAnimationFrame?s.requestAnimationFrame(t):s.setTimeout(t,0)}));n.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),i.push(n)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",(()=>{if(e.params.observer){if(e.params.observeParents){const t=e.$el.parents();for(let e=0;e<t.length;e+=1)o(t[e])}o(e.$el[0],{childList:e.params.observeSlideChildren}),o(e.$wrapperEl[0],{attributes:!1})}})),n("destroy",(()=>{i.forEach((e=>{e.disconnect()})),i.splice(0,i.length)}))}]);const eP=XA;function tP({swiper:e,extendParams:t,on:n,emit:r}){function i(t){let n;return t&&(n=vA(t),e.params.uniqueNavElements&&"string"==typeof t&&n.length>1&&1===e.$el.find(t).length&&(n=e.$el.find(t))),n}function s(t,n){const r=e.params.navigation;t&&t.length>0&&(t[n?"addClass":"removeClass"](r.disabledClass),t[0]&&"BUTTON"===t[0].tagName&&(t[0].disabled=n),e.params.watchOverflow&&e.enabled&&t[e.isLocked?"addClass":"removeClass"](r.lockClass))}function o(){if(e.params.loop)return;const{$nextEl:t,$prevEl:n}=e.navigation;s(n,e.isBeginning&&!e.params.rewind),s(t,e.isEnd&&!e.params.rewind)}function a(t){t.preventDefault(),(!e.isBeginning||e.params.loop||e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function l(t){t.preventDefault(),(!e.isEnd||e.params.loop||e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function c(){const t=e.params.navigation;if(e.params.navigation=function(e,t,n,r){const i=lA();return e.params.createElements&&Object.keys(r).forEach((s=>{if(!n[s]&&!0===n.auto){let o=e.$el.children(`.${r[s]}`)[0];o||(o=i.createElement("div"),o.className=r[s],e.$el.append(o)),n[s]=o,t[s]=o}})),n}(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!t.nextEl&&!t.prevEl)return;const n=i(t.nextEl),r=i(t.prevEl);n&&n.length>0&&n.on("click",l),r&&r.length>0&&r.on("click",a),Object.assign(e.navigation,{$nextEl:n,nextEl:n&&n[0],$prevEl:r,prevEl:r&&r[0]}),e.enabled||(n&&n.addClass(t.lockClass),r&&r.addClass(t.lockClass))}function u(){const{$nextEl:t,$prevEl:n}=e.navigation;t&&t.length&&(t.off("click",l),t.removeClass(e.params.navigation.disabledClass)),n&&n.length&&(n.off("click",a),n.removeClass(e.params.navigation.disabledClass))}t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},n("init",(()=>{!1===e.params.navigation.enabled?d():(c(),o())})),n("toEdge fromEdge lock unlock",(()=>{o()})),n("destroy",(()=>{u()})),n("enable disable",(()=>{const{$nextEl:t,$prevEl:n}=e.navigation;t&&t[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),n&&n[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)})),n("click",((t,n)=>{const{$nextEl:i,$prevEl:s}=e.navigation,o=n.target;if(e.params.navigation.hideOnClick&&!vA(o).is(s)&&!vA(o).is(i)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===o||e.pagination.el.contains(o)))return;let t;i?t=i.hasClass(e.params.navigation.hiddenClass):s&&(t=s.hasClass(e.params.navigation.hiddenClass)),r(!0===t?"navigationShow":"navigationHide"),i&&i.toggleClass(e.params.navigation.hiddenClass),s&&s.toggleClass(e.params.navigation.hiddenClass)}}));const d=()=>{e.$el.addClass(e.params.navigation.navigationDisabledClass),u()};Object.assign(e.navigation,{enable:()=>{e.$el.removeClass(e.params.navigation.navigationDisabledClass),c(),o()},disable:d,update:o,init:c,destroy:u})}function nP(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function rP(e,t){const n=["__proto__","constructor","prototype"];Object.keys(t).filter((e=>n.indexOf(e)<0)).forEach((n=>{void 0===e[n]?e[n]=t[n]:nP(t[n])&&nP(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:rP(e[n],t[n]):e[n]=t[n]}))}function iP(e={}){return e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function sP(e={}){return e.pagination&&void 0===e.pagination.el}function oP(e={}){return e.scrollbar&&void 0===e.scrollbar.el}function aP(e=""){const t=e.split(" ").map((e=>e.trim())).filter((e=>!!e)),n=[];return t.forEach((e=>{n.indexOf(e)<0&&n.push(e)})),n.join(" ")}const lP=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"],cP=(e,t)=>{let n=t.slidesPerView;if(t.breakpoints){const e=eP.prototype.getBreakpoint(t.breakpoints),r=e in t.breakpoints?t.breakpoints[e]:void 0;r&&r.slidesPerView&&(n=r.slidesPerView)}let r=Math.ceil(parseFloat(t.loopedSlides||n,10));return r+=t.loopAdditionalSlides,r>e.length&&t.loopedSlidesLimit&&(r=e.length),r};function uP(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function dP(e){const t=[];return n.Children.toArray(e).forEach((e=>{uP(e)?t.push(e):e.props&&e.props.children&&dP(e.props.children).forEach((e=>t.push(e)))})),t}function hP(e){const t=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return n.Children.toArray(e).forEach((e=>{if(uP(e))t.push(e);else if(e.props&&e.props.slot&&r[e.props.slot])r[e.props.slot].push(e);else if(e.props&&e.props.children){const n=dP(e.props.children);n.length>0?n.forEach((e=>t.push(e))):r["container-end"].push(e)}else r["container-end"].push(e)})),{slides:t,slots:r}}function fP(e,t){return"undefined"==typeof window?(0,n.useEffect)(e,t):(0,n.useLayoutEffect)(e,t)}const pP=(0,n.createContext)(null),mP=(0,n.createContext)(null);function gP(){return gP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gP.apply(this,arguments)}const yP=(0,n.forwardRef)((function(e,t){let{className:r,tag:i="div",wrapperTag:s="div",children:o,onSwiper:a,...l}=void 0===e?{}:e,c=!1;const[u,d]=(0,n.useState)("swiper"),[h,f]=(0,n.useState)(null),[p,m]=(0,n.useState)(!1),g=(0,n.useRef)(!1),y=(0,n.useRef)(null),v=(0,n.useRef)(null),w=(0,n.useRef)(null),b=(0,n.useRef)(null),_=(0,n.useRef)(null),E=(0,n.useRef)(null),S=(0,n.useRef)(null),x=(0,n.useRef)(null),{params:k,passedParams:I,rest:T,events:C}=function(e={},t=!0){const n={on:{}},r={},i={};rP(n,eP.defaults),rP(n,eP.extendedDefaults),n._emitClasses=!0,n.init=!1;const s={},o=lP.map((e=>e.replace(/_/,""))),a=Object.assign({},e);return Object.keys(a).forEach((a=>{void 0!==e[a]&&(o.indexOf(a)>=0?nP(e[a])?(n[a]={},i[a]={},rP(n[a],e[a]),rP(i[a],e[a])):(n[a]=e[a],i[a]=e[a]):0===a.search(/on[A-Z]/)&&"function"==typeof e[a]?t?r[`${a[2].toLowerCase()}${a.substr(3)}`]=e[a]:n.on[`${a[2].toLowerCase()}${a.substr(3)}`]=e[a]:s[a]=e[a])})),["navigation","pagination","scrollbar"].forEach((e=>{!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:i,rest:s,events:r}}(l),{slides:N,slots:A}=hP(o),P=()=>{m(!p)};Object.assign(k.on,{_containerClasses(e,t){d(t)}});const O=()=>{if(Object.assign(k.on,C),c=!0,v.current=new eP(k),v.current.loopCreate=()=>{},v.current.loopDestroy=()=>{},k.loop&&(v.current.loopedSlides=cP(N,k)),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=N;const e={cache:!1,slides:N,renderExternal:f,renderExternalUpdate:!1};rP(v.current.params.virtual,e),rP(v.current.originalParams.virtual,e)}};return y.current||O(),v.current&&v.current.on("_beforeBreakpoint",P),(0,n.useEffect)((()=>()=>{v.current&&v.current.off("_beforeBreakpoint",P)})),(0,n.useEffect)((()=>{!g.current&&v.current&&(v.current.emitSlidesClasses(),g.current=!0)})),fP((()=>{if(t&&(t.current=y.current),y.current)return v.current.destroyed&&O(),function({el:e,nextEl:t,prevEl:n,paginationEl:r,scrollbarEl:i,swiper:s},o){iP(o)&&t&&n&&(s.params.navigation.nextEl=t,s.originalParams.navigation.nextEl=t,s.params.navigation.prevEl=n,s.originalParams.navigation.prevEl=n),sP(o)&&r&&(s.params.pagination.el=r,s.originalParams.pagination.el=r),oP(o)&&i&&(s.params.scrollbar.el=i,s.originalParams.scrollbar.el=i),s.init(e)}({el:y.current,nextEl:_.current,prevEl:E.current,paginationEl:S.current,scrollbarEl:x.current,swiper:v.current},k),a&&a(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}}),[]),fP((()=>{!c&&C&&v.current&&Object.keys(C).forEach((e=>{v.current.on(e,C[e])}));const e=function(e,t,n,r,i){const s=[];if(!t)return s;const o=e=>{s.indexOf(e)<0&&s.push(e)};if(n&&r){const e=r.map(i),t=n.map(i);e.join("")!==t.join("")&&o("children"),r.length!==n.length&&o("children")}return lP.filter((e=>"_"===e[0])).map((e=>e.replace(/_/,""))).forEach((n=>{if(n in e&&n in t)if(nP(e[n])&&nP(t[n])){const r=Object.keys(e[n]),i=Object.keys(t[n]);r.length!==i.length?o(n):(r.forEach((r=>{e[n][r]!==t[n][r]&&o(n)})),i.forEach((r=>{e[n][r]!==t[n][r]&&o(n)})))}else e[n]!==t[n]&&o(n)})),s}(I,w.current,N,b.current,(e=>e.key));return w.current=I,b.current=N,e.length&&v.current&&!v.current.destroyed&&function({swiper:e,slides:t,passedParams:n,changedParams:r,nextEl:i,prevEl:s,scrollbarEl:o,paginationEl:a}){const l=r.filter((e=>"children"!==e&&"direction"!==e)),{params:c,pagination:u,navigation:d,scrollbar:h,virtual:f,thumbs:p}=e;let m,g,y,v,w;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(m=!0),r.includes("controller")&&n.controller&&n.controller.control&&c.controller&&!c.controller.control&&(g=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||a)&&(c.pagination||!1===c.pagination)&&u&&!u.el&&(y=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||o)&&(c.scrollbar||!1===c.scrollbar)&&h&&!h.el&&(v=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||s)&&(n.navigation.nextEl||i)&&(c.navigation||!1===c.navigation)&&d&&!d.prevEl&&!d.nextEl&&(w=!0),l.forEach((t=>{if(nP(c[t])&&nP(n[t]))rP(c[t],n[t]);else{const i=n[t];!0!==i&&!1!==i||"navigation"!==t&&"pagination"!==t&&"scrollbar"!==t?c[t]=n[t]:!1===i&&e[r=t]&&(e[r].destroy(),"navigation"===r?(c[r].prevEl=void 0,c[r].nextEl=void 0,e[r].prevEl=void 0,e[r].nextEl=void 0):(c[r].el=void 0,e[r].el=void 0))}var r})),l.includes("controller")&&!g&&e.controller&&e.controller.control&&c.controller&&c.controller.control&&(e.controller.control=c.controller.control),r.includes("children")&&t&&f&&c.virtual.enabled?(f.slides=t,f.update(!0)):r.includes("children")&&e.lazy&&e.params.lazy.enabled&&e.lazy.load(),m&&p.init()&&p.update(!0),g&&(e.controller.control=c.controller.control),y&&(a&&(c.pagination.el=a),u.init(),u.render(),u.update()),v&&(o&&(c.scrollbar.el=o),h.init(),h.updateSize(),h.setTranslate()),w&&(i&&(c.navigation.nextEl=i),s&&(c.navigation.prevEl=s),d.init(),d.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&e.changeDirection(n.direction,!1),e.update()}({swiper:v.current,slides:N,passedParams:I,changedParams:e,nextEl:_.current,prevEl:E.current,scrollbarEl:x.current,paginationEl:S.current}),()=>{C&&v.current&&Object.keys(C).forEach((e=>{v.current.off(e,C[e])}))}})),fP((()=>{var e;!(e=v.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[h]),n.createElement(i,gP({ref:y,className:aP(`${u}${r?` ${r}`:""}`)},T),n.createElement(mP.Provider,{value:v.current},A["container-start"],n.createElement(s,{className:"swiper-wrapper"},A["wrapper-start"],k.virtual?function(e,t,r){if(!r)return null;const i=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${r.offset}px`}:{top:`${r.offset}px`};return t.filter(((e,t)=>t>=r.from&&t<=r.to)).map((t=>n.cloneElement(t,{swiper:e,style:i})))}(v.current,N,h):!k.loop||v.current&&v.current.destroyed?N.map((e=>n.cloneElement(e,{swiper:v.current}))):function(e,t,r){const i=t.map(((t,r)=>n.cloneElement(t,{swiper:e,"data-swiper-slide-index":r})));function s(e,t,i){return n.cloneElement(e,{key:`${e.key}-duplicate-${t}-${i}`,className:`${e.props.className||""} ${r.slideDuplicateClass}`})}if(r.loopFillGroupWithBlank){const e=r.slidesPerGroup-i.length%r.slidesPerGroup;if(e!==r.slidesPerGroup)for(let t=0;t<e;t+=1){const e=n.createElement("div",{className:`${r.slideClass} ${r.slideBlankClass}`});i.push(e)}}"auto"!==r.slidesPerView||r.loopedSlides||(r.loopedSlides=i.length);const o=cP(i,r),a=[],l=[];for(let e=0;e<o;e+=1){const t=e-Math.floor(e/i.length)*i.length;l.push(s(i[t],e,"append")),a.unshift(s(i[i.length-t-1],e,"prepend"))}return e&&(e.loopedSlides=o),[...a,...i,...l]}(v.current,N,k),A["wrapper-end"]),iP(k)&&n.createElement(n.Fragment,null,n.createElement("div",{ref:E,className:"swiper-button-prev"}),n.createElement("div",{ref:_,className:"swiper-button-next"})),oP(k)&&n.createElement("div",{ref:x,className:"swiper-scrollbar"}),sP(k)&&n.createElement("div",{ref:S,className:"swiper-pagination"}),A["container-end"]))}));function vP(){return vP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vP.apply(this,arguments)}yP.displayName="Swiper";const wP=(0,n.forwardRef)((function(e,t){let{tag:r="div",children:i,className:s="",swiper:o,zoom:a,virtualIndex:l,...c}=void 0===e?{}:e;const u=(0,n.useRef)(null),[d,h]=(0,n.useState)("swiper-slide");function f(e,t,n){t===u.current&&h(n)}fP((()=>{if(t&&(t.current=u.current),u.current&&o){if(!o.destroyed)return o.on("_slideClass",f),()=>{o&&o.off("_slideClass",f)};"swiper-slide"!==d&&h("swiper-slide")}})),fP((()=>{o&&u.current&&!o.destroyed&&h(o.getSlideClasses(u.current))}),[o]);const p={isActive:d.indexOf("swiper-slide-active")>=0||d.indexOf("swiper-slide-duplicate-active")>=0,isVisible:d.indexOf("swiper-slide-visible")>=0,isDuplicate:d.indexOf("swiper-slide-duplicate")>=0,isPrev:d.indexOf("swiper-slide-prev")>=0||d.indexOf("swiper-slide-duplicate-prev")>=0,isNext:d.indexOf("swiper-slide-next")>=0||d.indexOf("swiper-slide-duplicate-next")>=0},m=()=>"function"==typeof i?i(p):i;return n.createElement(r,vP({ref:u,className:aP(`${d}${s?` ${s}`:""}`),"data-swiper-slide-index":l},c),n.createElement(pP.Provider,{value:p},a?n.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof a?a:void 0},m()):m()))}));wP.displayName="SwiperSlide";const bP=i.p+"images/added-to-bag.png",_P=i.p+"images/faved.png",EP=i.p+"images/menu.png",SP=i.p+"images/slide.png",xP=i.p+"images/sale-tag.png",kP=i.p+"images/checked.png";var IP=i(5147),TP={};TP.styleTagTransform=ke(),TP.setAttributes=_e(),TP.insert=we().bind(null,"head"),TP.domAPI=ye(),TP.insertStyleElement=Se(),me()(IP.Z,TP),IP.Z&&IP.Z.locals&&IP.Z.locals;var CP=i(8035),NP={};function AP(e){return AP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AP(e)}function PP(){PP=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==AP(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),l(v,a,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function OP(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function RP(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){OP(s,r,i,o,a,"next",e)}function a(e){OP(s,r,i,o,a,"throw",e)}o(void 0)}))}}function LP(e){return function(e){if(Array.isArray(e))return FP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||MP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||MP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MP(e,t){if(e){if("string"==typeof e)return FP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FP(e,t):void 0}}function FP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}NP.styleTagTransform=ke(),NP.setAttributes=_e(),NP.insert=we().bind(null,"head"),NP.domAPI=ye(),NP.insertStyleElement=Se(),me()(CP.Z,NP),CP.Z&&CP.Z.locals&&CP.Z.locals,eP.use([tP]);const jP=function(){var e=JC().currentUser,t=mN(),r=t.products,i=t.setProducts,s=t.addToCart,o=t.addToFavs,a=t.cart,l=t.favorites,c=t.checkCarted,u=t.checkFaved,d=t.productCheck,h=DP((0,n.useState)(!1),2),f=h[0],p=h[1],m=(0,n.useRef)(null),g=DP((0,n.useState)(!1),2),y=g[0],v=g[1],w=K();(0,n.useEffect)((function(){c(a,r),localStorage.setItem("productsInCart",JSON.stringify(a))}),[a]),(0,n.useEffect)((function(){u(l,r),localStorage.setItem("productsInFavs",JSON.stringify(l))}),[l]),(0,n.useEffect)((function(){var e=document.querySelector(".search-input").value;function t(){window.innerWidth>=767?v(!0):v(!1)}return S(e),t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]);var b=DP((0,n.useState)([]),2),_=b[0],E=b[1],S=function(e){var t=oN.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}));0===t.length?p(!0):p(!1),E(t)};(0,n.useEffect)((function(){U(_)}),[_]);var x=DP((0,n.useState)("highest price"),2),k=x[0],I=x[1],T=function(e){"highest price"===k?C(e):N(e)},C=function(e){var t=e.sort((function(e,t){var n=void 0!==e.salePrice?e.salePrice:e.price;return(void 0!==t.salePrice?t.salePrice:t.price)-n}));i(d(a,l,t)),I("highest price")},N=function(e){var t=e.sort((function(e,t){return(void 0!==e.salePrice?e.salePrice:e.price)-(void 0!==t.salePrice?t.salePrice:t.price)}));i(d(a,l,t)),I("lowest price")},A=DP((0,n.useState)(!1),2),P=A[0],O=A[1],R=DP((0,n.useState)(!0),2),L=R[0],D=R[1],M=DP((0,n.useState)(!0),2),F=M[0],j=M[1],U=function(e){if(F)i(d(a,l,LP(e))),T(LP(e));else{var t=e.filter((function(e){return void 0===e.secondHand||!1===e.secondHand}));i(d(a,l,LP(t))),T(LP(t))}};(0,n.useEffect)((function(){U(_)}),[F]);var V=DP((0,n.useState)(!1),2),z=V[0],q=V[1],B=function(){e?q(!z):w("/signin")};z?document.body.classList.add("active-popup"):document.body.classList.remove("active-popup");var G=DP((0,n.useState)(""),2),$=G[0],W=G[1],H=DP((0,n.useState)(!1),2),Q=H[0],Y=H[1],J=DP((0,n.useState)(null),2),Z=J[0],X=J[1],ee=DP((0,n.useState)(!1),2),te=ee[0],ne=ee[1],re=(0,n.useRef)(!1),ie=(0,n.useRef)(!1);function se(){return(se=RP(PP().mark((function e(t){var n,s,o,c;return PP().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=re.current.value.trim(),s=ie.current.value.trim(),document.getElementsByClassName("img-input")[0],o=Z,""===n||""===s||null===Z)W("all fields are required");else try{Y(!0),c={title:n,price:s,img:o,id:Math.random(),secondHand:!0},console.log(c),i(d(a,l,[].concat(LP(r),[c]))),setTimeout((function(){q(!1),ne(!1)}),1e3),Y(!1),ne(!0),W("")}catch(e){Y(!1),W("Failed1")}case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=function(){var e=RP(PP().mark((function e(t){var n;return PP().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FileReader).readAsDataURL(t),e.next=4,function(){var e=n.result;X(e)};case 4:n.onload=e.sent,n.onerror=function(){W("error uploading the product, please try again")};case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.createElement("section",null,n.createElement("div",{className:"our-products-section section"},n.createElement("span",{className:"section-title"},"our products"),n.createElement("div",{className:"filter-tools row col-12 justify-content-between align-items-center section-container my-2 mx-auto"},n.createElement("div",{className:"col-xl-3 col-md-6 col-sm-6 mt-2 p-0"},n.createElement("div",{className:"filter-option search-input-container d-flex align-items-center justify-content-start"},n.createElement("input",{className:"search-input",onChange:function(e){S(e.currentTarget.value.toLowerCase(),r)},placeholder:"Search...",type:"text"}),n.createElement("img",{className:"search-icon",src:CN,alt:"search icon"}))),n.createElement("div",{className:"filter-option justify-content-end mt-2 p-0 col-xl-3 col-md-6 col-sm-6 btn-group sort-group"},n.createElement("button",{type:"button",className:"sort-btn dropdown-toggle text-capitalize font-weight-bold","data-toggle":"dropdown","aria-expanded":"false"},"sort by: ",n.createElement("span",{className:"text-capitalize font-weight-normal"},k)),n.createElement("div",{className:"dropdown-menu"},n.createElement("button",{onClick:function(){return N(r)},className:"dropdown-item text-capitalize ".concat("lowest price"===k?"active-sort-btn":""),href:"#"},"lowest price"),n.createElement("button",{onClick:function(){return C(r)},className:"dropdown-item text-capitalize ".concat("highest price"===k?"active-sort-btn":""),href:"#"},"highest price"))),n.createElement("div",{className:"filter-option filter-show p-0 mt-2 col-xl-3 col-md-6 col-sm-6 justify-content-center show-option d-flex align-items-center"},n.createElement("span",{className:"text-capitalize font-weight-bold mr-1"},"show:"),n.createElement("button",{onClick:function(){P||(D(!1),O(!0))},className:"show-btn d-flex justify-content-center align-items-center mr-2"},n.createElement("img",{src:EP,className:P?"active-show-btn":"",alt:"menu"})),n.createElement("button",{onClick:function(){L||(D(!0),O(!1))},className:"show-btn d-flex justify-content-center align-items-center"},n.createElement("img",{src:SP,className:L?"active-show-btn":"",alt:"slide"}))),n.createElement("div",{className:"filter-option second-hand-check p-0 mt-2 col-xl-3 col-md-6 col-sm-6 d-flex align-items-center justify-content-end ml-15"},n.createElement("input",{type:"checkbox",checked:F,onChange:function(){j(!F),U(r,!F)}}),n.createElement("label",{className:"m-0 ml-2"},"Second-Hand products"))),n.createElement("div",{className:f?"d-block justify-content-center text-center empty-msg":"d-none text-center"},"no matching search, try something else..."),L?n.createElement(yP,{className:"products-container d-flex col-12 justify-content-between",ref:m,navigation:!0,slidesPerView:y?3:1},n.createElement("div",{className:"section-container"},r.map((function(e){return n.createElement(wP,{className:"product-item col-md-4 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return o(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))})))):n.createElement("div",{className:"section-container"},n.createElement("div",{className:"d-flex row m-0 p-0"},r.map((function(e){return n.createElement("div",{className:"product-item col-md-4 col-sm-6 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return o(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))})))),n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("button",{onClick:B,className:"sell-btn"},"+ Sell Your Used Products")),z&&n.createElement("div",{className:"popup"},n.createElement("div",{className:"overlay"},n.createElement("div",{className:"popup-content"},n.createElement("form",null,n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"productTitle",className:"text-capitalize"},"product title:"),n.createElement("input",{ref:re,type:"text",className:"form-control",id:"productTitle"})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"productPrice",className:"text-capitalize"},"product price:"),n.createElement("div",{className:"d-flex align-items-center"},n.createElement("span",{className:"mr-1"},"EGP"),n.createElement("input",{ref:ie,type:"number",className:"form-control",id:"productPrice"}))),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"exampleFormControlFile1",className:"text-capitalize"},"product image:"),n.createElement("input",{onChange:function(e){!function(e){var t=e.target.files,n=t[0],r=document.getElementsByClassName("img-input")[0];t&&0!==t.length?-1===["image/jpeg","image/png"].indexOf(n.type)?(W("image type must be (png/jpg)"),r.value=""):n.size>2097152?(W("image size must be smaller than 2MB"),r.value=""):(oe(n),W("")):W("Please select an image to upload")}(e)},type:"file",className:"img-input form-control-file",id:"exampleFormControlFile1",accept:"image/png, image/jpeg"}),n.createElement("small",{className:"text-secondary"},"preferred 1:1 ratio image")),n.createElement("p",{className:"text-danger"},$),n.createElement("button",{onClick:function(e){!function(e){se.apply(this,arguments)}(e)},disabled:Q,type:"submit",className:"btn-submit"},"Submit")),n.createElement("button",{onClick:B,className:"close-popup"},"X")),n.createElement("div",{className:te?"submitted":"not-submitted"},n.createElement("img",{className:"check-img",src:kP}))))))};var UP=i(3439),VP={};VP.styleTagTransform=ke(),VP.setAttributes=_e(),VP.insert=we().bind(null,"head"),VP.domAPI=ye(),VP.insertStyleElement=Se(),me()(UP.Z,VP),UP.Z&&UP.Z.locals&&UP.Z.locals;const zP=i.p+"images/new-collection.jpg",qP=i.p+"images/hoodies.jpg",BP=i.p+"images/sportswear.jpg",GP=function(){return n.createElement("div",{className:"hot-section"},n.createElement("div",{className:"container"},n.createElement("h3",{className:"font-weight-bold text-uppercase col"},"what's hot"),n.createElement("div",{className:"col-12 row m-0 p-0 d-flex"},n.createElement("div",{className:"hot-item col-md-4"},n.createElement("img",{className:"w-100 hot-img",src:BP}),n.createElement("button",{className:"hot-btn"},"sportswear")),n.createElement("div",{className:"hot-item col-md-4"},n.createElement("img",{className:"w-100 hot-img",src:zP}),n.createElement("button",{className:"hot-btn"},"new collection")),n.createElement("div",{className:"hot-item col-md-4"},n.createElement("img",{className:"w-100 hot-img",src:qP}),n.createElement("button",{className:"hot-btn"},"hoodies")))))};var $P=[{country:"Egypt",city:"Cairo",latitude:30.0444,longitude:31.2357,id:"1"},{country:"Egypt",city:"Alexandria",latitude:31.2001,longitude:29.9187,id:"2"},{country:"Canada",city:"Toronto",latitude:43.6532,longitude:79.3832,id:"3"},{country:"Los Angeles",city:"USA",latitude:34.0522,longitude:118.2437,id:"4"},{country:"USA",city:"New York City",latitude:40.7128,longitude:4.006,id:"5"},{country:"UK",city:"London",latitude:51.5074,longitude:.1278,id:"6"},{country:"UK",city:"Manchester",latitude:53.4808,longitude:2.2426,id:"7"},{country:"Germany",city:"Berlin",latitude:52.52,longitude:13.405,id:"8"},{country:"Belgium",city:"Brussels",latitude:50.8503,longitude:4.3517,id:"9"},{country:"Netherlands",city:"Amsterdam",latitude:52.3667,longitude:4.8945,id:"10"},{country:"France",city:"Paris",latitude:48.8566,longitude:2.3522,id:"11"},{country:"India",city:"New Delhi",latitude:28.6139,longitude:77.209,id:"12"},{country:"India",city:"Mumbai",latitude:19.076,longitude:72.8777,id:"13"},{country:"Poland",city:"Warsaw",latitude:52.2297,longitude:21.0122,id:"14"}];const WP=i.p+"images/outlet.jpg";var HP=i(1953),KP={};function QP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return YP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YP(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}KP.styleTagTransform=ke(),KP.setAttributes=_e(),KP.insert=we().bind(null,"head"),KP.domAPI=ye(),KP.insertStyleElement=Se(),me()(HP.Z,KP),HP.Z&&HP.Z.locals&&HP.Z.locals;const JP=function(){var e=QP((0,n.useState)(),2),t=e[0],r=e[1],i=QP((0,n.useState)(),2),s=i[0],o=i[1],a=QP((0,n.useState)(null),2),l=a[0],c=a[1];return n.createElement("div",{className:"our-outlet-section section"},n.createElement("div",{className:"container"},n.createElement("div",{className:"row col-12 d-flex justify-content-between align-items-center m-0 p-0"},n.createElement("div",{className:"col-md-7 justify-content-center"},n.createElement("img",{className:"w-100",src:WP})),n.createElement("div",{className:"col-md-5 justify-content-center"},n.createElement("div",{className:"our-outlet-info"},n.createElement("h2",{className:"text-uppercase font-weight-bold"},"our outlet"),n.createElement("p",{className:"text-uppercase font-weight-lighter"},n.createElement("span",{className:"font-weight-bold"},'"drippy"')," is proud to announce its officially found its home on august 25th 2000 we opened our first flagship store in cairo, egypt and now open daily from 11am-7pm. this store is something you need to see in person featuring a new modern, sleek, and seamless style and yet still encompasses the brand's distinct comedic language"),n.createElement("button",{onClick:function(){return function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){r(e.coords.latitude),o(e.coords.longitude)}),(function(e){console.error(e)})):console.error("Geolocation is not supported by this browser.");var n=$P.map((function(n){var r=n.latitude,i=n.longitude,s=e,o=t,a=(s-r)*Math.PI/180,l=(o-i)*Math.PI/180,c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return{address:n,distance:2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))*6371}})),i=n.reduce((function(e,t){return t.distance<e.distance?t:e}));c(i)}(t,s)},className:"text-uppercase"},"find the closest outlet →"),l?n.createElement("p",{className:"text-uppercase"},"your closest outlet to you is at ",n.createElement("span",{className:"text-white font-weight-bold"},l.address.city,", ",l.address.country)):"")))))};var ZP=i(8585),XP={};XP.styleTagTransform=ke(),XP.setAttributes=_e(),XP.insert=we().bind(null,"head"),XP.domAPI=ye(),XP.insertStyleElement=Se(),me()(ZP.Z,XP),ZP.Z&&ZP.Z.locals&&ZP.Z.locals;const eO=i.p+"images/air-jordans.png",tO=i.p+"images/download-app.png",nO=i.p+"images/share.png",rO=i.p+"images/first-operation.png",iO=i.p+"images/done.png",sO=i.p+"images/instagram.png",oO=function(){return n.createElement("section",{className:"giveaway-section"},n.createElement("div",{className:"container"},n.createElement("h6",{className:"section-title"},"air-jordans giveaway"),n.createElement("p",{className:"mx-auto text-center text-uppercase section-info"},"wanna get an air-jordans for free?"),n.createElement("div",{className:"justify-content-center align-items-center row col-12 p-0 m-0"},n.createElement("div",{className:"col-md-3"},n.createElement("div",{className:"row m-0 p-0 justify-content-center"},n.createElement("div",{className:"justify-content-center giveaway-item"},n.createElement("img",{className:"download-app-icon giveaway-icon mx-auto d-block",src:tO}),n.createElement("p",{className:"text-center"},"download our app and get our best offers"))),n.createElement("div",{className:"row m-0 p-0 justify-content-center"},n.createElement("div",{className:"justify-content-center giveaway-item"},n.createElement("img",{className:"download-app-icon giveaway-icon mx-auto d-block",src:nO}),n.createElement("p",{className:"text-center"},"share with friends")))),n.createElement("div",{className:"col-md-6"},n.createElement("img",{className:"air-jordans",src:eO})),n.createElement("div",{className:"col-md-3"},n.createElement("div",{className:"row m-0 p-0 justify-content-center"},n.createElement("div",{className:"justify-content-center giveaway-item"},n.createElement("img",{className:"download-app-icon giveaway-icon mx-auto d-block",src:rO}),n.createElement("p",{className:"text-center"},"make your first order"))),n.createElement("div",{className:"row m-0 p-0 justify-content-center"},n.createElement("div",{className:"justify-content-center giveaway-item"},n.createElement("img",{className:"download-app-icon giveaway-icon mx-auto d-block",src:sO}),n.createElement("p",{className:"text-center"},"tag us on instagram")))),n.createElement("div",{className:"col-md-3"},n.createElement("div",{className:"row m-0 p-0 justify-content-center"},n.createElement("div",{className:"justify-content-center giveaway-item"},n.createElement("img",{className:"download-app-icon giveaway-icon mx-auto d-block",src:iO}),n.createElement("p",{className:"text-center"},"we are done successfully"))))),n.createElement("button",{className:"text-uppercase btn-start-now"},"start now")))};var aO=i(3507),lO={};lO.styleTagTransform=ke(),lO.setAttributes=_e(),lO.insert=we().bind(null,"head"),lO.domAPI=ye(),lO.insertStyleElement=Se(),me()(aO.Z,lO),aO.Z&&aO.Z.locals&&aO.Z.locals;const cO=i.p+"images/photo.jpg",uO=i.p+"images/playstore.png",dO=i.p+"images/download.png",hO=i.p+"images/location-pin.png",fO=i.p+"images/location-pin-btn.png";function pO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mO(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const gO=function(){var e=pO((0,n.useState)(),2),t=e[0],r=e[1],i=pO((0,n.useState)(),2),s=i[0],o=i[1],a=pO((0,n.useState)(null),2),l=a[0],c=a[1];return n.createElement("div",{className:"reach-section section"},n.createElement("div",{className:"container"},n.createElement("div",{className:"row col-12 p-0 m-0 align-items-center"},n.createElement("div",{className:"reach-content col-md-7"},n.createElement("div",{className:""},n.createElement("h2",{className:"font-weight-bold"},"reach us"),n.createElement("p",{className:"font-weight-lighter"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus viverra turpis sed enim hendrerit, a eleifend enim auctor.")),n.createElement("div",{className:"row p-0 m-0"},n.createElement("div",{className:"col-sm-6 pl-0 pt-2"},n.createElement("img",{className:"reach-icon",src:hO}),n.createElement("h4",{className:"font-weight-bold"},"outlet"),n.createElement("p",{className:"font-weight-lighter"},"check ",n.createElement(de,{className:"text-underline text-primary",to:"/addresses"},"our addresses from here")," or you can find the closest outlet to you"),n.createElement("button",{onClick:function(){return function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){r(e.coords.latitude),o(e.coords.longitude)}),(function(e){console.error(e)})):console.error("Geolocation is not supported by this browser.");var n=$P.map((function(n){var r=n.latitude,i=n.longitude,s=e,o=t,a=(s-r)*Math.PI/180,l=(o-i)*Math.PI/180,c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return{address:n,distance:2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))*6371}})),i=n.reduce((function(e,t){return t.distance<e.distance?t:e}));c(i)}(t,s)},className:"reach-btn d-flex align-items-center"},n.createElement("img",{className:"mr-1",src:fO}),n.createElement("span",null,"find now")),l?n.createElement("p",null,"your closest outlet to you is at ",n.createElement("span",{className:"text-white font-weight-bold"},l.address.city,", ",l.address.country)):""),n.createElement("div",{className:"col-sm-6 pl-0 pt-2"},n.createElement("img",{className:"reach-icon",src:dO}),n.createElement("h4",{className:"font-weight-bold"},"download app"),n.createElement("p",{className:"font-weight-lighter"},"download our app and get our best offers"),n.createElement("button",{className:"reach-btn d-flex align-items-center"},n.createElement("img",{className:"mr-1",src:uO}),n.createElement("span",null,"download now"))))),n.createElement("div",{className:"reach-img d-flex col-md-5"},n.createElement("img",{className:"photo w-100",src:cO})))))};var yO=i(3943),vO={};vO.styleTagTransform=ke(),vO.setAttributes=_e(),vO.insert=we().bind(null,"head"),vO.domAPI=ye(),vO.insertStyleElement=Se(),me()(yO.Z,vO),yO.Z&&yO.Z.locals&&yO.Z.locals;const wO=i.p+"images/worldwide.svg",bO=i.p+"images/fashion-trends.svg",_O=i.p+"images/discount.svg",EO=function(){return n.createElement("div",{className:"why-us-section"},n.createElement("p",{className:"section-title"},"why us?"),n.createElement("div",{className:"container"},n.createElement("div",{className:"col-12 row p-0 m-0 align-items-center justify-content-center"},n.createElement("div",{className:"why-us-card col-md-4 col-12 justify-content-center"},n.createElement("img",{className:"w-100",src:bO}),n.createElement("h5",{className:"font-weight-bold text-uppercase text-center mt-2"},"fashion trends"),n.createElement("p",{className:"text-center"},"up-to-date fashion trends")),n.createElement("div",{className:"why-us-card col-md-4 col-12 justify-content-center"},n.createElement("img",{className:"w-100",src:wO}),n.createElement("h5",{className:"font-weight-bold text-uppercase text-center mt-2"},"worldwide shipping"),n.createElement("p",{className:"text-center"},"we will catch you wherever you are ")),n.createElement("div",{className:"why-us-card col-md-4 col-12 justify-content-center"},n.createElement("img",{className:"w-100",src:_O}),n.createElement("h5",{className:"font-weight-bold text-uppercase text-center mt-2"},"our discounts"),n.createElement("p",{className:"text-center"},"your pocket is in safe hands")))))},SO=function(){return(0,n.useEffect)((function(){window.scrollTo(0,0)}),[]),n.createElement("div",null,n.createElement(JN,null),n.createElement(eA,null),n.createElement(jP,null),n.createElement(GP,null),n.createElement(EO,null),n.createElement(JP,null),n.createElement(gO,null),n.createElement(oO,null))};var xO=i(3090),kO={};kO.styleTagTransform=ke(),kO.setAttributes=_e(),kO.insert=we().bind(null,"head"),kO.domAPI=ye(),kO.insertStyleElement=Se(),me()(xO.Z,kO),xO.Z&&xO.Z.locals&&xO.Z.locals;const IO=i.p+"images/google.png";function TO(e){return TO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TO(e)}function CO(){CO=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==TO(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),l(v,a,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function NO(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function AO(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){NO(s,r,i,o,a,"next",e)}function a(e){NO(s,r,i,o,a,"throw",e)}o(void 0)}))}}function PO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return OO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OO(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var RO=/^(?:[a-zA-Z]{3,})(?:[a-zA-Z\s]+)?$/,LO=/\.(com|edu|gov|net|org)$/i,DO=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+$/,MO=/^([/s\S]){8,24}$/;const FO=function(){(0,n.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=JC(),t=e.signup,r=e.SignInWithGoogle,i=PO((0,n.useState)(""),2),s=(i[0],i[1]),o=PO((0,n.useState)(!1),2),a=o[0],l=o[1],c=K();function u(){return(u=AO(CO().mark((function e(){return CO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(""),l(!0),e.next=5,t(f,E,P);case 5:oe(!0),setTimeout((function(){c("/signin")}),1e3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(!1),s("Failed to Create an acccount");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function d(){return(d=AO(CO().mark((function e(){return CO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(""),l(!0),e.next=5,r();case 5:oe(!0),setTimeout((function(){c("/")}),1e3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(!1),s("Failed to Create an acccount");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var h=PO((0,n.useState)(""),2),f=h[0],p=h[1],m=PO((0,n.useState)(!1),2),g=m[0],y=m[1],v=PO((0,n.useState)(!1),2),w=v[0],b=v[1],_=PO((0,n.useState)(""),2),E=_[0],S=_[1],x=PO((0,n.useState)(!1),2),k=x[0],I=x[1],T=PO((0,n.useState)(!1),2),C=T[0],N=T[1],A=PO((0,n.useState)(""),2),P=A[0],O=A[1],R=PO((0,n.useState)(!1),2),L=R[0],D=R[1],M=PO((0,n.useState)(!1),2),F=M[0],j=M[1],U=PO((0,n.useState)(""),2),V=U[0],z=U[1],q=PO((0,n.useState)(!1),2),B=q[0],G=q[1],$=PO((0,n.useState)(!1),2),W=$[0],H=$[1],Q=PO((0,n.useState)(!1),2),Y=Q[0],J=Q[1],Z=PO((0,n.useState)(!1),2),X=Z[0],ee=Z[1],te=PO((0,n.useState)(!1),2),ne=te[0],re=te[1],ie=PO((0,n.useState)(!1),2),se=ie[0],oe=ie[1],ae=function(e){p(e),RO.test(e)?(b("Valid"),y(!0)):(b("at least 3 english letters"),y(!1))},le=function(e){S(e),DO.test(e)&&LO.test(e)?qC.fetchSignInMethodsForEmail(e).then((function(e){0===e.length?(N("Valid"),I(!0)):(N("e-mail already exist"),I(!1))})).catch((function(e){console.error("Error fetching sign in methods for email",e)})):(I(!1),N("not a valid e-mail, should be in this form example@example.com"))},ce=function(e){O(e),MO.test(e)?(D(!0),j("valid"),V===e?(G(!0),H("Matches")):(H("password doesn't match"),G(!1))):(D(!1),j("password must have 8 characters at least "))},ue=function(e){z(e),P?e===P?(G(!0),H("Matches")):(H("password doesn't match"),G(!1)):H("password doesn't match")},he=function(){ee(!Y&&"check the box to continue")};return n.createElement("div",{className:"signup d-flex justify-content-center align-items-center"},n.createElement("div",{className:se?"submitted":"not-submitted"},n.createElement("img",{className:"check-img",src:kP})),n.createElement("div",{className:"signup-form-container"},n.createElement("h2",{className:""},"sign up"),n.createElement("p",null),n.createElement("form",{className:"signup-form"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"username"},"name:"),n.createElement("input",{required:!0,onChange:function(e){ae(e.currentTarget.value.toLowerCase())},type:"text",autoComplete:"off",className:"form-control",id:"username"}),n.createElement("small",{className:g?"text-success":"text-danger"},w||"")),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"InputEmail1"},"email address:"),n.createElement("input",{onChange:function(e){le(e.currentTarget.value)},type:"email",required:!0,autoComplete:"on",className:"form-control",id:"InputEmail1"}),n.createElement("small",{id:"emailHelp",className:C?k?"text-success":"text-danger":"d-none"},C||"")),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"InputPassword1"},"password:"),n.createElement("input",{type:"password",onChange:function(e){ce(e.currentTarget.value)},required:!0,autoComplete:"on",className:"form-control",id:"InputPassword1"}),n.createElement("small",{className:F?L?"text-success":"text-danger":"d-none"},F||"")),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"InputPassword2"},"confirm password:"),n.createElement("input",{type:"password",onChange:function(e){ue(e.currentTarget.value)},required:!0,autoComplete:"on",className:"form-control",id:"InputPassword2"}),n.createElement("small",{className:W?B?"text-success":"text-danger":"d-none"},W||"")),n.createElement("div",{className:"form-group form-check"},n.createElement("input",{onClick:function(){J(!Y)},type:"checkbox",required:!0,className:"form-check-input",id:"Check1"}),n.createElement("label",{className:"form-check-label",htmlFor:"Check1"},"i agree to the terms and conditions.")),n.createElement("small",{className:X?Y?"d-none":"text-danger d-block":"d-none"},X||""),n.createElement("p",{className:ne?"text-danger":"d-none"},"please fill all fields with valid values"),n.createElement("button",{disabled:a,type:"submit",className:"btn signup-btn text-uppercase",onClick:function(e){!function(e){e.preventDefault(),g&&k&&B&&Y?function(){u.apply(this,arguments)}():(ae(f),le(E),ce(P),ue(V),he(),re(!0))}(e)}},"Submit"),n.createElement("button",{className:"d-flex justify-content-center align-items-center btn google-btn",onClick:function(){return d.apply(this,arguments)}},n.createElement("img",{className:"google-img",src:IO}),"Sign in with Google"),n.createElement("p",null,"already have an account? ",n.createElement(de,{className:"signin-link",to:"/signin"},"Sign in")))))};var jO=i(7505),UO={};function VO(e){return VO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VO(e)}function zO(){zO=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==VO(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),l(v,a,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function qO(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function BO(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){qO(s,r,i,o,a,"next",e)}function a(e){qO(s,r,i,o,a,"throw",e)}o(void 0)}))}}function GO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}UO.styleTagTransform=ke(),UO.setAttributes=_e(),UO.insert=we().bind(null,"head"),UO.domAPI=ye(),UO.insertStyleElement=Se(),me()(jO.Z,UO),jO.Z&&jO.Z.locals&&jO.Z.locals;const WO=function(){var e=mN(),t=e.setFavorites,r=e.setCart;(0,n.useEffect)((function(){window.scrollTo(0,0)}),[]);var i=K(),s=JC(),o=s.signin,a=s.SignInWithGoogle,l=(0,n.useRef)(),c=(0,n.useRef)(),u=GO((0,n.useState)(!1),2),d=u[0],h=u[1],f=GO((0,n.useState)(!1),2),p=f[0],m=f[1],g=GO((0,n.useState)(!1),2),y=g[0],v=g[1],w=function(){var e=BO(zO().mark((function e(n){var i,s,o,a,l;return zO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=n.user,e.next=4,GC.collection("users").doc(i.uid).get();case 4:(s=e.sent).exists&&(o=s.data(),a=o.cart,l=o.favs,localStorage.setItem("productsInCart",JSON.stringify(a)),r(a),localStorage.setItem("productsInFavs",JSON.stringify(l)),t(l)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();function b(){return(b=BO(zO().mark((function e(t,n,r){var s;return zO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,h(""),v(!0),e.next=6,o(n,r);case 6:return s=e.sent,e.next=9,w(s);case 9:m(!0),setTimeout((function(){i("/")}),1e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),v(!1),h("email or password may be wrong");case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function _(){return(_=BO(zO().mark((function e(t){var n;return zO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,h(""),v(!0),e.next=6,a();case 6:return n=e.sent,e.next=9,w(n).then((function(){m(!0),setTimeout((function(){i("/")}),1e3)}));case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),v(!1),h("Something went wrong");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return n.createElement("div",{className:"signin d-flex justify-content-center align-items-center"},n.createElement("div",{className:p?"submitted":"not-submitted"},n.createElement("img",{className:"check-img",src:kP})),n.createElement("div",{className:"signin-form-container"},n.createElement("h2",{className:""},"sign in"),n.createElement("p",null),n.createElement("form",{className:"signin-form "},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"email"},"e-mail:"),n.createElement("input",{required:!0,ref:l,type:"email",autoComplete:"off",className:"form-control",id:"username"})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"InputPassword1"},"password:"),n.createElement("input",{type:"password",ref:c,required:!0,autoComplete:"on",className:"form-control",id:"InputPassword1"})),n.createElement("p",{className:d?"text-danger":"d-none"},d),n.createElement("button",{disabled:y,onClick:function(e){return function(e,t,n){return b.apply(this,arguments)}(e,l.current.value,c.current.value)},className:"btn signin-btn text-uppercase"},"sign in"),n.createElement("button",{className:"d-flex justify-content-center align-items-center btn google-btn",onClick:function(e){return function(e){return _.apply(this,arguments)}(e)}},n.createElement("img",{className:"google-img",src:IO}),"Sign in with Google"),n.createElement("p",null,"don't have an account? ",n.createElement(de,{className:"signup-link",to:"/signup"},"Sign up")))))};var HO=i(7348),KO={};KO.styleTagTransform=ke(),KO.setAttributes=_e(),KO.insert=we().bind(null,"head"),KO.domAPI=ye(),KO.insertStyleElement=Se(),me()(HO.Z,KO),HO.Z&&HO.Z.locals&&HO.Z.locals;const QO=function(){return n.createElement("div",{className:"footer-section"},n.createElement("div",{className:"container"},n.createElement("div",{className:"row col-12 p-0 m-0"},n.createElement("div",{className:"col-md-6"},n.createElement(de,{to:"/",className:"d-flex align-items-center"},n.createElement("img",{className:"footer-logo",src:TN}),n.createElement("h3",{className:"text-uppercase text-white font-weight-bold m-0"},"drippy.")),n.createElement("p",{className:"text-uppercase text-white footer-text"},"we are here to help you find your next drip. enjoy and have fun")),n.createElement("div",{className:"col-md-3 social-media"},n.createElement("ul",null,n.createElement("li",{className:"footer-title"},"social media"),n.createElement("li",null,n.createElement("a",{href:"#",className:"footer-link"},"facebook")),n.createElement("li",null,n.createElement("a",{href:"#",className:"footer-link"},"instagram")),n.createElement("li",null,n.createElement("a",{href:"#",className:"footer-link"},"twitter")),n.createElement("li",null,n.createElement("a",{href:"#",className:"footer-link"},"tiktok")))),n.createElement("div",{className:"col-md-3 help-center"},n.createElement("ul",null,n.createElement("li",{className:"footer-title"},"about drippy"),n.createElement("li",null,n.createElement("a",{href:"#",className:"footer-link"},"faq")),n.createElement("li",null,n.createElement(de,{to:"/addresses",className:"footer-link"},"addresses")),n.createElement("li",null,n.createElement("a",{href:"#",className:"footer-link"},"term of service")),n.createElement("li",null,n.createElement("a",{href:"#",className:"footer-link"},"policy service"))))),n.createElement("p",{className:"text-white text-uppercase text-center p-4"},"copyright © 2023 - 2025 all rights reserved")))},YO=function(){return(0,n.useEffect)((function(){var e,t,n;document,e=window.kommunicate||{},t={appId:"c5a34f7a6eb6799012c714bdcd92d317",popupWidget:!0,automaticChatOpenOnNavigation:!0,onInit:function(){Kommunicate.customizeWidgetCss("#launcher-svg-container img {padding: 7px; box-sizing:border-box;}")}},(n=document.createElement("script")).type="text/javascript",n.async=!0,n.src="https://widget.kommunicate.io/v2/kommunicate.app",document.getElementsByTagName("head")[0].appendChild(n),window.kommunicate=e,e._globals=t}),[]),n.createElement("div",null)};var JO=i(8887),ZO={};function XO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eR(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ZO.styleTagTransform=ke(),ZO.setAttributes=_e(),ZO.insert=we().bind(null,"head"),ZO.domAPI=ye(),ZO.insertStyleElement=Se(),me()(JO.Z,ZO),JO.Z&&JO.Z.locals&&JO.Z.locals;const tR=function(){(0,n.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=XO((0,n.useState)(),2),t=e[0],r=e[1],i=XO((0,n.useState)(),2),s=i[0],o=i[1],a=XO((0,n.useState)(null),2),l=a[0],c=a[1];(0,n.useEffect)((function(){console.log(l)}),[l]);return n.createElement("div",{className:"section mt-5"},n.createElement("div",{className:"container"},n.createElement("h2",{className:"text-uppercase font-weight-bold"},"our addresses"),n.createElement("ul",{className:"px-4"},$P.map((function(e){return n.createElement("li",{className:"text-uppercase",key:e.id},e.city,", ",e.country)}))),n.createElement("p",{className:"text-uppercase"},"find the closest outlet to you"),n.createElement("button",{onClick:function(){return function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){r(e.coords.latitude),o(e.coords.longitude)}),(function(e){console.error(e)})):console.error("Geolocation is not supported by this browser.");var n=$P.map((function(n){var r=n.latitude,i=n.longitude,s=e,o=t,a=(s-r)*Math.PI/180,l=(o-i)*Math.PI/180,c=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return{address:n,distance:2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))*6371}})),i=n.reduce((function(e,t){return t.distance<e.distance?t:e}));c(i)}(t,s)},className:"addresses-btn d-flex align-items-center"},n.createElement("img",{className:"mr-1",src:hO}),n.createElement("span",{className:"text-uppercase text-white"},"find now")),l?n.createElement("p",{className:"text-uppercase"},"your closest outlet to you is at ",n.createElement("span",{className:"font-weight-bold"},l.address.city,", ",l.address.country)):""))};var nR=i(2217),rR={};rR.styleTagTransform=ke(),rR.setAttributes=_e(),rR.insert=we().bind(null,"head"),rR.domAPI=ye(),rR.insertStyleElement=Se(),me()(nR.Z,rR),nR.Z&&nR.Z.locals&&nR.Z.locals;const iR=i.p+"images/Micheal.jpg",sR=i.p+"images/Magdalena.jpg";var oR=[{userImg:iR,userName:"Michael M.Jade",content:"this is awesome i really liked it so much and i definitely recommend it",rate:"5.0",id:"1"},{userImg:i.p+"images/Tim.jpg",userName:"Tim Jack",content:"this is awesome i really liked it so much and i definitely recommend it",rate:"4.5",id:"2"},{userImg:FN,userName:"Jaden Beiber",content:"this is awesome i really liked it so much and i definitely recommend it",rate:"5.0",id:"3"},{userImg:sR,userName:"Magdalena",content:"this is awesome i really liked it so much and i definitely recommend it",rate:"4.0",id:"4"},{userImg:FN,userName:"Karim Osama",content:"this is awesome i really liked it so much and i definitely recommend it",rate:"5.0",id:"5"}],aR=[{myColor:"tomato",available:!0,id:"1"},{myColor:"grey",available:!1,id:"2"},{myColor:"purple",available:!0,id:"3"},{myColor:"orange",available:!0,id:"4"},{myColor:"navy",available:!1,id:"5"}];const lR=i.p+"images/star.png";function cR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return uR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uR(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const dR=function(){(0,n.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=function(){let{matches:e}=n.useContext(G),t=e[e.length-1];return t?t.params:{}}().productId,t=mN(),r=t.setProducts,i=t.addToCart,s=t.addToFavs,o=t.products,a=t.productCheck,l=t.cart,c=t.favorites,u=oN.find((function(t){return t.id===e})),d=cR((0,n.useState)(u),2),h=d[0],f=d[1],p=oN.filter((function(t){return t.category===h.category&&t.id!==e})),m=cR((0,n.useState)(p),2),g=m[0],y=m[1],v=cR((0,n.useState)(null),2),w=v[0],b=v[1];return(0,n.useEffect)((function(){var t=o.find((function(t){return t.id===e}));f(t),y(a(l,c,p))}),[e]),(0,n.useEffect)((function(){var e=oN.filter((function(e){return e.category===h.category&&e.id!==h.id}));y(a(l,c,e)),r(a(l,c,oN))}),[l,c,h]),(0,n.useEffect)((function(){var t=o.find((function(t){return t.id===e}));f(t)}),[o]),n.createElement("div",{className:"product-page-section section"},n.createElement("div",{className:"container"},n.createElement("div",{className:"col-12 row m-0 p-0 align-items-center"},n.createElement("div",{className:"col-md-6 pt-4"},n.createElement("img",{className:"product-page-img w-100",src:h.img})),n.createElement("div",{className:"col-md-6 py-4"},n.createElement("h2",{className:"text-uppercase font-weight-bold"},h.title),n.createElement("div",{className:"reviews-section"},n.createElement("h5",{className:"text-uppercase"},"reviews: ",oR.length),n.createElement("div",{className:"reviews px-1 py-2"},oR.map((function(e){return n.createElement("div",{className:"reviews-item",key:e.id},n.createElement("div",{className:"row col-12 p-0 m-0 d-flex justify-content-between align-items-center"},n.createElement("div",{className:"user d-flex align-items-center col-8 p-0"},n.createElement("img",{className:"mr-1",src:e.userImg}),n.createElement("span",{className:"text-capitalize font-weight-bold"},e.userName)),n.createElement("div",{className:"rate d-flex align-items-center justify-content-end col-4 p-0"},n.createElement("img",{className:"star p-0",src:lR}),n.createElement("span",null,e.rate))),n.createElement("p",{className:"feedback col-12 p-0"},e.content))}))),n.createElement("p",{className:h.salePrice?"price-on-sale mb-0 mt-2":"font-weight-bold product-price mt-2"},"EGP ",h.price),h.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",h.salePrice):""),n.createElement("div",{className:"colors-option"},n.createElement("h5",{className:"text-uppercase"},"color"),n.createElement("div",{className:"colors d-flex justify-content-start"},aR.map((function(e){var t=e.id===w;return n.createElement("div",{onClick:function(){return function(e){e.available&&b(e.id)}(e)},className:"color col-2 ".concat(e.available?"":"not-available"," ").concat(t?"active":""),key:e.id,style:{backgroundColor:e.myColor}})})))),n.createElement("div",{className:"product-buttons d-flex align-items-center"},n.createElement("button",{onClick:function(e){return i(h,e)},className:"add-to-bag-btn text-uppercase d-flex align-items-center justify-content-center mt-4"},n.createElement("img",{className:"shopping-bag mr-1",src:h.carted?bP:RN}),"add to bag"),n.createElement("button",{onClick:function(e){return s(h,e)},className:"add-to-favs-btn text-uppercase d-flex align-items-center mt-4"},n.createElement("img",{className:"fav-heart",src:h.faved?_P:AN}))))),n.createElement("div",{className:"related m-4"},n.createElement("div",{className:"d-flex col-12 row m-0 p-0"},n.createElement("h3",{className:"text-uppercase col-12 m-0 font-weight-bold my-2"},"related products"),g.map((function(e){return n.createElement("div",{className:"product-item col-md-4 col-sm-6 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return i(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))}))))))};function hR(e){return hR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hR(e)}function fR(){fR=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==hR(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),l(v,a,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function pR(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function mR(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){pR(s,r,i,o,a,"next",e)}function a(e){pR(s,r,i,o,a,"throw",e)}o(void 0)}))}}function gR(e){return function(e){if(Array.isArray(e))return wR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vR(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||vR(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vR(e,t){if(e){if("string"==typeof e)return wR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wR(e,t):void 0}}function wR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eP.use([tP]);const bR=function(){(0,n.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=JC().currentUser,t=mN(),r=t.products,i=t.setProducts,s=t.addToCart,o=t.addToFavs,a=t.cart,l=t.favorites,c=t.checkCarted,u=t.checkFaved,d=t.productCheck,h=yR((0,n.useState)(!1),2),f=h[0],p=h[1],m=(0,n.useRef)(null),g=yR((0,n.useState)(!1),2),y=g[0],v=g[1];(0,n.useEffect)((function(){c(a,r),localStorage.setItem("productsInCart",JSON.stringify(a))}),[a]),(0,n.useEffect)((function(){u(l,r),localStorage.setItem("productsInFavs",JSON.stringify(l))}),[l]),(0,n.useEffect)((function(){var e=document.querySelector(".search-input").value;function t(){window.innerWidth>=767?v(!0):v(!1)}return E(e),t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]);var w=yR((0,n.useState)([]),2),b=w[0],_=w[1],E=function(e){var t=oN.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}));0===t.length?p(!0):p(!1),_(t)};(0,n.useEffect)((function(){j(b)}),[b]);var S=yR((0,n.useState)("highest price"),2),x=S[0],k=S[1],I=function(e){"highest price"===x?T(e):C(e)},T=function(e){var t=e.sort((function(e,t){var n=void 0!==e.salePrice?e.salePrice:e.price;return(void 0!==t.salePrice?t.salePrice:t.price)-n}));i(d(a,l,t)),k("highest price")},C=function(e){var t=e.sort((function(e,t){return(void 0!==e.salePrice?e.salePrice:e.price)-(void 0!==t.salePrice?t.salePrice:t.price)}));i(d(a,l,t)),k("lowest price")},N=yR((0,n.useState)(!1),2),A=N[0],P=N[1],O=yR((0,n.useState)(!0),2),R=O[0],L=O[1],D=yR((0,n.useState)(!0),2),M=D[0],F=D[1],j=function(e){if(M)i(d(a,l,gR(e))),I(gR(e));else{var t=e.filter((function(e){return void 0===e.secondHand||!1===e.secondHand}));i(d(a,l,gR(t))),I(gR(t))}};(0,n.useEffect)((function(){j(b)}),[M]);var U=yR((0,n.useState)(!1),2),V=U[0],z=U[1],q=function(){e?z(!V):navigate("/signin")};V?document.body.classList.add("active-popup"):document.body.classList.remove("active-popup");var B=yR((0,n.useState)(""),2),G=B[0],$=B[1],W=yR((0,n.useState)(!1),2),H=W[0],K=W[1],Q=yR((0,n.useState)(null),2),Y=Q[0],J=Q[1],Z=yR((0,n.useState)(!1),2),X=Z[0],ee=Z[1],te=(0,n.useRef)(null),ne=(0,n.useRef)(null);function re(){return(re=mR(fR().mark((function e(t){var n;return fR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{K(!0),n={title:te.current.value,price:ne.current.value,img:Y,id:Math.random(),secondHand:!0},i(d(a,l,[].concat(gR(r),[n]))),ee(!0),setTimeout((function(){z(!1),ee(!1)}),1e3),K(!1)}catch(e){K(!1),$("Failed")}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.createElement("section",null,n.createElement("div",{className:"our-products-section section mt-5"},n.createElement("span",{className:"section-title"},"Accessories"),n.createElement("div",{className:"filter-tools row col-12 justify-content-between align-items-center section-container my-2 mx-auto"},n.createElement("div",{className:"col-xl-3 col-md-6 col-sm-6 mt-2 p-0"},n.createElement("div",{className:"filter-option search-input-container d-flex align-items-center justify-content-start"},n.createElement("input",{className:"search-input",onChange:function(e){E(e.currentTarget.value.toLowerCase(),r)},placeholder:"Search...",type:"text"}),n.createElement("img",{className:"search-icon",src:CN,alt:"search icon"}))),n.createElement("div",{className:"filter-option justify-content-end mt-2 p-0 col-xl-3 col-md-6 col-sm-6 btn-group sort-group"},n.createElement("button",{type:"button",className:"sort-btn dropdown-toggle text-capitalize font-weight-bold","data-toggle":"dropdown","aria-expanded":"false"},"sort by: ",n.createElement("span",{className:"text-capitalize font-weight-normal"},x)),n.createElement("div",{className:"dropdown-menu"},n.createElement("button",{onClick:function(){return C(r)},className:"dropdown-item text-capitalize ".concat("lowest price"===x?"active-sort-btn":""),href:"#"},"lowest price"),n.createElement("button",{onClick:function(){return T(r)},className:"dropdown-item text-capitalize ".concat("highest price"===x?"active-sort-btn":""),href:"#"},"highest price"))),n.createElement("div",{className:"filter-option filter-show p-0 mt-2 col-xl-3 col-md-6 col-sm-6 justify-content-center show-option d-flex align-items-center"},n.createElement("span",{className:"text-capitalize font-weight-bold mr-1"},"show:"),n.createElement("button",{onClick:function(){A||(L(!1),P(!0))},className:"show-btn d-flex justify-content-center align-items-center mr-2"},n.createElement("img",{src:EP,className:A?"active-show-btn":"",alt:"menu"})),n.createElement("button",{onClick:function(){R||(L(!0),P(!1))},className:"show-btn d-flex justify-content-center align-items-center"},n.createElement("img",{src:SP,className:R?"active-show-btn":"",alt:"slide"}))),n.createElement("div",{className:"filter-option second-hand-check p-0 mt-2 col-xl-3 col-md-6 col-sm-6 d-flex align-items-center justify-content-end ml-15"},n.createElement("input",{type:"checkbox",checked:M,onChange:function(){F(!M),j(r,!M)}}),n.createElement("label",{className:"m-0 ml-2"},"Second-Hand products"))),n.createElement("div",{className:f?"d-block justify-content-center text-center empty-msg":"d-none text-center"},"no matching search, try something else..."),R?n.createElement(yP,{className:"products-container d-flex col-12 justify-content-between",ref:m,navigation:!0,slidesPerView:y?3:1},n.createElement("div",{className:"section-container"},r.map((function(e){return"accessories"===e.category&&n.createElement(wP,{className:"product-item col-md-4 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return o(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))})))):n.createElement("div",{className:"section-container"},n.createElement("div",{className:"d-flex row m-0 p-0"},r.map((function(e){return"accessories"===e.category&&n.createElement("div",{className:"product-item col-md-4 col-sm-6 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return o(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))})))),n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("button",{onClick:q,className:"sell-btn"},"+ Sell Your Used Products")),V&&n.createElement("div",{className:"popup"},n.createElement("div",{className:"overlay"},n.createElement("div",{className:"popup-content"},n.createElement("form",null,n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"productTitle",className:"text-capitalize"},"product title:"),n.createElement("input",{ref:te,type:"text",className:"form-control",id:"productTitle"})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"productPrice",className:"text-capitalize"},"product price:"),n.createElement("div",{className:"d-flex align-items-center"},n.createElement("span",{className:"mr-1"},"EGP"),n.createElement("input",{ref:ne,type:"number",className:"form-control",id:"productPrice"}))),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"exampleFormControlFile1",className:"text-capitalize"},"product image:"),n.createElement("input",{onChange:function(){return function(e){var t=e.target.files[0];-1!==["image/jpeg","image/png"].indexOf(t.type)?t.size>2097152?$("image size must be smaller than 2MB"):function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var e=t.result;J(e),$("")},t.onerror=function(){$("error uploading the product, please try again")}}(t):$("image type must be (png/jpg)")}(event)},type:"file",className:"form-control-file",id:"exampleFormControlFile1",accept:"image/png, image/jpeg"}),n.createElement("small",{className:"text-secondary"},"preferred 1:1 ratio image")),n.createElement("p",{className:"text-danger"},G),n.createElement("button",{onClick:function(e){!function(e){re.apply(this,arguments)}(e)},disabled:H,type:"submit",className:"btn-submit"},"Submit")),n.createElement("button",{onClick:q,className:"close-popup"},"X")),n.createElement("div",{className:X?"submitted":"not-submitted"},n.createElement("img",{className:"check-img",src:kP}))))))};function _R(e){return _R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_R(e)}function ER(){ER=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==_R(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),l(v,a,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function SR(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function xR(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){SR(s,r,i,o,a,"next",e)}function a(e){SR(s,r,i,o,a,"throw",e)}o(void 0)}))}}function kR(e){return function(e){if(Array.isArray(e))return CR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||TR(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||TR(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TR(e,t){if(e){if("string"==typeof e)return CR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CR(e,t):void 0}}function CR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eP.use([tP]);const NR=function(){(0,n.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=JC().currentUser,t=mN(),r=t.products,i=t.setProducts,s=t.addToCart,o=t.addToFavs,a=t.cart,l=t.favorites,c=t.checkCarted,u=t.checkFaved,d=t.productCheck,h=IR((0,n.useState)(!1),2),f=h[0],p=h[1],m=(0,n.useRef)(null),g=IR((0,n.useState)(!1),2),y=g[0],v=g[1];(0,n.useEffect)((function(){c(a,r),localStorage.setItem("productsInCart",JSON.stringify(a))}),[a]),(0,n.useEffect)((function(){u(l,r),localStorage.setItem("productsInFavs",JSON.stringify(l))}),[l]),(0,n.useEffect)((function(){var e=document.querySelector(".search-input").value;function t(){window.innerWidth>=767?v(!0):v(!1)}return E(e),t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]);var w=IR((0,n.useState)([]),2),b=w[0],_=w[1],E=function(e){var t=oN.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}));0===t.length?p(!0):p(!1),_(t)};(0,n.useEffect)((function(){j(b)}),[b]);var S=IR((0,n.useState)("highest price"),2),x=S[0],k=S[1],I=function(e){"highest price"===x?T(e):C(e)},T=function(e){var t=e.sort((function(e,t){var n=void 0!==e.salePrice?e.salePrice:e.price;return(void 0!==t.salePrice?t.salePrice:t.price)-n}));i(d(a,l,t)),k("highest price")},C=function(e){var t=e.sort((function(e,t){return(void 0!==e.salePrice?e.salePrice:e.price)-(void 0!==t.salePrice?t.salePrice:t.price)}));i(d(a,l,t)),k("lowest price")},N=IR((0,n.useState)(!1),2),A=N[0],P=N[1],O=IR((0,n.useState)(!0),2),R=O[0],L=O[1],D=IR((0,n.useState)(!0),2),M=D[0],F=D[1],j=function(e){if(M)i(d(a,l,kR(e))),I(kR(e));else{var t=e.filter((function(e){return void 0===e.secondHand||!1===e.secondHand}));i(d(a,l,kR(t))),I(kR(t))}};(0,n.useEffect)((function(){j(b)}),[M]);var U=IR((0,n.useState)(!1),2),V=U[0],z=U[1],q=function(){e?z(!V):navigate("/signin")};V?document.body.classList.add("active-popup"):document.body.classList.remove("active-popup");var B=IR((0,n.useState)(""),2),G=B[0],$=B[1],W=IR((0,n.useState)(!1),2),H=W[0],K=W[1],Q=IR((0,n.useState)(null),2),Y=Q[0],J=Q[1],Z=IR((0,n.useState)(!1),2),X=Z[0],ee=Z[1],te=(0,n.useRef)(null),ne=(0,n.useRef)(null);function re(){return(re=xR(ER().mark((function e(t){var n;return ER().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{K(!0),n={title:te.current.value,price:ne.current.value,img:Y,id:Math.random(),secondHand:!0},i(d(a,l,[].concat(kR(r),[n]))),ee(!0),setTimeout((function(){z(!1),ee(!1)}),1e3),K(!1)}catch(e){K(!1),$("Failed")}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.createElement("section",null,n.createElement("div",{className:"our-products-section section mt-5"},n.createElement("span",{className:"section-title"},"Shoes"),n.createElement("div",{className:"filter-tools row col-12 justify-content-between align-items-center section-container my-2 mx-auto"},n.createElement("div",{className:"col-xl-3 col-md-6 col-sm-6 mt-2 p-0"},n.createElement("div",{className:"filter-option search-input-container d-flex align-items-center justify-content-start"},n.createElement("input",{className:"search-input",onChange:function(e){E(e.currentTarget.value.toLowerCase(),r)},placeholder:"Search...",type:"text"}),n.createElement("img",{className:"search-icon",src:CN,alt:"search icon"}))),n.createElement("div",{className:"filter-option justify-content-end mt-2 p-0 col-xl-3 col-md-6 col-sm-6 btn-group sort-group"},n.createElement("button",{type:"button",className:"sort-btn dropdown-toggle text-capitalize font-weight-bold","data-toggle":"dropdown","aria-expanded":"false"},"sort by: ",n.createElement("span",{className:"text-capitalize font-weight-normal"},x)),n.createElement("div",{className:"dropdown-menu"},n.createElement("button",{onClick:function(){return C(r)},className:"dropdown-item text-capitalize ".concat("lowest price"===x?"active-sort-btn":""),href:"#"},"lowest price"),n.createElement("button",{onClick:function(){return T(r)},className:"dropdown-item text-capitalize ".concat("highest price"===x?"active-sort-btn":""),href:"#"},"highest price"))),n.createElement("div",{className:"filter-option filter-show p-0 mt-2 col-xl-3 col-md-6 col-sm-6 justify-content-center show-option d-flex align-items-center"},n.createElement("span",{className:"text-capitalize font-weight-bold mr-1"},"show:"),n.createElement("button",{onClick:function(){A||(L(!1),P(!0))},className:"show-btn d-flex justify-content-center align-items-center mr-2"},n.createElement("img",{src:EP,className:A?"active-show-btn":"",alt:"menu"})),n.createElement("button",{onClick:function(){R||(L(!0),P(!1))},className:"show-btn d-flex justify-content-center align-items-center"},n.createElement("img",{src:SP,className:R?"active-show-btn":"",alt:"slide"}))),n.createElement("div",{className:"filter-option second-hand-check p-0 mt-2 col-xl-3 col-md-6 col-sm-6 d-flex align-items-center justify-content-end ml-15"},n.createElement("input",{type:"checkbox",checked:M,onChange:function(){F(!M),j(r,!M)}}),n.createElement("label",{className:"m-0 ml-2"},"Second-Hand products"))),n.createElement("div",{className:f?"d-block justify-content-center text-center empty-msg":"d-none text-center"},"no matching search, try something else..."),R?n.createElement(yP,{className:"products-container d-flex col-12 justify-content-between",ref:m,navigation:!0,slidesPerView:y?3:1},n.createElement("div",{className:"section-container"},r.map((function(e){return"shoes"===e.category&&n.createElement(wP,{className:"product-item col-md-4 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return o(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))})))):n.createElement("div",{className:"section-container"},n.createElement("div",{className:"d-flex row m-0 p-0"},r.map((function(e){return"shoes"===e.category&&n.createElement("div",{className:"product-item col-md-4 col-sm-6 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return o(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))})))),n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("button",{onClick:q,className:"sell-btn"},"+ Sell Your Used Products")),V&&n.createElement("div",{className:"popup"},n.createElement("div",{className:"overlay"},n.createElement("div",{className:"popup-content"},n.createElement("form",null,n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"productTitle",className:"text-capitalize"},"product title:"),n.createElement("input",{ref:te,type:"text",className:"form-control",id:"productTitle"})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"productPrice",className:"text-capitalize"},"product price:"),n.createElement("div",{className:"d-flex align-items-center"},n.createElement("span",{className:"mr-1"},"EGP"),n.createElement("input",{ref:ne,type:"number",className:"form-control",id:"productPrice"}))),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"exampleFormControlFile1",className:"text-capitalize"},"product image:"),n.createElement("input",{onChange:function(){return function(e){var t=e.target.files[0];-1!==["image/jpeg","image/png"].indexOf(t.type)?t.size>2097152?$("image size must be smaller than 2MB"):function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var e=t.result;J(e),$("")},t.onerror=function(){$("error uploading the product, please try again")}}(t):$("image type must be (png/jpg)")}(event)},type:"file",className:"form-control-file",id:"exampleFormControlFile1",accept:"image/png, image/jpeg"}),n.createElement("small",{className:"text-secondary"},"preferred 1:1 ratio image")),n.createElement("p",{className:"text-danger"},G),n.createElement("button",{onClick:function(e){!function(e){re.apply(this,arguments)}(e)},disabled:H,type:"submit",className:"btn-submit"},"Submit")),n.createElement("button",{onClick:q,className:"close-popup"},"X")),n.createElement("div",{className:X?"submitted":"not-submitted"},n.createElement("img",{className:"check-img",src:kP}))))))};function AR(e){return AR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AR(e)}function PR(){PR=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==AR(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),l(v,a,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function OR(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function RR(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){OR(s,r,i,o,a,"next",e)}function a(e){OR(s,r,i,o,a,"throw",e)}o(void 0)}))}}function LR(e){return function(e){if(Array.isArray(e))return FR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||MR(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||MR(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MR(e,t){if(e){if("string"==typeof e)return FR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FR(e,t):void 0}}function FR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eP.use([tP]);const jR=function(){(0,n.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=JC().currentUser,t=mN(),r=t.products,i=t.setProducts,s=t.addToCart,o=t.addToFavs,a=t.cart,l=t.favorites,c=t.checkCarted,u=t.checkFaved,d=t.productCheck,h=DR((0,n.useState)(!1),2),f=h[0],p=h[1],m=(0,n.useRef)(null),g=DR((0,n.useState)(!1),2),y=g[0],v=g[1];(0,n.useEffect)((function(){c(a,r),localStorage.setItem("productsInCart",JSON.stringify(a))}),[a]),(0,n.useEffect)((function(){u(l,r),localStorage.setItem("productsInFavs",JSON.stringify(l))}),[l]),(0,n.useEffect)((function(){var e=document.querySelector(".search-input").value;function t(){window.innerWidth>=767?v(!0):v(!1)}return E(e),t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]);var w=DR((0,n.useState)([]),2),b=w[0],_=w[1],E=function(e){var t=oN.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}));0===t.length?p(!0):p(!1),_(t)};(0,n.useEffect)((function(){j(b)}),[b]);var S=DR((0,n.useState)("highest price"),2),x=S[0],k=S[1],I=function(e){"highest price"===x?T(e):C(e)},T=function(e){var t=e.sort((function(e,t){var n=void 0!==e.salePrice?e.salePrice:e.price;return(void 0!==t.salePrice?t.salePrice:t.price)-n}));i(d(a,l,t)),k("highest price")},C=function(e){var t=e.sort((function(e,t){return(void 0!==e.salePrice?e.salePrice:e.price)-(void 0!==t.salePrice?t.salePrice:t.price)}));i(d(a,l,t)),k("lowest price")},N=DR((0,n.useState)(!1),2),A=N[0],P=N[1],O=DR((0,n.useState)(!0),2),R=O[0],L=O[1],D=DR((0,n.useState)(!0),2),M=D[0],F=D[1],j=function(e){if(M)i(d(a,l,LR(e))),I(LR(e));else{var t=e.filter((function(e){return void 0===e.secondHand||!1===e.secondHand}));i(d(a,l,LR(t))),I(LR(t))}};(0,n.useEffect)((function(){j(b)}),[M]);var U=DR((0,n.useState)(!1),2),V=U[0],z=U[1],q=function(){e?z(!V):navigate("/signin")};V?document.body.classList.add("active-popup"):document.body.classList.remove("active-popup");var B=DR((0,n.useState)(""),2),G=B[0],$=B[1],W=DR((0,n.useState)(!1),2),H=W[0],K=W[1],Q=DR((0,n.useState)(null),2),Y=Q[0],J=Q[1],Z=DR((0,n.useState)(!1),2),X=Z[0],ee=Z[1],te=(0,n.useRef)(null),ne=(0,n.useRef)(null);function re(){return(re=RR(PR().mark((function e(t){var n;return PR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{K(!0),n={title:te.current.value,price:ne.current.value,img:Y,id:Math.random(),secondHand:!0},i(d(a,l,[].concat(LR(r),[n]))),ee(!0),setTimeout((function(){z(!1),ee(!1)}),1e3),K(!1)}catch(e){K(!1),$("Failed")}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.createElement("section",null,n.createElement("div",{className:"our-products-section section mt-5"},n.createElement("span",{className:"section-title"},"Jackets"),n.createElement("div",{className:"filter-tools row col-12 justify-content-between align-items-center section-container my-2 mx-auto"},n.createElement("div",{className:"col-xl-3 col-md-6 col-sm-6 mt-2 p-0"},n.createElement("div",{className:"filter-option search-input-container d-flex align-items-center justify-content-start"},n.createElement("input",{className:"search-input",onChange:function(e){E(e.currentTarget.value.toLowerCase(),r)},placeholder:"Search...",type:"text"}),n.createElement("img",{className:"search-icon",src:CN,alt:"search icon"}))),n.createElement("div",{className:"filter-option justify-content-end mt-2 p-0 col-xl-3 col-md-6 col-sm-6 btn-group sort-group"},n.createElement("button",{type:"button",className:"sort-btn dropdown-toggle text-capitalize font-weight-bold","data-toggle":"dropdown","aria-expanded":"false"},"sort by: ",n.createElement("span",{className:"text-capitalize font-weight-normal"},x)),n.createElement("div",{className:"dropdown-menu"},n.createElement("button",{onClick:function(){return C(r)},className:"dropdown-item text-capitalize ".concat("lowest price"===x?"active-sort-btn":""),href:"#"},"lowest price"),n.createElement("button",{onClick:function(){return T(r)},className:"dropdown-item text-capitalize ".concat("highest price"===x?"active-sort-btn":""),href:"#"},"highest price"))),n.createElement("div",{className:"filter-option filter-show p-0 mt-2 col-xl-3 col-md-6 col-sm-6 justify-content-center show-option d-flex align-items-center"},n.createElement("span",{className:"text-capitalize font-weight-bold mr-1"},"show:"),n.createElement("button",{onClick:function(){A||(L(!1),P(!0))},className:"show-btn d-flex justify-content-center align-items-center mr-2"},n.createElement("img",{src:EP,className:A?"active-show-btn":"",alt:"menu"})),n.createElement("button",{onClick:function(){R||(L(!0),P(!1))},className:"show-btn d-flex justify-content-center align-items-center"},n.createElement("img",{src:SP,className:R?"active-show-btn":"",alt:"slide"}))),n.createElement("div",{className:"filter-option second-hand-check p-0 mt-2 col-xl-3 col-md-6 col-sm-6 d-flex align-items-center justify-content-end ml-15"},n.createElement("input",{type:"checkbox",checked:M,onChange:function(){F(!M),j(r,!M)}}),n.createElement("label",{className:"m-0 ml-2"},"Second-Hand products"))),n.createElement("div",{className:f?"d-block justify-content-center text-center empty-msg":"d-none text-center"},"no matching search, try something else..."),R?n.createElement(yP,{className:"products-container d-flex col-12 justify-content-between",ref:m,navigation:!0,slidesPerView:y?3:1},n.createElement("div",{className:"section-container"},r.map((function(e){return"jackets"===e.category&&n.createElement(wP,{className:"product-item col-md-4 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return o(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))})))):n.createElement("div",{className:"section-container"},n.createElement("div",{className:"d-flex row m-0 p-0"},r.map((function(e){return"jackets"===e.category&&n.createElement("div",{className:"product-item col-md-4 col-sm-6 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return o(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))})))),n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("button",{onClick:q,className:"sell-btn"},"+ Sell Your Used Products")),V&&n.createElement("div",{className:"popup"},n.createElement("div",{className:"overlay"},n.createElement("div",{className:"popup-content"},n.createElement("form",null,n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"productTitle",className:"text-capitalize"},"product title:"),n.createElement("input",{ref:te,type:"text",className:"form-control",id:"productTitle"})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"productPrice",className:"text-capitalize"},"product price:"),n.createElement("div",{className:"d-flex align-items-center"},n.createElement("span",{className:"mr-1"},"EGP"),n.createElement("input",{ref:ne,type:"number",className:"form-control",id:"productPrice"}))),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"exampleFormControlFile1",className:"text-capitalize"},"product image:"),n.createElement("input",{onChange:function(){return function(e){var t=e.target.files[0];-1!==["image/jpeg","image/png"].indexOf(t.type)?t.size>2097152?$("image size must be smaller than 2MB"):function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var e=t.result;J(e),$("")},t.onerror=function(){$("error uploading the product, please try again")}}(t):$("image type must be (png/jpg)")}(event)},type:"file",className:"form-control-file",id:"exampleFormControlFile1",accept:"image/png, image/jpeg"}),n.createElement("small",{className:"text-secondary"},"preferred 1:1 ratio image")),n.createElement("p",{className:"text-danger"},G),n.createElement("button",{onClick:function(e){!function(e){re.apply(this,arguments)}(e)},disabled:H,type:"submit",className:"btn-submit"},"Submit")),n.createElement("button",{onClick:q,className:"close-popup"},"X")),n.createElement("div",{className:X?"submitted":"not-submitted"},n.createElement("img",{className:"check-img",src:kP}))))))};function UR(e){return UR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UR(e)}function VR(){VR=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==UR(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),l(v,a,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function zR(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function qR(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){zR(s,r,i,o,a,"next",e)}function a(e){zR(s,r,i,o,a,"throw",e)}o(void 0)}))}}function BR(e){return function(e){if(Array.isArray(e))return WR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||$R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $R(e,t){if(e){if("string"==typeof e)return WR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WR(e,t):void 0}}function WR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eP.use([tP]);const HR=function(){(0,n.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=JC().currentUser,t=mN(),r=t.products,i=t.setProducts,s=t.addToCart,o=t.addToFavs,a=t.cart,l=t.favorites,c=t.checkCarted,u=t.checkFaved,d=t.productCheck,h=GR((0,n.useState)(!1),2),f=h[0],p=h[1],m=(0,n.useRef)(null),g=GR((0,n.useState)(!1),2),y=g[0],v=g[1];(0,n.useEffect)((function(){c(a,r),localStorage.setItem("productsInCart",JSON.stringify(a))}),[a]),(0,n.useEffect)((function(){u(l,r),localStorage.setItem("productsInFavs",JSON.stringify(l))}),[l]),(0,n.useEffect)((function(){var e=document.querySelector(".search-input").value;function t(){window.innerWidth>=767?v(!0):v(!1)}return E(e),t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]);var w=GR((0,n.useState)([]),2),b=w[0],_=w[1],E=function(e){var t=oN.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}));0===t.length?p(!0):p(!1),_(t)};(0,n.useEffect)((function(){j(b)}),[b]);var S=GR((0,n.useState)("highest price"),2),x=S[0],k=S[1],I=function(e){"highest price"===x?T(e):C(e)},T=function(e){var t=e.sort((function(e,t){var n=void 0!==e.salePrice?e.salePrice:e.price;return(void 0!==t.salePrice?t.salePrice:t.price)-n}));i(d(a,l,t)),k("highest price")},C=function(e){var t=e.sort((function(e,t){return(void 0!==e.salePrice?e.salePrice:e.price)-(void 0!==t.salePrice?t.salePrice:t.price)}));i(d(a,l,t)),k("lowest price")},N=GR((0,n.useState)(!1),2),A=N[0],P=N[1],O=GR((0,n.useState)(!0),2),R=O[0],L=O[1],D=GR((0,n.useState)(!0),2),M=D[0],F=D[1],j=function(e){if(M)i(d(a,l,BR(e))),I(BR(e));else{var t=e.filter((function(e){return void 0===e.secondHand||!1===e.secondHand}));i(d(a,l,BR(t))),I(BR(t))}};(0,n.useEffect)((function(){j(b)}),[M]);var U=GR((0,n.useState)(!1),2),V=U[0],z=U[1],q=function(){e?z(!V):navigate("/signin")};V?document.body.classList.add("active-popup"):document.body.classList.remove("active-popup");var B=GR((0,n.useState)(""),2),G=B[0],$=B[1],W=GR((0,n.useState)(!1),2),H=W[0],K=W[1],Q=GR((0,n.useState)(null),2),Y=Q[0],J=Q[1],Z=GR((0,n.useState)(!1),2),X=Z[0],ee=Z[1],te=(0,n.useRef)(null),ne=(0,n.useRef)(null);function re(){return(re=qR(VR().mark((function e(t){var n;return VR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{K(!0),n={title:te.current.value,price:ne.current.value,img:Y,id:Math.random(),secondHand:!0},i(d(a,l,[].concat(BR(r),[n]))),ee(!0),setTimeout((function(){z(!1),ee(!1)}),1e3),K(!1)}catch(e){K(!1),$("Failed")}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.createElement("section",null,n.createElement("div",{className:"our-products-section section mt-5"},n.createElement("span",{className:"section-title"},"Sales"),n.createElement("div",{className:"filter-tools row col-12 justify-content-between align-items-center section-container my-2 mx-auto"},n.createElement("div",{className:"col-xl-3 col-md-6 col-sm-6 mt-2 p-0"},n.createElement("div",{className:"filter-option search-input-container d-flex align-items-center justify-content-start"},n.createElement("input",{className:"search-input",onChange:function(e){E(e.currentTarget.value.toLowerCase(),r)},placeholder:"Search...",type:"text"}),n.createElement("img",{className:"search-icon",src:CN,alt:"search icon"}))),n.createElement("div",{className:"filter-option justify-content-end mt-2 p-0 col-xl-3 col-md-6 col-sm-6 btn-group sort-group"},n.createElement("button",{type:"button",className:"sort-btn dropdown-toggle text-capitalize font-weight-bold","data-toggle":"dropdown","aria-expanded":"false"},"sort by: ",n.createElement("span",{className:"text-capitalize font-weight-normal"},x)),n.createElement("div",{className:"dropdown-menu"},n.createElement("button",{onClick:function(){return C(r)},className:"dropdown-item text-capitalize ".concat("lowest price"===x?"active-sort-btn":""),href:"#"},"lowest price"),n.createElement("button",{onClick:function(){return T(r)},className:"dropdown-item text-capitalize ".concat("highest price"===x?"active-sort-btn":""),href:"#"},"highest price"))),n.createElement("div",{className:"filter-option filter-show p-0 mt-2 col-xl-3 col-md-6 col-sm-6 justify-content-center show-option d-flex align-items-center"},n.createElement("span",{className:"text-capitalize font-weight-bold mr-1"},"show:"),n.createElement("button",{onClick:function(){A||(L(!1),P(!0))},className:"show-btn d-flex justify-content-center align-items-center mr-2"},n.createElement("img",{src:EP,className:A?"active-show-btn":"",alt:"menu"})),n.createElement("button",{onClick:function(){R||(L(!0),P(!1))},className:"show-btn d-flex justify-content-center align-items-center"},n.createElement("img",{src:SP,className:R?"active-show-btn":"",alt:"slide"}))),n.createElement("div",{className:"filter-option second-hand-check p-0 mt-2 col-xl-3 col-md-6 col-sm-6 d-flex align-items-center justify-content-end ml-15"},n.createElement("input",{type:"checkbox",checked:M,onChange:function(){F(!M),j(r,!M)}}),n.createElement("label",{className:"m-0 ml-2"},"Second-Hand products"))),n.createElement("div",{className:f?"d-block justify-content-center text-center empty-msg":"d-none text-center"},"no matching search, try something else..."),R?n.createElement(yP,{className:"products-container d-flex col-12 justify-content-between",ref:m,navigation:!0,slidesPerView:y?3:1},n.createElement("div",{className:"section-container"},r.map((function(e){return e.salePrice&&n.createElement(wP,{className:"product-item col-md-4 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return o(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))})))):n.createElement("div",{className:"section-container"},n.createElement("div",{className:"d-flex row m-0 p-0"},r.map((function(e){return e.salePrice&&n.createElement("div",{className:"product-item col-md-4 col-sm-6 justify-content-center",key:e.id},e.salePrice?n.createElement("img",{className:"sale-tag",src:xP}):"",n.createElement(de,{to:"/products/".concat(e.id)},n.createElement("div",{className:"product-buttons"},n.createElement("img",{onClick:function(t){return s(e,t)},className:"product-icon add-to-cart-icon",src:e.carted?bP:ON,alt:"add to cart"}),n.createElement("img",{onClick:function(t){return o(e,t)},className:"product-icon add-to-favs-icon",src:e.faved?_P:AN,alt:"add to favorites"})),n.createElement("div",{className:"product-img-container"},n.createElement("img",{className:"product-img",src:e.img,alt:e.title})),n.createElement("div",{className:"product-info"},n.createElement("span",{className:"product-title"},e.title),n.createElement("p",{className:e.salePrice?"price-on-sale mb-0":"product-price"},"EGP ",e.price),e.salePrice?n.createElement("p",{className:"product-price-sale"},"EGP ",e.salePrice):"")))})))),n.createElement("div",{className:"d-flex justify-content-center"},n.createElement("button",{onClick:q,className:"sell-btn"},"+ Sell Your Used Products")),V&&n.createElement("div",{className:"popup"},n.createElement("div",{className:"overlay"},n.createElement("div",{className:"popup-content"},n.createElement("form",null,n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"productTitle",className:"text-capitalize"},"product title:"),n.createElement("input",{ref:te,type:"text",className:"form-control",id:"productTitle"})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"productPrice",className:"text-capitalize"},"product price:"),n.createElement("div",{className:"d-flex align-items-center"},n.createElement("span",{className:"mr-1"},"EGP"),n.createElement("input",{ref:ne,type:"number",className:"form-control",id:"productPrice"}))),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"exampleFormControlFile1",className:"text-capitalize"},"product image:"),n.createElement("input",{onChange:function(){return function(e){var t=e.target.files[0];-1!==["image/jpeg","image/png"].indexOf(t.type)?t.size>2097152?$("image size must be smaller than 2MB"):function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var e=t.result;J(e),$("")},t.onerror=function(){$("error uploading the product, please try again")}}(t):$("image type must be (png/jpg)")}(event)},type:"file",className:"form-control-file",id:"exampleFormControlFile1",accept:"image/png, image/jpeg"}),n.createElement("small",{className:"text-secondary"},"preferred 1:1 ratio image")),n.createElement("p",{className:"text-danger"},G),n.createElement("button",{onClick:function(e){!function(e){re.apply(this,arguments)}(e)},disabled:H,type:"submit",className:"btn-submit"},"Submit")),n.createElement("button",{onClick:q,className:"close-popup"},"X")),n.createElement("div",{className:X?"submitted":"not-submitted"},n.createElement("img",{className:"check-img",src:kP}))))))};var KR="https://js.stripe.com/v3",QR=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,YR="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",JR=null,ZR=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.54.1",startTime:t})}(r,n),r},XR=Promise.resolve().then((function(){return e=null,null!==JR||(JR=new Promise((function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe&&e&&console.warn(YR),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(KR,'"]')),t=0;t<e.length;t++){var n=e[t];if(QR.test(n.src))return n}return null}();r&&e?console.warn(YR):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(KR).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(e){return void n(e)}else t(null)}))),JR;var e})),eL=!1;XR.catch((function(e){eL||console.warn(e)}));var tL=i(6664);function nL(e,t){return function(){return e.apply(t,arguments)}}const{toString:rL}=Object.prototype,{getPrototypeOf:iL}=Object,sL=(oL=Object.create(null),e=>{const t=rL.call(e);return oL[t]||(oL[t]=t.slice(8,-1).toLowerCase())});var oL;const aL=e=>(e=e.toLowerCase(),t=>sL(t)===e),lL=e=>t=>typeof t===e,{isArray:cL}=Array,uL=lL("undefined"),dL=aL("ArrayBuffer"),hL=lL("string"),fL=lL("function"),pL=lL("number"),mL=e=>null!==e&&"object"==typeof e,gL=e=>{if("object"!==sL(e))return!1;const t=iL(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},yL=aL("Date"),vL=aL("File"),wL=aL("Blob"),bL=aL("FileList"),_L=aL("URLSearchParams");function EL(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,i;if("object"!=typeof e&&(e=[e]),cL(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let o;for(r=0;r<s;r++)o=i[r],t.call(null,e[o],o,e)}}function SL(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const xL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,kL=e=>!uL(e)&&e!==xL,IL=(TL="undefined"!=typeof Uint8Array&&iL(Uint8Array),e=>TL&&e instanceof TL);var TL;const CL=aL("HTMLFormElement"),NL=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),AL=aL("RegExp"),PL=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};EL(n,((n,i)=>{!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},OL="abcdefghijklmnopqrstuvwxyz",RL="0123456789",LL={DIGIT:RL,ALPHA:OL,ALPHA_DIGIT:OL+OL.toUpperCase()+RL},DL=aL("AsyncFunction"),ML={isArray:cL,isArrayBuffer:dL,isBuffer:function(e){return null!==e&&!uL(e)&&null!==e.constructor&&!uL(e.constructor)&&fL(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||fL(e.append)&&("formdata"===(t=sL(e))||"object"===t&&fL(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&dL(e.buffer),t},isString:hL,isNumber:pL,isBoolean:e=>!0===e||!1===e,isObject:mL,isPlainObject:gL,isUndefined:uL,isDate:yL,isFile:vL,isBlob:wL,isRegExp:AL,isFunction:fL,isStream:e=>mL(e)&&fL(e.pipe),isURLSearchParams:_L,isTypedArray:IL,isFileList:bL,forEach:EL,merge:function e(){const{caseless:t}=kL(this)&&this||{},n={},r=(r,i)=>{const s=t&&SL(n,i)||i;gL(n[s])&&gL(r)?n[s]=e(n[s],r):gL(r)?n[s]=e({},r):cL(r)?n[s]=r.slice():n[s]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&EL(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(EL(t,((t,r)=>{n&&fL(t)?e[r]=nL(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&iL(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:sL,kindOfTest:aL,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(cL(e))return e;let t=e.length;if(!pL(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:CL,hasOwnProperty:NL,hasOwnProp:NL,reduceDescriptors:PL,freezeMethods:e=>{PL(e,((t,n)=>{if(fL(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];fL(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return cL(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:SL,global:xL,isContextDefined:kL,ALPHABET:LL,generateString:(e=16,t=LL.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&fL(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(mL(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=cL(e)?[]:{};return EL(e,((e,t)=>{const s=n(e,r+1);!uL(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:DL,isThenable:e=>e&&(mL(e)||fL(e))&&fL(e.then)&&fL(e.catch)};function FL(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}ML.inherits(FL,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ML.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const jL=FL.prototype,UL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{UL[e]={value:e}})),Object.defineProperties(FL,UL),Object.defineProperty(jL,"isAxiosError",{value:!0}),FL.from=(e,t,n,r,i,s)=>{const o=Object.create(jL);return ML.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),FL.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const VL=FL;function zL(e){return ML.isPlainObject(e)||ML.isArray(e)}function qL(e){return ML.endsWith(e,"[]")?e.slice(0,-2):e}function BL(e,t,n){return e?e.concat(t).map((function(e,t){return e=qL(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const GL=ML.toFlatObject(ML,{},null,(function(e){return/^is[A-Z]/.test(e)})),$L=function(e,t,n){if(!ML.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=ML.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ML.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&ML.isSpecCompliantForm(t);if(!ML.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ML.isDate(e))return e.toISOString();if(!a&&ML.isBlob(e))throw new VL("Blob is not supported. Use a Buffer instead.");return ML.isArrayBuffer(e)||ML.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"==typeof e)if(ML.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(ML.isArray(e)&&function(e){return ML.isArray(e)&&!e.some(zL)}(e)||(ML.isFileList(e)||ML.endsWith(n,"[]"))&&(a=ML.toArray(e)))return n=qL(n),a.forEach((function(e,r){!ML.isUndefined(e)&&null!==e&&t.append(!0===o?BL([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!zL(e)||(t.append(BL(i,n,s),l(e)),!1)}const u=[],d=Object.assign(GL,{defaultVisitor:c,convertValue:l,isVisitable:zL});if(!ML.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!ML.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),ML.forEach(n,(function(n,s){!0===(!(ML.isUndefined(n)||null===n)&&i.call(t,n,ML.isString(s)?s.trim():s,r,d))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function WL(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function HL(e,t){this._pairs=[],e&&$L(e,this,t)}const KL=HL.prototype;KL.append=function(e,t){this._pairs.push([e,t])},KL.toString=function(e){const t=e?function(t){return e.call(this,t,WL)}:WL;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const QL=HL;function YL(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function JL(e,t,n){if(!t)return e;const r=n&&n.encode||YL,i=n&&n.serialize;let s;if(s=i?i(t,n):ML.isURLSearchParams(t)?t.toString():new QL(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const ZL=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ML.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},XL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eD={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:QL,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]},tD=function(e){function t(e,n,r,i){let s=e[i++];const o=Number.isFinite(+s),a=i>=e.length;return s=!s&&ML.isArray(r)?r.length:s,a?(ML.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o):(r[s]&&ML.isObject(r[s])||(r[s]=[]),t(e,n,r[s],i)&&ML.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o)}if(ML.isFormData(e)&&ML.isFunction(e.entries)){const n={};return ML.forEachEntry(e,((e,r)=>{t(function(e){return ML.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null},nD={"Content-Type":void 0},rD={transitional:XL,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=ML.isObject(e);if(i&&ML.isHTMLForm(e)&&(e=new FormData(e)),ML.isFormData(e))return r&&r?JSON.stringify(tD(e)):e;if(ML.isArrayBuffer(e)||ML.isBuffer(e)||ML.isStream(e)||ML.isFile(e)||ML.isBlob(e))return e;if(ML.isArrayBufferView(e))return e.buffer;if(ML.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return $L(e,new eD.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return eD.isNode&&ML.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=ML.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return $L(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(ML.isString(e))try{return(0,JSON.parse)(e),ML.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||rD.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&ML.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw VL.from(e,VL.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:eD.classes.FormData,Blob:eD.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ML.forEach(["delete","get","head"],(function(e){rD.headers[e]={}})),ML.forEach(["post","put","patch"],(function(e){rD.headers[e]=ML.merge(nD)}));const iD=rD,sD=ML.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oD=Symbol("internals");function aD(e){return e&&String(e).trim().toLowerCase()}function lD(e){return!1===e||null==e?e:ML.isArray(e)?e.map(lD):String(e)}function cD(e,t,n,r,i){return ML.isFunction(r)?r.call(this,t,n):(i&&(t=n),ML.isString(t)?ML.isString(r)?-1!==t.indexOf(r):ML.isRegExp(r)?r.test(t):void 0:void 0)}class uD{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=aD(t);if(!i)throw new Error("header name must be a non-empty string");const s=ML.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=lD(e))}const s=(e,t)=>ML.forEach(e,((e,n)=>i(e,n,t)));return ML.isPlainObject(e)||e instanceof this.constructor?s(e,t):ML.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&sD[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=aD(e)){const n=ML.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(ML.isFunction(t))return t.call(this,e,n);if(ML.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=aD(e)){const n=ML.findKey(this,e);return!(!n||void 0===this[n]||t&&!cD(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=aD(e)){const i=ML.findKey(n,e);!i||t&&!cD(0,n[i],i,t)||(delete n[i],r=!0)}}return ML.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!cD(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return ML.forEach(this,((r,i)=>{const s=ML.findKey(n,i);if(s)return t[s]=lD(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=lD(r),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ML.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&ML.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[oD]=this[oD]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=aD(e);t[r]||(function(e,t){const n=ML.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return ML.isArray(e)?e.forEach(r):r(e),this}}uD.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ML.freezeMethods(uD.prototype),ML.freezeMethods(uD);const dD=uD;function hD(e,t){const n=this||iD,r=t||n,i=dD.from(r.headers);let s=r.data;return ML.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function fD(e){return!(!e||!e.__CANCEL__)}function pD(e,t,n){VL.call(this,null==e?"canceled":e,VL.ERR_CANCELED,t,n),this.name="CanceledError"}ML.inherits(pD,VL,{__CANCEL__:!0});const mD=pD,gD=eD.isStandardBrowserEnv?{write:function(e,t,n,r,i,s){const o=[];o.push(e+"="+encodeURIComponent(t)),ML.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ML.isString(r)&&o.push("path="+r),ML.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function yD(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const vD=eD.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=ML.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function wD(e,t){let n=0;const r=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];i||(i=l),n[s]=a,r[s]=l;let u=o,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a);n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const bD="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=dD.from(e.headers).normalize(),s=e.responseType;let o;function a(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}ML.isFormData(r)&&(eD.isStandardBrowserEnv||eD.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const c=yD(e.baseURL,e.url);function u(){if(!l)return;const r=dD.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new VL("Request failed with status code "+n.status,[VL.ERR_BAD_REQUEST,VL.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),a()}),(function(e){n(e),a()}),{data:s&&"text"!==s&&"json"!==s?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),JL(c,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(n(new VL("Request aborted",VL.ECONNABORTED,e,l)),l=null)},l.onerror=function(){n(new VL("Network Error",VL.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||XL;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new VL(t,r.clarifyTimeoutError?VL.ETIMEDOUT:VL.ECONNABORTED,e,l)),l=null},eD.isStandardBrowserEnv){const t=(e.withCredentials||vD(c))&&e.xsrfCookieName&&gD.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in l&&ML.forEach(i.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),ML.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),s&&"json"!==s&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",wD(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",wD(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{l&&(n(!t||t.type?new mD(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const d=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c);d&&-1===eD.protocols.indexOf(d)?n(new VL("Unsupported protocol "+d+":",VL.ERR_BAD_REQUEST,e)):l.send(r||null)}))},_D={http:null,xhr:bD};ML.forEach(_D,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));function ED(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new mD(null,e)}function SD(e){return ED(e),e.headers=dD.from(e.headers),e.data=hD.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),(e=>{e=ML.isArray(e)?e:[e];const{length:t}=e;let n,r;for(let i=0;i<t&&(n=e[i],!(r=ML.isString(n)?_D[n.toLowerCase()]:n));i++);if(!r){if(!1===r)throw new VL(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(ML.hasOwnProp(_D,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`)}if(!ML.isFunction(r))throw new TypeError("adapter is not a function");return r})(e.adapter||iD.adapter)(e).then((function(t){return ED(e),t.data=hD.call(e,e.transformResponse,t),t.headers=dD.from(t.headers),t}),(function(t){return fD(t)||(ED(e),t&&t.response&&(t.response.data=hD.call(e,e.transformResponse,t.response),t.response.headers=dD.from(t.response.headers))),Promise.reject(t)}))}const xD=e=>e instanceof dD?e.toJSON():e;function kD(e,t){t=t||{};const n={};function r(e,t,n){return ML.isPlainObject(e)&&ML.isPlainObject(t)?ML.merge.call({caseless:n},e,t):ML.isPlainObject(t)?ML.merge({},t):ML.isArray(t)?t.slice():t}function i(e,t,n){return ML.isUndefined(t)?ML.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!ML.isUndefined(t))return r(void 0,t)}function o(e,t){return ML.isUndefined(t)?ML.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(xD(e),xD(t),!0)};return ML.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,o=s(e[r],t[r],r);ML.isUndefined(o)&&s!==a||(n[r]=o)})),n}const ID={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{ID[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const TD={};ID.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new VL(r(i," has been removed"+(t?" in "+t:"")),VL.ERR_DEPRECATED);return t&&!TD[i]&&(TD[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const CD={assertOptions:function(e,t,n){if("object"!=typeof e)throw new VL("options must be an object",VL.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new VL("option "+s+" must be "+n,VL.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new VL("Unknown option "+s,VL.ERR_BAD_OPTION)}},validators:ID},ND=CD.validators;class AD{constructor(e){this.defaults=e,this.interceptors={request:new ZL,response:new ZL}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=kD(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;let s;void 0!==n&&CD.assertOptions(n,{silentJSONParsing:ND.transitional(ND.boolean),forcedJSONParsing:ND.transitional(ND.boolean),clarifyTimeoutError:ND.transitional(ND.boolean)},!1),null!=r&&(ML.isFunction(r)?t.paramsSerializer={serialize:r}:CD.assertOptions(r,{encode:ND.function,serialize:ND.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),s=i&&ML.merge(i.common,i[t.method]),s&&ML.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=dD.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[SD.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{c=SD.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return JL(yD((e=kD(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}ML.forEach(["delete","get","head","options"],(function(e){AD.prototype[e]=function(t,n){return this.request(kD(n||{},{method:e,url:t,data:(n||{}).data}))}})),ML.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(kD(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}AD.prototype[e]=t(),AD.prototype[e+"Form"]=t(!0)}));const PD=AD;class OD{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new mD(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new OD((function(t){e=t})),cancel:e}}}const RD=OD,LD={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(LD).forEach((([e,t])=>{LD[t]=e}));const DD=LD,MD=function e(t){const n=new PD(t),r=nL(PD.prototype.request,n);return ML.extend(r,PD.prototype,n,{allOwnKeys:!0}),ML.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(kD(t,n))},r}(iD);MD.Axios=PD,MD.CanceledError=mD,MD.CancelToken=RD,MD.isCancel=fD,MD.VERSION="1.4.0",MD.toFormData=$L,MD.AxiosError=VL,MD.Cancel=MD.CanceledError,MD.all=function(e){return Promise.all(e)},MD.spread=function(e){return function(t){return e.apply(null,t)}},MD.isAxiosError=function(e){return ML.isObject(e)&&!0===e.isAxiosError},MD.mergeConfig=kD,MD.AxiosHeaders=dD,MD.formToJSON=e=>tD(ML.isHTMLForm(e)?new FormData(e):e),MD.HttpStatusCode=DD,MD.default=MD;const FD=MD;var jD=i(2879),UD={};function VD(e){return VD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VD(e)}function zD(){zD=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var s=t&&t.prototype instanceof h?t:h,o=Object.create(s.prototype),a=new k(i||[]);return r(o,"_invoke",{value:_(e,n,a)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&n.call(y,s)&&(m=y);var v=p.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,s,o,a){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==VD(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,a)}))}a(l.arg)}var s;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return{value:void 0,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(v),l(v,a,"Generator"),l(v,s,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(a&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function qD(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function BD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return GD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GD(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}UD.styleTagTransform=ke(),UD.setAttributes=_e(),UD.insert=we().bind(null,"head"),UD.domAPI=ye(),UD.insertStyleElement=Se(),me()(jD.Z,UD),jD.Z&&jD.Z.locals&&jD.Z.locals;const $D=function(){var e=BD((0,n.useState)(!1),2),t=e[0],r=e[1],i=(0,tL.useStripe)(),s=(0,tL.useElements)(),o=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){qD(s,r,i,o,a,"next",e)}function a(e){qD(s,r,i,o,a,"throw",e)}o(void 0)}))}}(zD().mark((function e(t){var n,o,a,l;return zD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,i.createPaymentMethod({type:"card",card:s.getElement(tL.CardElement)});case 3:if(n=e.sent,o=n.error,a=n.paymentMethod,o){e.next=20;break}return e.prev=7,l=a.id,e.next=11,FD.post("http://localhost:4000/payment",{amount:d,id:l});case 11:e.sent.data.success&&(console.log("Succeccful payment"),r(!0),c([])),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),console.log(e.t0);case 18:e.next=21;break;case 20:console.log(o.message);case 21:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),a=mN(),l=a.cart,c=a.setCart,u=BD((0,n.useState)(),2),d=u[0],h=u[1];return(0,n.useEffect)((function(){!function(){var e=JSON.parse(localStorage.getItem("productsInCart")||"[]"),t=0;e.forEach((function(e){e.hasOwnProperty("salePrice")?t+=e.salePrice*e.quantity:t+=e.price*e.quantity})),new Intl.NumberFormat("en-us"),h(100*t)}()}),[l]),n.createElement("div",{className:"payment-section"},t?n.createElement("div",null,n.createElement("h2",{className:"mt-2"},"Payment Succeeded")):n.createElement("form",{onSubmit:o},n.createElement("fieldset",{className:"FormGroup"},n.createElement("div",{className:"FormRow"},n.createElement(tL.CardElement,{options:{iconStyle:"solid",style:{base:{iconColor:"black",backgroundColor:"white",fontWeight:500,fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"16px",padding:"1rem",":-webkit-autofill":{color:"black"},"::placeholder":{color:"black"}}}}}))),n.createElement("button",{className:"payment-btn btn-success"},"Pay")))};function WD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const HD=function(){(0,n.useEffect)((function(){window.scrollTo(0,0)}),[]);var e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];eL=!0;var r=Date.now();return XR.then((function(e){return ZR(e,t,r)}))}("pk_test_51NJC4yHJSAygrcUp5cNzRAAcPEl4P2moYmzoiTbSeoKzakxGJHtSgkC88dWrVjDerixICvIaXLVxjYb0S81zzw4r00M4JHUEka"),t=mN().cart;(0,n.useEffect)((function(){l()}),[t]);var r,i,s=(r=(0,n.useState)(),i=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(r,i)||function(e,t){if(e){if("string"==typeof e)return WD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WD(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=s[0],a=s[1],l=function(){var e=JSON.parse(localStorage.getItem("productsInCart")||"[]"),t=0;e.forEach((function(e){e.hasOwnProperty("salePrice")?t+=e.salePrice*e.quantity:t+=e.price*e.quantity}));var n=new Intl.NumberFormat("en-us").format(t);a(n)};return n.createElement("div",{className:"checkout-section section mt-5"},n.createElement("div",{className:"container"},n.createElement(tL.Elements,{stripe:e},n.createElement("div",{className:"d-flex"},n.createElement("div",{className:"row col-12 p-0"},t.map((function(e){return n.createElement(de,{className:"col-12 col-md-6",to:"/products/".concat(e.id),key:e.id},n.createElement("div",{className:"cart-payment-item d-flex col-12 p-0 align-items-center justify-content-between"},n.createElement("div",{className:"d-flex align-items-center col-7 p-0 mr-1"},n.createElement("img",{className:"cart-img",src:e.img,alt:e.title}),n.createElement("span",{className:"cart-title"},e.title)),n.createElement("span",{className:"cart-price col-2 p-0 mr-1"},"EGP ",e.salePrice?e.salePrice:e.price),n.createElement("div",{className:"cart-quantity d-flex algin-items-center justify-content-end col-2 p-0"},n.createElement("span",{className:""},e.quantity))))})))),0!=t.length&&n.createElement("p",{className:"mt-2"},"TOTAL: EGP ",o),n.createElement($D,null))))},KD=function(){return n.createElement(ce,{basename:"/drippy-e-commerce"},n.createElement(ZC,null,n.createElement(gN,null,n.createElement(BN,null),n.createElement(ie,null,n.createElement(ne,{exact:!0,path:"/",element:n.createElement(SO,null)}),n.createElement(ne,{path:"/signup",element:n.createElement(FO,null)}),n.createElement(ne,{path:"/signin",element:n.createElement(WO,null)}),n.createElement(ne,{path:"/products/:productId",element:n.createElement(dR,null)}),n.createElement(ne,{path:"/addresses",element:n.createElement(tR,null)}),n.createElement(ne,{path:"/accessories",element:n.createElement(bR,null)}),n.createElement(ne,{path:"/shoes",element:n.createElement(NR,null)}),n.createElement(ne,{path:"/jackets",element:n.createElement(jR,null)}),n.createElement(ne,{path:"/sales",element:n.createElement(HR,null)}),n.createElement(ne,{path:"/checkout",element:n.createElement(HD,null)})),n.createElement(QO,null),n.createElement(YO,null))))};s.createRoot(document.getElementById("root")).render(n.createElement(KD,null))})()})();